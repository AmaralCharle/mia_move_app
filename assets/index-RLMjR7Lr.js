(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function s1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ly={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),i1=Symbol.for("react.portal"),o1=Symbol.for("react.fragment"),a1=Symbol.for("react.strict_mode"),l1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),d1=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),f1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),Xm=Symbol.iterator;function p1(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var Fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uy=Object.assign,Vy={};function hi(t,e,n){this.props=t,this.context=e,this.refs=Vy,this.updater=n||Fy}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zy(){}zy.prototype=hi.prototype;function $h(t,e,n){this.props=t,this.context=e,this.refs=Vy,this.updater=n||Fy}var Lh=$h.prototype=new zy;Lh.constructor=$h;Uy(Lh,hi.prototype);Lh.isPureReactComponent=!0;var Jm=Array.isArray,jy=Object.prototype.hasOwnProperty,Fh={current:null},By={key:!0,ref:!0,__self:!0,__source:!0};function qy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jy.call(e,r)&&!By.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wo,type:t,key:i,ref:o,props:s,_owner:Fh.current}}function g1(t,e){return{$$typeof:Wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wo}function y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zm=/\/+/g;function cc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y1(""+t.key):e.toString(36)}function Xa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wo:case i1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cc(o,0):r,Jm(s)?(n="",t!=null&&(n=t.replace(Zm,"$&/")+"/"),Xa(s,e,n,"",function(c){return c})):s!=null&&(Uh(s)&&(s=g1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jm(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+cc(i,a);o+=Xa(i,e,n,u,s)}else if(u=p1(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+cc(i,a++),o+=Xa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Na(t,e,n){if(t==null)return t;var r=[],s=0;return Xa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function v1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Ja={transition:null},E1={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Ja,ReactCurrentOwner:Fh};function Hy(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Na,forEach:function(t,e,n){Na(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Na(t,function(){e++}),e},toArray:function(t){return Na(t,function(e){return e})||[]},only:function(t){if(!Uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=hi;se.Fragment=o1;se.Profiler=l1;se.PureComponent=$h;se.StrictMode=a1;se.Suspense=h1;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E1;se.act=Hy;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)jy.call(e,u)&&!By.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wo,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:c1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u1,_context:t},t.Consumer=t};se.createElement=qy;se.createFactory=function(t){var e=qy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:d1,render:t}};se.isValidElement=Uh;se.lazy=function(t){return{$$typeof:m1,_payload:{_status:-1,_result:t},_init:v1}};se.memo=function(t,e){return{$$typeof:f1,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Ja.transition;Ja.transition={};try{t()}finally{Ja.transition=e}};se.unstable_act=Hy;se.useCallback=function(t,e){return _t.current.useCallback(t,e)};se.useContext=function(t){return _t.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};se.useEffect=function(t,e){return _t.current.useEffect(t,e)};se.useId=function(){return _t.current.useId()};se.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return _t.current.useMemo(t,e)};se.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};se.useRef=function(t){return _t.current.useRef(t)};se.useState=function(t){return _t.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return _t.current.useTransition()};se.version="18.3.1";Ly.exports=se;var S=Ly.exports;const l=s1(S);var Wy={exports:{}},zt={},Ky={exports:{}},Gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,C){var j=x.length;x.push(C);e:for(;0<j;){var T=j-1>>>1,$=x[T];if(0<s($,C))x[T]=C,x[j]=$,j=T;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var C=x[0],j=x.pop();if(j!==C){x[0]=j;e:for(var T=0,$=x.length,ne=$>>>1;T<ne;){var ye=2*(T+1)-1,je=x[ye],$e=ye+1,rt=x[$e];if(0>s(je,j))$e<$&&0>s(rt,je)?(x[T]=rt,x[$e]=j,T=$e):(x[T]=je,x[ye]=j,T=ye);else if($e<$&&0>s(rt,j))x[T]=rt,x[$e]=j,T=$e;else break e}}return C}function s(x,C){var j=x.sortIndex-C.sortIndex;return j!==0?j:x.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,f=3,g=!1,v=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(x){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=x)r(c),C.sortIndex=C.expirationTime,e(u,C);else break;C=n(c)}}function k(x){if(E=!1,y(x),!v)if(n(u)!==null)v=!0,R(I);else{var C=n(c);C!==null&&b(k,C.startTime-x)}}function I(x,C){v=!1,E&&(E=!1,m(M),M=-1),g=!0;var j=f;try{for(y(C),h=n(u);h!==null&&(!(h.expirationTime>C)||x&&!N());){var T=h.callback;if(typeof T=="function"){h.callback=null,f=h.priorityLevel;var $=T(h.expirationTime<=C);C=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(u)&&r(u),y(C)}else r(u);h=n(u)}if(h!==null)var ne=!0;else{var ye=n(c);ye!==null&&b(k,ye.startTime-C),ne=!1}return ne}finally{h=null,f=j,g=!1}}var L=!1,z=null,M=-1,Q=5,A=-1;function N(){return!(t.unstable_now()-A<Q)}function O(){if(z!==null){var x=t.unstable_now();A=x;var C=!0;try{C=z(!0,x)}finally{C?K():(L=!1,z=null)}}else L=!1}var K;if(typeof p=="function")K=function(){p(O)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,D=re.port2;re.port1.onmessage=O,K=function(){D.postMessage(null)}}else K=function(){w(O,0)};function R(x){z=x,L||(L=!0,K())}function b(x,C){M=w(function(){x(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,R(I))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(x){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var j=f;f=C;try{return x()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,C){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var j=f;f=x;try{return C()}finally{f=j}},t.unstable_scheduleCallback=function(x,C,j){var T=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?T+j:T):j=T,x){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=j+$,x={id:d++,callback:C,priorityLevel:x,startTime:j,expirationTime:$,sortIndex:-1},j>T?(x.sortIndex=j,e(c,x),n(u)===null&&x===n(c)&&(E?(m(M),M=-1):E=!0,b(k,j-T))):(x.sortIndex=$,e(u,x),v||g||(v=!0,R(I))),x},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(x){var C=f;return function(){var j=f;f=C;try{return x.apply(this,arguments)}finally{f=j}}}})(Gy);Ky.exports=Gy;var w1=Ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=S,Ut=w1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qy=new Set,lo={};function ls(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(lo[t]=e,t=0;t<e.length;t++)Qy.add(e[t])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=Object.prototype.hasOwnProperty,x1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ep={},tp={};function S1(t){return ld.call(tp,t)?!0:ld.call(ep,t)?!1:x1.test(t)?tp[t]=!0:(ep[t]=!0,!1)}function N1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _1(t,e,n,r){if(e===null||typeof e>"u"||N1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vh=/[\-:]([a-z])/g;function zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vh,zh);nt[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vh,zh);nt[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vh,zh);nt[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function jh(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_1(e,n,s,r)&&(n=null),r||s===null?S1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),ws=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),Bh=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),Yy=Symbol.for("react.provider"),Xy=Symbol.for("react.context"),qh=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),dd=Symbol.for("react.suspense_list"),Hh=Symbol.for("react.memo"),Zn=Symbol.for("react.lazy"),Jy=Symbol.for("react.offscreen"),np=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=np&&t[np]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,dc;function Li(t){if(dc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dc=e&&e[1]||""}return`
`+dc+t}var hc=!1;function fc(t,e){if(!t||hc)return"";hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{hc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Li(t):""}function C1(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=fc(t.type,!1),t;case 11:return t=fc(t.type.render,!1),t;case 1:return t=fc(t.type,!0),t;default:return""}}function hd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ks:return"Fragment";case ws:return"Portal";case ud:return"Profiler";case Bh:return"StrictMode";case cd:return"Suspense";case dd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xy:return(t.displayName||"Context")+".Consumer";case Yy:return(t._context.displayName||"Context")+".Provider";case qh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hh:return e=t.displayName||null,e!==null?e:hd(t.type)||"Memo";case Zn:e=t._payload,t=t._init;try{return hd(t(e))}catch{}}return null}function I1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hd(e);case 8:return e===Bh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T1(t){var e=Zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ca(t){t._valueTracker||(t._valueTracker=T1(t))}function e0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fd(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t0(t,e){e=e.checked,e!=null&&jh(t,"checked",e,!1)}function md(t,e){t0(t,e);var n=Sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pd(t,e.type,n):e.hasOwnProperty("defaultValue")&&pd(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pd(t,e,n){(e!=="number"||vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fi=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ip(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Fi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function n0(t,e){var n=Sr(e.value),r=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function op(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ia,s0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D1=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(t){D1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gi[e]=Gi[t]})});function i0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gi.hasOwnProperty(t)&&Gi[t]?(""+e).trim():e+"px"}function o0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=i0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var b1=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(b1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ed(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=null;function Wh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Os=null,$s=null;function ap(t){if(t=Qo(t)){if(typeof kd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=pu(e),kd(t.stateNode,t.type,e))}}function a0(t){Os?$s?$s.push(t):$s=[t]:Os=t}function l0(){if(Os){var t=Os,e=$s;if($s=Os=null,ap(t),e)for(t=0;t<e.length;t++)ap(e[t])}}function u0(t,e){return t(e)}function c0(){}var mc=!1;function d0(t,e,n){if(mc)return t(e,n);mc=!0;try{return u0(t,e,n)}finally{mc=!1,(Os!==null||$s!==null)&&(c0(),l0())}}function co(t,e){var n=t.stateNode;if(n===null)return null;var r=pu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var xd=!1;if(Un)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){xd=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{xd=!1}function A1(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Qi=!1,El=null,wl=!1,Sd=null,R1={onError:function(t){Qi=!0,El=t}};function P1(t,e,n,r,s,i,o,a,u){Qi=!1,El=null,A1.apply(R1,arguments)}function M1(t,e,n,r,s,i,o,a,u){if(P1.apply(this,arguments),Qi){if(Qi){var c=El;Qi=!1,El=null}else throw Error(F(198));wl||(wl=!0,Sd=c)}}function us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lp(t){if(us(t)!==t)throw Error(F(188))}function O1(t){var e=t.alternate;if(!e){if(e=us(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lp(s),t;if(i===r)return lp(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function f0(t){return t=O1(t),t!==null?m0(t):null}function m0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m0(t);if(e!==null)return e;t=t.sibling}return null}var p0=Ut.unstable_scheduleCallback,up=Ut.unstable_cancelCallback,$1=Ut.unstable_shouldYield,L1=Ut.unstable_requestPaint,Me=Ut.unstable_now,F1=Ut.unstable_getCurrentPriorityLevel,Kh=Ut.unstable_ImmediatePriority,g0=Ut.unstable_UserBlockingPriority,kl=Ut.unstable_NormalPriority,U1=Ut.unstable_LowPriority,y0=Ut.unstable_IdlePriority,du=null,En=null;function V1(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(du,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:B1,z1=Math.log,j1=Math.LN2;function B1(t){return t>>>=0,t===0?32:31-(z1(t)/j1|0)|0}var Ta=64,Da=4194304;function Ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ui(a):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function q1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=q1(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Nd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v0(){var t=Ta;return Ta<<=1,!(Ta&4194240)&&(Ta=64),t}function pc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ko(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function W1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function E0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var w0,Qh,k0,x0,S0,_d=!1,ba=[],dr=null,hr=null,fr=null,ho=new Map,fo=new Map,tr=[],K1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cp(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qo(e),e!==null&&Qh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function G1(t,e,n,r,s){switch(e){case"focusin":return dr=Di(dr,t,e,n,r,s),!0;case"dragenter":return hr=Di(hr,t,e,n,r,s),!0;case"mouseover":return fr=Di(fr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ho.set(i,Di(ho.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0}return!1}function N0(t){var e=zr(t.target);if(e!==null){var n=us(e);if(n!==null){if(e=n.tag,e===13){if(e=h0(n),e!==null){t.blockedOn=e,S0(t.priority,function(){k0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wd=r,n.target.dispatchEvent(r),wd=null}else return e=Qo(n),e!==null&&Qh(e),t.blockedOn=n,!1;e.shift()}return!0}function dp(t,e,n){Za(t)&&n.delete(e)}function Q1(){_d=!1,dr!==null&&Za(dr)&&(dr=null),hr!==null&&Za(hr)&&(hr=null),fr!==null&&Za(fr)&&(fr=null),ho.forEach(dp),fo.forEach(dp)}function bi(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Q1)))}function mo(t){function e(s){return bi(s,t)}if(0<ba.length){bi(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dr!==null&&bi(dr,t),hr!==null&&bi(hr,t),fr!==null&&bi(fr,t),ho.forEach(e),fo.forEach(e),n=0;n<tr.length;n++)r=tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&tr.shift()}var Ls=Gn.ReactCurrentBatchConfig,Sl=!0;function Y1(t,e,n,r){var s=me,i=Ls.transition;Ls.transition=null;try{me=1,Yh(t,e,n,r)}finally{me=s,Ls.transition=i}}function X1(t,e,n,r){var s=me,i=Ls.transition;Ls.transition=null;try{me=4,Yh(t,e,n,r)}finally{me=s,Ls.transition=i}}function Yh(t,e,n,r){if(Sl){var s=Cd(t,e,n,r);if(s===null)_c(t,e,r,Nl,n),cp(t,r);else if(G1(s,t,e,n,r))r.stopPropagation();else if(cp(t,r),e&4&&-1<K1.indexOf(t)){for(;s!==null;){var i=Qo(s);if(i!==null&&w0(i),i=Cd(t,e,n,r),i===null&&_c(t,e,r,Nl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _c(t,e,r,null,n)}}var Nl=null;function Cd(t,e,n,r){if(Nl=null,t=Wh(r),t=zr(t),t!==null)if(e=us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=h0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function _0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F1()){case Kh:return 1;case g0:return 4;case kl:case U1:return 16;case y0:return 536870912;default:return 16}default:return 16}}var lr=null,Xh=null,el=null;function C0(){if(el)return el;var t,e=Xh,n=e.length,r,s="value"in lr?lr.value:lr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return el=s.slice(t,1<r?1-r:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function hp(){return!1}function jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:hp,this.isPropagationStopped=hp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jh=jt(fi),Go=be({},fi,{view:0,detail:0}),J1=jt(Go),gc,yc,Ai,hu=be({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(gc=t.screenX-Ai.screenX,yc=t.screenY-Ai.screenY):yc=gc=0,Ai=t),gc)},movementY:function(t){return"movementY"in t?t.movementY:yc}}),fp=jt(hu),Z1=be({},hu,{dataTransfer:0}),ex=jt(Z1),tx=be({},Go,{relatedTarget:0}),vc=jt(tx),nx=be({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=jt(nx),sx=be({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ix=jt(sx),ox=be({},fi,{data:0}),mp=jt(ox),ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ux[t])?!!e[t]:!1}function Zh(){return cx}var dx=be({},Go,{key:function(t){if(t.key){var e=ax[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hx=jt(dx),fx=be({},hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=jt(fx),mx=be({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),px=jt(mx),gx=be({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),yx=jt(gx),vx=be({},hu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ex=jt(vx),wx=[9,13,27,32],ef=Un&&"CompositionEvent"in window,Yi=null;Un&&"documentMode"in document&&(Yi=document.documentMode);var kx=Un&&"TextEvent"in window&&!Yi,I0=Un&&(!ef||Yi&&8<Yi&&11>=Yi),gp=" ",yp=!1;function T0(t,e){switch(t){case"keyup":return wx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function xx(t,e){switch(t){case"compositionend":return D0(e);case"keypress":return e.which!==32?null:(yp=!0,gp);case"textInput":return t=e.data,t===gp&&yp?null:t;default:return null}}function Sx(t,e){if(xs)return t==="compositionend"||!ef&&T0(t,e)?(t=C0(),el=Xh=lr=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I0&&e.locale!=="ko"?null:e.data;default:return null}}var Nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nx[t.type]:e==="textarea"}function b0(t,e,n,r){a0(r),e=_l(e,"onChange"),0<e.length&&(n=new Jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,po=null;function _x(t){z0(t,0)}function fu(t){var e=_s(t);if(e0(e))return t}function Cx(t,e){if(t==="change")return e}var A0=!1;if(Un){var Ec;if(Un){var wc="oninput"in document;if(!wc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),wc=typeof Ep.oninput=="function"}Ec=wc}else Ec=!1;A0=Ec&&(!document.documentMode||9<document.documentMode)}function wp(){Xi&&(Xi.detachEvent("onpropertychange",R0),po=Xi=null)}function R0(t){if(t.propertyName==="value"&&fu(po)){var e=[];b0(e,po,t,Wh(t)),d0(_x,e)}}function Ix(t,e,n){t==="focusin"?(wp(),Xi=e,po=n,Xi.attachEvent("onpropertychange",R0)):t==="focusout"&&wp()}function Tx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(po)}function Dx(t,e){if(t==="click")return fu(e)}function bx(t,e){if(t==="input"||t==="change")return fu(e)}function Ax(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:Ax;function go(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ld.call(e,s)||!on(t[s],e[s]))return!1}return!0}function kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xp(t,e){var n=kp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kp(n)}}function P0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M0(){for(var t=window,e=vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vl(t.document)}return e}function tf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rx(t){var e=M0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P0(n.ownerDocument.documentElement,n)){if(r!==null&&tf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xp(n,i);var o=xp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Px=Un&&"documentMode"in document&&11>=document.documentMode,Ss=null,Id=null,Ji=null,Td=!1;function Sp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Ss==null||Ss!==vl(r)||(r=Ss,"selectionStart"in r&&tf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&go(Ji,r)||(Ji=r,r=_l(Id,"onSelect"),0<r.length&&(e=new Jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function Ra(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},kc={},O0={};Un&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function mu(t){if(kc[t])return kc[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in O0)return kc[t]=e[n];return t}var $0=mu("animationend"),L0=mu("animationiteration"),F0=mu("animationstart"),U0=mu("transitionend"),V0=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){V0.set(t,e),ls(e,[t])}for(var xc=0;xc<Np.length;xc++){var Sc=Np[xc],Mx=Sc.toLowerCase(),Ox=Sc[0].toUpperCase()+Sc.slice(1);Dr(Mx,"on"+Ox)}Dr($0,"onAnimationEnd");Dr(L0,"onAnimationIteration");Dr(F0,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(U0,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$x=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function _p(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,M1(r,e,void 0,t),t.currentTarget=null}function z0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;_p(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;_p(s,a,c),i=u}}}if(wl)throw t=Sd,wl=!1,Sd=null,t}function ke(t,e){var n=e[Pd];n===void 0&&(n=e[Pd]=new Set);var r=t+"__bubble";n.has(r)||(j0(e,t,2,!1),n.add(r))}function Nc(t,e,n){var r=0;e&&(r|=4),j0(n,t,r,e)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[Pa]){t[Pa]=!0,Qy.forEach(function(n){n!=="selectionchange"&&($x.has(n)||Nc(n,!1,t),Nc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pa]||(e[Pa]=!0,Nc("selectionchange",!1,e))}}function j0(t,e,n,r){switch(_0(e)){case 1:var s=Y1;break;case 4:s=X1;break;default:s=Yh}n=s.bind(null,e,n,t),s=void 0,!xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _c(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=zr(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}d0(function(){var c=i,d=Wh(n),h=[];e:{var f=V0.get(t);if(f!==void 0){var g=Jh,v=t;switch(t){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":g=hx;break;case"focusin":v="focus",g=vc;break;case"focusout":v="blur",g=vc;break;case"beforeblur":case"afterblur":g=vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=px;break;case $0:case L0:case F0:g=rx;break;case U0:g=yx;break;case"scroll":g=J1;break;case"wheel":g=Ex;break;case"copy":case"cut":case"paste":g=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=pp}var E=(e&4)!==0,w=!E&&t==="scroll",m=E?f!==null?f+"Capture":null:f;E=[];for(var p=c,y;p!==null;){y=p;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,m!==null&&(k=co(p,m),k!=null&&E.push(vo(p,k,y)))),w)break;p=p.return}0<E.length&&(f=new g(f,v,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==wd&&(v=n.relatedTarget||n.fromElement)&&(zr(v)||v[Vn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?zr(v):null,v!==null&&(w=us(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(E=fp,k="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(E=pp,k="onPointerLeave",m="onPointerEnter",p="pointer"),w=g==null?f:_s(g),y=v==null?f:_s(v),f=new E(k,p+"leave",g,n,d),f.target=w,f.relatedTarget=y,k=null,zr(d)===c&&(E=new E(m,p+"enter",v,n,d),E.target=y,E.relatedTarget=w,k=E),w=k,g&&v)t:{for(E=g,m=v,p=0,y=E;y;y=ms(y))p++;for(y=0,k=m;k;k=ms(k))y++;for(;0<p-y;)E=ms(E),p--;for(;0<y-p;)m=ms(m),y--;for(;p--;){if(E===m||m!==null&&E===m.alternate)break t;E=ms(E),m=ms(m)}E=null}else E=null;g!==null&&Cp(h,f,g,E,!1),v!==null&&w!==null&&Cp(h,w,v,E,!0)}}e:{if(f=c?_s(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var I=Cx;else if(vp(f))if(A0)I=bx;else{I=Tx;var L=Ix}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=Dx);if(I&&(I=I(t,c))){b0(h,I,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&pd(f,"number",f.value)}switch(L=c?_s(c):window,t){case"focusin":(vp(L)||L.contentEditable==="true")&&(Ss=L,Id=c,Ji=null);break;case"focusout":Ji=Id=Ss=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Sp(h,n,d);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":Sp(h,n,d)}var z;if(ef)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else xs?T0(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(I0&&n.locale!=="ko"&&(xs||M!=="onCompositionStart"?M==="onCompositionEnd"&&xs&&(z=C0()):(lr=d,Xh="value"in lr?lr.value:lr.textContent,xs=!0)),L=_l(c,M),0<L.length&&(M=new mp(M,t,null,n,d),h.push({event:M,listeners:L}),z?M.data=z:(z=D0(n),z!==null&&(M.data=z)))),(z=kx?xx(t,n):Sx(t,n))&&(c=_l(c,"onBeforeInput"),0<c.length&&(d=new mp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=z))}z0(h,e)})}function vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _l(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=co(t,n),i!=null&&r.unshift(vo(t,i,s)),i=co(t,e),i!=null&&r.push(vo(t,i,s))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=co(n,i),u!=null&&o.unshift(vo(n,u,a))):s||(u=co(n,i),u!=null&&o.push(vo(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Lx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(Lx,`
`).replace(Fx,"")}function Ma(t,e,n){if(e=Ip(e),Ip(t)!==e&&n)throw Error(F(425))}function Cl(){}var Dd=null,bd=null;function Ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,Ux=typeof clearTimeout=="function"?clearTimeout:void 0,Tp=typeof Promise=="function"?Promise:void 0,Vx=typeof queueMicrotask=="function"?queueMicrotask:typeof Tp<"u"?function(t){return Tp.resolve(null).then(t).catch(zx)}:Rd;function zx(t){setTimeout(function(){throw t})}function Cc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),pn="__reactFiber$"+mi,Eo="__reactProps$"+mi,Vn="__reactContainer$"+mi,Pd="__reactEvents$"+mi,jx="__reactListeners$"+mi,Bx="__reactHandles$"+mi;function zr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dp(t);t!==null;){if(n=t[pn])return n;t=Dp(t)}return e}t=n,n=t.parentNode}return null}function Qo(t){return t=t[pn]||t[Vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function pu(t){return t[Eo]||null}var Md=[],Cs=-1;function br(t){return{current:t}}function Ne(t){0>Cs||(t.current=Md[Cs],Md[Cs]=null,Cs--)}function we(t,e){Cs++,Md[Cs]=t.current,t.current=e}var Nr={},gt=br(Nr),At=br(!1),Xr=Nr;function Gs(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function Il(){Ne(At),Ne(gt)}function bp(t,e,n){if(gt.current!==Nr)throw Error(F(168));we(gt,e),we(At,n)}function B0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,I1(t)||"Unknown",s));return be({},n,r)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,Xr=gt.current,we(gt,t),we(At,At.current),!0}function Ap(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=B0(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,Ne(At),Ne(gt),we(gt,t)):Ne(At),we(At,n)}var Dn=null,gu=!1,Ic=!1;function q0(t){Dn===null?Dn=[t]:Dn.push(t)}function qx(t){gu=!0,q0(t)}function Ar(){if(!Ic&&Dn!==null){Ic=!0;var t=0,e=me;try{var n=Dn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,gu=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),p0(Kh,Ar),s}finally{me=e,Ic=!1}}return null}var Is=[],Ts=0,Dl=null,bl=0,Wt=[],Kt=0,Jr=null,An=1,Rn="";function Fr(t,e){Is[Ts++]=bl,Is[Ts++]=Dl,Dl=t,bl=e}function H0(t,e,n){Wt[Kt++]=An,Wt[Kt++]=Rn,Wt[Kt++]=Jr,Jr=t;var r=An;t=Rn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,An=1<<32-rn(e)+s|n<<s|r,Rn=i+t}else An=1<<i|n<<s|r,Rn=t}function nf(t){t.return!==null&&(Fr(t,1),H0(t,1,0))}function rf(t){for(;t===Dl;)Dl=Is[--Ts],Is[Ts]=null,bl=Is[--Ts],Is[Ts]=null;for(;t===Jr;)Jr=Wt[--Kt],Wt[Kt]=null,Rn=Wt[--Kt],Wt[Kt]=null,An=Wt[--Kt],Wt[Kt]=null}var Lt=null,Ot=null,Ce=!1,nn=null;function W0(t,e){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Ot=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jr!==null?{id:An,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Ot=null,!0):!1;default:return!1}}function Od(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $d(t){if(Ce){var e=Ot;if(e){var n=e;if(!Rp(t,e)){if(Od(t))throw Error(F(418));e=mr(n.nextSibling);var r=Lt;e&&Rp(t,e)?W0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Lt=t)}}else{if(Od(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ce=!1,Lt=t}}}function Pp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Oa(t){if(t!==Lt)return!1;if(!Ce)return Pp(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ad(t.type,t.memoizedProps)),e&&(e=Ot)){if(Od(t))throw K0(),Error(F(418));for(;e;)W0(t,e),e=mr(e.nextSibling)}if(Pp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Lt?mr(t.stateNode.nextSibling):null;return!0}function K0(){for(var t=Ot;t;)t=mr(t.nextSibling)}function Qs(){Ot=Lt=null,Ce=!1}function sf(t){nn===null?nn=[t]:nn.push(t)}var Hx=Gn.ReactCurrentBatchConfig;function Ri(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function $a(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mp(t){var e=t._init;return e(t._payload)}function G0(t){function e(m,p){if(t){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=vr(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,p,y,k){return p===null||p.tag!==6?(p=Mc(y,m.mode,k),p.return=m,p):(p=s(p,y),p.return=m,p)}function u(m,p,y,k){var I=y.type;return I===ks?d(m,p,y.props.children,k,y.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Zn&&Mp(I)===p.type)?(k=s(p,y.props),k.ref=Ri(m,p,y),k.return=m,k):(k=ll(y.type,y.key,y.props,null,m.mode,k),k.ref=Ri(m,p,y),k.return=m,k)}function c(m,p,y,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Oc(y,m.mode,k),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function d(m,p,y,k,I){return p===null||p.tag!==7?(p=Gr(y,m.mode,k,I),p.return=m,p):(p=s(p,y),p.return=m,p)}function h(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Mc(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _a:return y=ll(p.type,p.key,p.props,null,m.mode,y),y.ref=Ri(m,null,p),y.return=m,y;case ws:return p=Oc(p,m.mode,y),p.return=m,p;case Zn:var k=p._init;return h(m,k(p._payload),y)}if(Fi(p)||Ii(p))return p=Gr(p,m.mode,y,null),p.return=m,p;$a(m,p)}return null}function f(m,p,y,k){var I=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:a(m,p,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _a:return y.key===I?u(m,p,y,k):null;case ws:return y.key===I?c(m,p,y,k):null;case Zn:return I=y._init,f(m,p,I(y._payload),k)}if(Fi(y)||Ii(y))return I!==null?null:d(m,p,y,k,null);$a(m,y)}return null}function g(m,p,y,k,I){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(y)||null,a(p,m,""+k,I);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _a:return m=m.get(k.key===null?y:k.key)||null,u(p,m,k,I);case ws:return m=m.get(k.key===null?y:k.key)||null,c(p,m,k,I);case Zn:var L=k._init;return g(m,p,y,L(k._payload),I)}if(Fi(k)||Ii(k))return m=m.get(y)||null,d(p,m,k,I,null);$a(p,k)}return null}function v(m,p,y,k){for(var I=null,L=null,z=p,M=p=0,Q=null;z!==null&&M<y.length;M++){z.index>M?(Q=z,z=null):Q=z.sibling;var A=f(m,z,y[M],k);if(A===null){z===null&&(z=Q);break}t&&z&&A.alternate===null&&e(m,z),p=i(A,p,M),L===null?I=A:L.sibling=A,L=A,z=Q}if(M===y.length)return n(m,z),Ce&&Fr(m,M),I;if(z===null){for(;M<y.length;M++)z=h(m,y[M],k),z!==null&&(p=i(z,p,M),L===null?I=z:L.sibling=z,L=z);return Ce&&Fr(m,M),I}for(z=r(m,z);M<y.length;M++)Q=g(z,m,M,y[M],k),Q!==null&&(t&&Q.alternate!==null&&z.delete(Q.key===null?M:Q.key),p=i(Q,p,M),L===null?I=Q:L.sibling=Q,L=Q);return t&&z.forEach(function(N){return e(m,N)}),Ce&&Fr(m,M),I}function E(m,p,y,k){var I=Ii(y);if(typeof I!="function")throw Error(F(150));if(y=I.call(y),y==null)throw Error(F(151));for(var L=I=null,z=p,M=p=0,Q=null,A=y.next();z!==null&&!A.done;M++,A=y.next()){z.index>M?(Q=z,z=null):Q=z.sibling;var N=f(m,z,A.value,k);if(N===null){z===null&&(z=Q);break}t&&z&&N.alternate===null&&e(m,z),p=i(N,p,M),L===null?I=N:L.sibling=N,L=N,z=Q}if(A.done)return n(m,z),Ce&&Fr(m,M),I;if(z===null){for(;!A.done;M++,A=y.next())A=h(m,A.value,k),A!==null&&(p=i(A,p,M),L===null?I=A:L.sibling=A,L=A);return Ce&&Fr(m,M),I}for(z=r(m,z);!A.done;M++,A=y.next())A=g(z,m,M,A.value,k),A!==null&&(t&&A.alternate!==null&&z.delete(A.key===null?M:A.key),p=i(A,p,M),L===null?I=A:L.sibling=A,L=A);return t&&z.forEach(function(O){return e(m,O)}),Ce&&Fr(m,M),I}function w(m,p,y,k){if(typeof y=="object"&&y!==null&&y.type===ks&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case _a:e:{for(var I=y.key,L=p;L!==null;){if(L.key===I){if(I=y.type,I===ks){if(L.tag===7){n(m,L.sibling),p=s(L,y.props.children),p.return=m,m=p;break e}}else if(L.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Zn&&Mp(I)===L.type){n(m,L.sibling),p=s(L,y.props),p.ref=Ri(m,L,y),p.return=m,m=p;break e}n(m,L);break}else e(m,L);L=L.sibling}y.type===ks?(p=Gr(y.props.children,m.mode,k,y.key),p.return=m,m=p):(k=ll(y.type,y.key,y.props,null,m.mode,k),k.ref=Ri(m,p,y),k.return=m,m=k)}return o(m);case ws:e:{for(L=y.key;p!==null;){if(p.key===L)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Oc(y,m.mode,k),p.return=m,m=p}return o(m);case Zn:return L=y._init,w(m,p,L(y._payload),k)}if(Fi(y))return v(m,p,y,k);if(Ii(y))return E(m,p,y,k);$a(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=Mc(y,m.mode,k),p.return=m,m=p),o(m)):n(m,p)}return w}var Ys=G0(!0),Q0=G0(!1),Al=br(null),Rl=null,Ds=null,of=null;function af(){of=Ds=Rl=null}function lf(t){var e=Al.current;Ne(Al),t._currentValue=e}function Ld(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e){Rl=t,of=Ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(of!==t)if(t={context:t,memoizedValue:e,next:null},Ds===null){if(Rl===null)throw Error(F(308));Ds=t,Rl.dependencies={lanes:0,firstContext:t}}else Ds=Ds.next=t;return e}var jr=null;function uf(t){jr===null?jr=[t]:jr.push(t)}function Y0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var er=!1;function cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}function Op(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var s=t.updateQueue;er=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,E=a;switch(f=e,g=n,E.tag){case 1:if(v=E.payload,typeof v=="function"){h=v.call(g,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=E.payload,f=typeof v=="function"?v.call(g,h,f):v,f==null)break e;h=be({},h,f);break e;case 2:er=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,u=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=h}}function $p(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Yo={},wn=br(Yo),wo=br(Yo),ko=br(Yo);function Br(t){if(t===Yo)throw Error(F(174));return t}function df(t,e){switch(we(ko,e),we(wo,t),we(wn,Yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Ne(wn),we(wn,e)}function Xs(){Ne(wn),Ne(wo),Ne(ko)}function J0(t){Br(ko.current);var e=Br(wn.current),n=yd(e,t.type);e!==n&&(we(wo,t),we(wn,n))}function hf(t){wo.current===t&&(Ne(wn),Ne(wo))}var Ie=br(0);function Ml(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tc=[];function ff(){for(var t=0;t<Tc.length;t++)Tc[t]._workInProgressVersionPrimary=null;Tc.length=0}var rl=Gn.ReactCurrentDispatcher,Dc=Gn.ReactCurrentBatchConfig,Zr=0,De=null,qe=null,Ke=null,Ol=!1,Zi=!1,xo=0,Wx=0;function it(){throw Error(F(321))}function mf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function pf(t,e,n,r,s,i){if(Zr=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rl.current=t===null||t.memoizedState===null?Yx:Xx,t=n(r,s),Zi){i=0;do{if(Zi=!1,xo=0,25<=i)throw Error(F(301));i+=1,Ke=qe=null,e.updateQueue=null,rl.current=Jx,t=n(r,s)}while(Zi)}if(rl.current=$l,e=qe!==null&&qe.next!==null,Zr=0,Ke=qe=De=null,Ol=!1,e)throw Error(F(300));return t}function gf(){var t=xo!==0;return xo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?De.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Jt(){if(qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ke===null?De.memoizedState:Ke.next;if(e!==null)Ke=e,qe=t;else{if(t===null)throw Error(F(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ke===null?De.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function So(t,e){return typeof e=="function"?e(t):e}function bc(t){var e=Jt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var d=c.lane;if((Zr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,De.lanes|=d,es|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,on(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,es|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ac(t){var e=Jt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Z0(){}function ev(t,e){var n=De,r=Jt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,bt=!0),r=r.queue,yf(rv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,No(9,nv.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(F(349));Zr&30||tv(n,e,s)}return s}function tv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nv(t,e,n,r){e.value=n,e.getSnapshot=r,sv(e)&&iv(t)}function rv(t,e,n){return n(function(){sv(e)&&iv(t)})}function sv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function iv(t){var e=zn(t,1);e!==null&&sn(e,t,1,-1)}function Lp(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:t},e.queue=t,t=t.dispatch=Qx.bind(null,De,t),[e.memoizedState,t]}function No(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ov(){return Jt().memoizedState}function sl(t,e,n,r){var s=mn();De.flags|=t,s.memoizedState=No(1|e,n,void 0,r===void 0?null:r)}function yu(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&mf(r,o.deps)){s.memoizedState=No(e,n,i,r);return}}De.flags|=t,s.memoizedState=No(1|e,n,i,r)}function Fp(t,e){return sl(8390656,8,t,e)}function yf(t,e){return yu(2048,8,t,e)}function av(t,e){return yu(4,2,t,e)}function lv(t,e){return yu(4,4,t,e)}function uv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cv(t,e,n){return n=n!=null?n.concat([t]):null,yu(4,4,uv.bind(null,e,t),n)}function vf(){}function dv(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hv(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fv(t,e,n){return Zr&21?(on(n,e)||(n=v0(),De.lanes|=n,es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function Kx(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Dc.transition;Dc.transition={};try{t(!1),e()}finally{me=n,Dc.transition=r}}function mv(){return Jt().memoizedState}function Gx(t,e,n){var r=yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pv(t))gv(e,n);else if(n=Y0(t,e,n,r),n!==null){var s=xt();sn(n,t,r,s),yv(n,e,r)}}function Qx(t,e,n){var r=yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pv(t))gv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,on(a,o)){var u=e.interleaved;u===null?(s.next=s,uf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Y0(t,e,s,r),n!==null&&(s=xt(),sn(n,t,r,s),yv(n,e,r))}}function pv(t){var e=t.alternate;return t===De||e!==null&&e===De}function gv(t,e){Zi=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}var $l={readContext:Xt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Yx={readContext:Xt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:Fp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sl(4194308,4,uv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return sl(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gx.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Lp,useDebugValue:vf,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Lp(!1),e=t[0];return t=Kx.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=mn();if(Ce){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ge===null)throw Error(F(349));Zr&30||tv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fp(rv.bind(null,r,i,t),[t]),r.flags|=2048,No(9,nv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=Ge.identifierPrefix;if(Ce){var n=Rn,r=An;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xx={readContext:Xt,useCallback:dv,useContext:Xt,useEffect:yf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:bc,useRef:ov,useState:function(){return bc(So)},useDebugValue:vf,useDeferredValue:function(t){var e=Jt();return fv(e,qe.memoizedState,t)},useTransition:function(){var t=bc(So)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Z0,useSyncExternalStore:ev,useId:mv,unstable_isNewReconciler:!1},Jx={readContext:Xt,useCallback:dv,useContext:Xt,useEffect:yf,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Ac,useRef:ov,useState:function(){return Ac(So)},useDebugValue:vf,useDeferredValue:function(t){var e=Jt();return qe===null?e.memoizedState=t:fv(e,qe.memoizedState,t)},useTransition:function(){var t=Ac(So)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Z0,useSyncExternalStore:ev,useId:mv,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vu={isMounted:function(t){return(t=t._reactInternals)?us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=yr(t),i=Ln(r,s);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(sn(e,t,s,r),nl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=yr(t),i=Ln(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(sn(e,t,s,r),nl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=yr(t),s=Ln(n,r);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,r),e!==null&&(sn(e,t,r,n),nl(e,t,r))}};function Up(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!go(n,r)||!go(s,i):!0}function vv(t,e,n){var r=!1,s=Nr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Rt(e)?Xr:gt.current,r=e.contextTypes,i=(r=r!=null)?Gs(t,s):Nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vu.enqueueReplaceState(e,e.state,null)}function Ud(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},cf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Rt(e)?Xr:gt.current,s.context=Gs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Fd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vu.enqueueReplaceState(s,s.state,null),Pl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=C1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Rc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zx=typeof WeakMap=="function"?WeakMap:Map;function Ev(t,e,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fl||(Fl=!0,Yd=r),Vd(t,e)},n}function wv(t,e,n){n=Ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vd(t,e),typeof r!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fS.bind(null,t,e,n),e.then(t,t))}function jp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ln(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var eS=Gn.ReactCurrentOwner,bt=!1;function Et(t,e,n,r){e.child=t===null?Q0(e,null,n,r):Ys(e,t.child,n,r)}function qp(t,e,n,r,s){n=n.render;var i=e.ref;return Fs(e,s),r=pf(t,e,n,r,i,s),n=gf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ce&&n&&nf(e),e.flags|=1,Et(t,e,r,s),e.child)}function Hp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Cf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kv(t,e,i,r,s)):(t=ll(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(o,r)&&t.ref===e.ref)return jn(t,e,s)}return e.flags|=1,t=vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function kv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(go(i,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,jn(t,e,s)}return zd(t,e,n,r,s)}function xv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(As,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(As,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(As,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(As,Mt),Mt|=r;return Et(t,e,s,n),e.child}function Sv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zd(t,e,n,r,s){var i=Rt(n)?Xr:gt.current;return i=Gs(e,i),Fs(e,s),n=pf(t,e,n,r,i,s),r=gf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ce&&r&&nf(e),e.flags|=1,Et(t,e,n,s),e.child)}function Wp(t,e,n,r,s){if(Rt(n)){var i=!0;Tl(e)}else i=!1;if(Fs(e,s),e.stateNode===null)il(t,e),vv(e,n,r),Ud(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xt(c):(c=Rt(n)?Xr:gt.current,c=Gs(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Vp(e,o,r,c),er=!1;var f=e.memoizedState;o.state=f,Pl(e,r,o,s),u=e.memoizedState,a!==r||f!==u||At.current||er?(typeof d=="function"&&(Fd(e,n,d,r),u=e.memoizedState),(a=er||Up(e,n,a,r,f,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,X0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:en(e.type,a),o.props=c,h=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xt(u):(u=Rt(n)?Xr:gt.current,u=Gs(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==u)&&Vp(e,o,r,u),er=!1,f=e.memoizedState,o.state=f,Pl(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||At.current||er?(typeof g=="function"&&(Fd(e,n,g,r),v=e.memoizedState),(c=er||Up(e,n,c,r,f,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return jd(t,e,n,r,i,s)}function jd(t,e,n,r,s,i){Sv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ap(e,n,!1),jn(t,e,i);r=e.stateNode,eS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,a,i)):Et(t,e,a,i),e.memoizedState=r.state,s&&Ap(e,n,!0),e.child}function Nv(t){var e=t.stateNode;e.pendingContext?bp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bp(t,e.context,!1),df(t,e.containerInfo)}function Kp(t,e,n,r,s){return Qs(),sf(s),e.flags|=256,Et(t,e,n,r),e.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function _v(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ie,s&1),t===null)return $d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ku(o,r,0,null),t=Gr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qd(n),e.memoizedState=Bd,t):Ef(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tS(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vr(a,i):(i=Gr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bd,r}return i=t.child,t=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&sf(r),Ys(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Rc(Error(F(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ku({mode:"visible",children:r.children},s,0,null),i=Gr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=qd(o),e.memoizedState=Bd,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=Rc(i,r,void 0),La(t,e,o,r)}if(a=(o&t.childLanes)!==0,bt||a){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),sn(r,t,s,-1))}return _f(),r=Rc(Error(F(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ot=mr(s.nextSibling),Lt=e,Ce=!0,nn=null,t!==null&&(Wt[Kt++]=An,Wt[Kt++]=Rn,Wt[Kt++]=Jr,An=t.id,Rn=t.overflow,Jr=e),e=Ef(e,r.children),e.flags|=4096,e)}function Gp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ld(t.return,e,n)}function Pc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Cv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gp(t,n,e);else if(t.tag===19)Gp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ml(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ml(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pc(e,!0,n,null,i);break;case"together":Pc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function il(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nS(t,e,n){switch(e.tag){case 3:Nv(e),Qs();break;case 5:J0(e);break;case 1:Rt(e.type)&&Tl(e);break;case 4:df(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Al,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?_v(t,e,n):(we(Ie,Ie.current&1),t=jn(t,e,n),t!==null?t.sibling:null);we(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Cv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,xv(t,e,n)}return jn(t,e,n)}var Iv,Hd,Tv,Dv;Iv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hd=function(){};Tv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Br(wn.current);var i=null;switch(n){case"input":s=fd(t,s),r=fd(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=gd(t,s),r=gd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}vd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ke("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Dv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pi(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rS(t,e,n){var r=e.pendingProps;switch(rf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Rt(e.type)&&Il(),ot(e),null;case 3:return r=e.stateNode,Xs(),Ne(At),Ne(gt),ff(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Zd(nn),nn=null))),Hd(t,e),ot(e),null;case 5:hf(e);var s=Br(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)Tv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return ot(e),null}if(t=Br(wn.current),Oa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[Eo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Vi.length;s++)ke(Vi[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":rp(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":ip(r,i),ke("invalid",r)}vd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,a,t),s=["children",""+a]):lo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Ca(r),sp(r,i,!0);break;case"textarea":Ca(r),op(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[Eo]=r,Iv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ed(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vi.length;s++)ke(Vi[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":rp(t,r),s=fd(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),ke("invalid",t);break;case"textarea":ip(t,r),s=gd(t,r),ke("invalid",t);break;default:s=r}vd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?o0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&s0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&uo(t,u):typeof u=="number"&&uo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&jh(t,i,u,o))}switch(n){case"input":Ca(t),sp(t,r,!1);break;case"textarea":Ca(t),op(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ms(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Dv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Br(ko.current),Br(wn.current),Oa(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Ma(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return ot(e),null;case 13:if(Ne(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Ot!==null&&e.mode&1&&!(e.flags&128))K0(),Qs(),e.flags|=98560,i=!1;else if(i=Oa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[pn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else nn!==null&&(Zd(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?He===0&&(He=3):_f())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Xs(),Hd(t,e),t===null&&yo(e.stateNode.containerInfo),ot(e),null;case 10:return lf(e.type._context),ot(e),null;case 17:return Rt(e.type)&&Il(),ot(e),null;case 19:if(Ne(Ie),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ml(t),o!==null){for(e.flags|=128,Pi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Zs&&(e.flags|=128,r=!0,Pi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ml(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return ot(e),null}else 2*Me()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Pi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ie.current,we(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function sS(t,e){switch(rf(e),e.tag){case 1:return Rt(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Ne(At),Ne(gt),ff(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hf(e),null;case 13:if(Ne(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Ie),null;case 4:return Xs(),null;case 10:return lf(e.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var Fa=!1,ut=!1,iS=typeof WeakSet=="function"?WeakSet:Set,H=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function Wd(t,e,n){try{n()}catch(r){Re(t,e,r)}}var Qp=!1;function oS(t,e){if(Dd=Sl,t=M0(),tf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(u=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},Sl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var E=v.memoizedProps,w=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?E:en(e.type,E),w);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(k){Re(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=Qp,Qp=!1,v}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wd(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bv(t){var e=t.alternate;e!==null&&(t.alternate=null,bv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Eo],delete e[Pd],delete e[jx],delete e[Bx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Av(t){return t.tag===5||t.tag===3||t.tag===4}function Yp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}var Xe=null,tn=!1;function Yn(t,e,n){for(n=n.child;n!==null;)Rv(t,e,n),n=n.sibling}function Rv(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(du,n)}catch{}switch(n.tag){case 5:ut||bs(n,e);case 6:var r=Xe,s=tn;Xe=null,Yn(t,e,n),Xe=r,tn=s,Xe!==null&&(tn?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(tn?(t=Xe,n=n.stateNode,t.nodeType===8?Cc(t.parentNode,n):t.nodeType===1&&Cc(t,n),mo(t)):Cc(Xe,n.stateNode));break;case 4:r=Xe,s=tn,Xe=n.stateNode.containerInfo,tn=!0,Yn(t,e,n),Xe=r,tn=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wd(n,e,o),s=s.next}while(s!==r)}Yn(t,e,n);break;case 1:if(!ut&&(bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Re(n,e,a)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Yn(t,e,n),ut=r):Yn(t,e,n);break;default:Yn(t,e,n)}}function Xp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iS),e.forEach(function(r){var s=pS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,tn=!1;break e;case 3:Xe=a.stateNode.containerInfo,tn=!0;break e;case 4:Xe=a.stateNode.containerInfo,tn=!0;break e}a=a.return}if(Xe===null)throw Error(F(160));Rv(i,o,s),Xe=null,tn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Re(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pv(e,t),e=e.sibling}function Pv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),hn(t),r&4){try{eo(3,t,t.return),Eu(3,t)}catch(E){Re(t,t.return,E)}try{eo(5,t,t.return)}catch(E){Re(t,t.return,E)}}break;case 1:Zt(e,t),hn(t),r&512&&n!==null&&bs(n,n.return);break;case 5:if(Zt(e,t),hn(t),r&512&&n!==null&&bs(n,n.return),t.flags&32){var s=t.stateNode;try{uo(s,"")}catch(E){Re(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&t0(s,i),Ed(a,o);var c=Ed(a,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?o0(s,h):d==="dangerouslySetInnerHTML"?s0(s,h):d==="children"?uo(s,h):jh(s,d,h,c)}switch(a){case"input":md(s,i);break;case"textarea":n0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ms(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[Eo]=i}catch(E){Re(t,t.return,E)}}break;case 6:if(Zt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Re(t,t.return,E)}}break;case 3:if(Zt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(E){Re(t,t.return,E)}break;case 4:Zt(e,t),hn(t);break;case 13:Zt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xf=Me())),r&4&&Xp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(c=ut)||d,Zt(e,t),ut=c):Zt(e,t),hn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(h=H=d;H!==null;){switch(f=H,g=f.child,f.tag){case 0:case 11:case 14:case 15:eo(4,f,f.return);break;case 1:bs(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(E){Re(r,n,E)}}break;case 5:bs(f,f.return);break;case 22:if(f.memoizedState!==null){Zp(h);continue}}g!==null?(g.return=f,H=g):Zp(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=i0("display",o))}catch(E){Re(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){Re(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zt(e,t),hn(t),r&4&&Xp(t);break;case 21:break;default:Zt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Av(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uo(s,""),r.flags&=-33);var i=Yp(t);Qd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Yp(t);Gd(t,a,o);break;default:throw Error(F(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aS(t,e,n){H=t,Mv(t)}function Mv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||ut;a=Fa;var c=ut;if(Fa=o,(ut=u)&&!c)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?eg(s):u!==null?(u.return=o,H=u):eg(s);for(;i!==null;)H=i,Mv(i),i=i.sibling;H=s,Fa=a,ut=c}Jp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Jp(t)}}function Jp(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$p(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$p(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&mo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ut||e.flags&512&&Kd(e)}catch(f){Re(e,e.return,f)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Zp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function eg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Re(e,s,u)}}var i=e.return;try{Kd(e)}catch(u){Re(e,i,u)}break;case 5:var o=e.return;try{Kd(e)}catch(u){Re(e,o,u)}}}catch(u){Re(e,e.return,u)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var lS=Math.ceil,Ll=Gn.ReactCurrentDispatcher,wf=Gn.ReactCurrentOwner,Yt=Gn.ReactCurrentBatchConfig,ce=0,Ge=null,Ve=null,et=0,Mt=0,As=br(0),He=0,_o=null,es=0,wu=0,kf=0,to=null,Tt=null,xf=0,Zs=1/0,Tn=null,Fl=!1,Yd=null,gr=null,Ua=!1,ur=null,Ul=0,no=0,Xd=null,ol=-1,al=0;function xt(){return ce&6?Me():ol!==-1?ol:ol=Me()}function yr(t){return t.mode&1?ce&2&&et!==0?et&-et:Hx.transition!==null?(al===0&&(al=v0()),al):(t=me,t!==0||(t=window.event,t=t===void 0?16:_0(t.type)),t):1}function sn(t,e,n,r){if(50<no)throw no=0,Xd=null,Error(F(185));Ko(t,n,r),(!(ce&2)||t!==Ge)&&(t===Ge&&(!(ce&2)&&(wu|=n),He===4&&nr(t,et)),Pt(t,r),n===1&&ce===0&&!(e.mode&1)&&(Zs=Me()+500,gu&&Ar()))}function Pt(t,e){var n=t.callbackNode;H1(t,e);var r=xl(t,t===Ge?et:0);if(r===0)n!==null&&up(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&up(n),e===1)t.tag===0?qx(tg.bind(null,t)):q0(tg.bind(null,t)),Vx(function(){!(ce&6)&&Ar()}),n=null;else{switch(E0(r)){case 1:n=Kh;break;case 4:n=g0;break;case 16:n=kl;break;case 536870912:n=y0;break;default:n=kl}n=jv(n,Ov.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ov(t,e){if(ol=-1,al=0,ce&6)throw Error(F(327));var n=t.callbackNode;if(Us()&&t.callbackNode!==n)return null;var r=xl(t,t===Ge?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vl(t,r);else{e=r;var s=ce;ce|=2;var i=Lv();(Ge!==t||et!==e)&&(Tn=null,Zs=Me()+500,Kr(t,e));do try{dS();break}catch(a){$v(t,a)}while(!0);af(),Ll.current=i,ce=s,Ve!==null?e=0:(Ge=null,et=0,e=He)}if(e!==0){if(e===2&&(s=Nd(t),s!==0&&(r=s,e=Jd(t,s))),e===1)throw n=_o,Kr(t,0),nr(t,r),Pt(t,Me()),n;if(e===6)nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!uS(s)&&(e=Vl(t,r),e===2&&(i=Nd(t),i!==0&&(r=i,e=Jd(t,i))),e===1))throw n=_o,Kr(t,0),nr(t,r),Pt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ur(t,Tt,Tn);break;case 3:if(nr(t,r),(r&130023424)===r&&(e=xf+500-Me(),10<e)){if(xl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rd(Ur.bind(null,t,Tt,Tn),e);break}Ur(t,Tt,Tn);break;case 4:if(nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lS(r/1960))-r,10<r){t.timeoutHandle=Rd(Ur.bind(null,t,Tt,Tn),r);break}Ur(t,Tt,Tn);break;case 5:Ur(t,Tt,Tn);break;default:throw Error(F(329))}}}return Pt(t,Me()),t.callbackNode===n?Ov.bind(null,t):null}function Jd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Kr(t,e).flags|=256),t=Vl(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Zd(e)),t}function Zd(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function uS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nr(t,e){for(e&=~kf,e&=~wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function tg(t){if(ce&6)throw Error(F(327));Us();var e=xl(t,0);if(!(e&1))return Pt(t,Me()),null;var n=Vl(t,e);if(t.tag!==0&&n===2){var r=Nd(t);r!==0&&(e=r,n=Jd(t,r))}if(n===1)throw n=_o,Kr(t,0),nr(t,e),Pt(t,Me()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,Tt,Tn),Pt(t,Me()),null}function Sf(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Zs=Me()+500,gu&&Ar())}}function ts(t){ur!==null&&ur.tag===0&&!(ce&6)&&Us();var e=ce;ce|=1;var n=Yt.transition,r=me;try{if(Yt.transition=null,me=1,t)return t()}finally{me=r,Yt.transition=n,ce=e,!(ce&6)&&Ar()}}function Nf(){Mt=As.current,Ne(As)}function Kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ux(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(rf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:Xs(),Ne(At),Ne(gt),ff();break;case 5:hf(r);break;case 4:Xs();break;case 13:Ne(Ie);break;case 19:Ne(Ie);break;case 10:lf(r.type._context);break;case 22:case 23:Nf()}n=n.return}if(Ge=t,Ve=t=vr(t.current,null),et=Mt=e,He=0,_o=null,kf=wu=es=0,Tt=to=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jr=null}return t}function $v(t,e){do{var n=Ve;try{if(af(),rl.current=$l,Ol){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ol=!1}if(Zr=0,Ke=qe=De=null,Zi=!1,xo=0,wf.current=null,n===null||n.return===null){He=1,_o=e,Ve=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=et,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=jp(o);if(g!==null){g.flags&=-257,Bp(g,o,a,i,e),g.mode&1&&zp(i,c,e),e=g,u=c;var v=e.updateQueue;if(v===null){var E=new Set;E.add(u),e.updateQueue=E}else v.add(u);break e}else{if(!(e&1)){zp(i,c,e),_f();break e}u=Error(F(426))}}else if(Ce&&a.mode&1){var w=jp(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Bp(w,o,a,i,e),sf(Js(u,a));break e}}i=u=Js(u,a),He!==4&&(He=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Ev(i,u,e);Op(i,m);break e;case 1:a=u;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(gr===null||!gr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=wv(i,a,e);Op(i,k);break e}}i=i.return}while(i!==null)}Uv(n)}catch(I){e=I,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function Lv(){var t=Ll.current;return Ll.current=$l,t===null?$l:t}function _f(){(He===0||He===3||He===2)&&(He=4),Ge===null||!(es&268435455)&&!(wu&268435455)||nr(Ge,et)}function Vl(t,e){var n=ce;ce|=2;var r=Lv();(Ge!==t||et!==e)&&(Tn=null,Kr(t,e));do try{cS();break}catch(s){$v(t,s)}while(!0);if(af(),ce=n,Ll.current=r,Ve!==null)throw Error(F(261));return Ge=null,et=0,He}function cS(){for(;Ve!==null;)Fv(Ve)}function dS(){for(;Ve!==null&&!$1();)Fv(Ve)}function Fv(t){var e=zv(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Uv(t):Ve=e,wf.current=null}function Uv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sS(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ve=null;return}}else if(n=rS(n,e,Mt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);He===0&&(He=5)}function Ur(t,e,n){var r=me,s=Yt.transition;try{Yt.transition=null,me=1,hS(t,e,n,r)}finally{Yt.transition=s,me=r}return null}function hS(t,e,n,r){do Us();while(ur!==null);if(ce&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(W1(t,i),t===Ge&&(Ve=Ge=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,jv(kl,function(){return Us(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=me;me=1;var a=ce;ce|=4,wf.current=null,oS(t,n),Pv(n,t),Rx(bd),Sl=!!Dd,bd=Dd=null,t.current=n,aS(n),L1(),ce=a,me=o,Yt.transition=i}else t.current=n;if(Ua&&(Ua=!1,ur=t,Ul=s),i=t.pendingLanes,i===0&&(gr=null),V1(n.stateNode),Pt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,t=Yd,Yd=null,t;return Ul&1&&t.tag!==0&&Us(),i=t.pendingLanes,i&1?t===Xd?no++:(no=0,Xd=t):no=0,Ar(),null}function Us(){if(ur!==null){var t=E0(Ul),e=Yt.transition,n=me;try{if(Yt.transition=null,me=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Ul=0,ce&6)throw Error(F(331));var s=ce;for(ce|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:eo(8,d,i)}var h=d.child;if(h!==null)h.return=d,H=h;else for(;H!==null;){d=H;var f=d.sibling,g=d.return;if(bv(d),d===c){H=null;break}if(f!==null){f.return=g,H=f;break}H=g}}}var v=i.alternate;if(v!==null){var E=v.child;if(E!==null){v.child=null;do{var w=E.sibling;E.sibling=null,E=w}while(E!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,H=m;break e}H=i.return}}var p=t.current;for(H=p;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=p;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Eu(9,a)}}catch(I){Re(a,a.return,I)}if(a===o){H=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,H=k;break e}H=a.return}}if(ce=s,Ar(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(du,t)}catch{}r=!0}return r}finally{me=n,Yt.transition=e}}return!1}function ng(t,e,n){e=Js(n,e),e=Ev(t,e,1),t=pr(t,e,1),e=xt(),t!==null&&(Ko(t,1,e),Pt(t,e))}function Re(t,e,n){if(t.tag===3)ng(t,t,n);else for(;e!==null;){if(e.tag===3){ng(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gr===null||!gr.has(r))){t=Js(n,t),t=wv(e,t,1),e=pr(e,t,1),t=xt(),e!==null&&(Ko(e,1,t),Pt(e,t));break}}e=e.return}}function fS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(et&n)===n&&(He===4||He===3&&(et&130023424)===et&&500>Me()-xf?Kr(t,0):kf|=n),Pt(t,e)}function Vv(t,e){e===0&&(t.mode&1?(e=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):e=1);var n=xt();t=zn(t,e),t!==null&&(Ko(t,e,n),Pt(t,n))}function mS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vv(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Vv(t,n)}var zv;zv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,nS(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Ce&&e.flags&1048576&&H0(e,bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;il(t,e),t=e.pendingProps;var s=Gs(e,gt.current);Fs(e,n),s=pf(null,e,r,t,s,n);var i=gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,Tl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cf(e),s.updater=vu,e.stateNode=s,s._reactInternals=e,Ud(e,r,t,n),e=jd(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&nf(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(il(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yS(r),t=en(r,t),s){case 0:e=zd(null,e,r,t,n);break e;case 1:e=Wp(null,e,r,t,n);break e;case 11:e=qp(null,e,r,t,n);break e;case 14:e=Hp(null,e,r,en(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),zd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Wp(t,e,r,s,n);case 3:e:{if(Nv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,X0(t,e),Pl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(F(423)),e),e=Kp(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(F(424)),e),e=Kp(t,e,r,n,s);break e}else for(Ot=mr(e.stateNode.containerInfo.firstChild),Lt=e,Ce=!0,nn=null,n=Q0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){e=jn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return J0(e),t===null&&$d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ad(r,s)?o=null:i!==null&&Ad(r,i)&&(e.flags|=32),Sv(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&$d(e),null;case 13:return _v(t,e,n);case 4:return df(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),qp(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(Al,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!At.current){e=jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ln(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ld(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ld(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fs(e,n),s=Xt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),Hp(t,e,r,s,n);case 15:return kv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),il(t,e),e.tag=1,Rt(r)?(t=!0,Tl(e)):t=!1,Fs(e,n),vv(e,r,s),Ud(e,r,s,n),jd(null,e,r,!0,t,n);case 19:return Cv(t,e,n);case 22:return xv(t,e,n)}throw Error(F(156,e.tag))};function jv(t,e){return p0(t,e)}function gS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,r){return new gS(t,e,n,r)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yS(t){if(typeof t=="function")return Cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qh)return 11;if(t===Hh)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ll(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Cf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ks:return Gr(n.children,s,i,e);case Bh:o=8,s|=8;break;case ud:return t=Qt(12,n,e,s|2),t.elementType=ud,t.lanes=i,t;case cd:return t=Qt(13,n,e,s),t.elementType=cd,t.lanes=i,t;case dd:return t=Qt(19,n,e,s),t.elementType=dd,t.lanes=i,t;case Jy:return ku(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yy:o=10;break e;case Xy:o=9;break e;case qh:o=11;break e;case Hh:o=14;break e;case Zn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gr(t,e,n,r){return t=Qt(7,t,r,e),t.lanes=n,t}function ku(t,e,n,r){return t=Qt(22,t,r,e),t.elementType=Jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Mc(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function Oc(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pc(0),this.expirationTimes=pc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function If(t,e,n,r,s,i,o,a,u){return t=new vS(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(i),t}function ES(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Bv(t){if(!t)return Nr;t=t._reactInternals;e:{if(us(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Rt(n))return B0(t,n,e)}return e}function qv(t,e,n,r,s,i,o,a,u){return t=If(n,r,!0,t,s,i,o,a,u),t.context=Bv(null),n=t.current,r=xt(),s=yr(n),i=Ln(r,s),i.callback=e??null,pr(n,i,s),t.current.lanes=s,Ko(t,s,r),Pt(t,r),t}function xu(t,e,n,r){var s=e.current,i=xt(),o=yr(s);return n=Bv(n),e.context===null?e.context=n:e.pendingContext=n,e=Ln(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(s,e,o),t!==null&&(sn(t,s,o,i),nl(t,s,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tf(t,e){rg(t,e),(t=t.alternate)&&rg(t,e)}function wS(){return null}var Hv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Df(t){this._internalRoot=t}Su.prototype.render=Df.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));xu(t,e,null,null)};Su.prototype.unmount=Df.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ts(function(){xu(null,t,null,null)}),e[Vn]=null}};function Su(t){this._internalRoot=t}Su.prototype.unstable_scheduleHydration=function(t){if(t){var e=x0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tr.length&&e!==0&&e<tr[n].priority;n++);tr.splice(n,0,t),n===0&&N0(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sg(){}function kS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=zl(o);i.call(c)}}var o=qv(e,r,t,0,null,!1,!1,"",sg);return t._reactRootContainer=o,t[Vn]=o.current,yo(t.nodeType===8?t.parentNode:t),ts(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=zl(u);a.call(c)}}var u=If(t,0,!1,null,null,!1,!1,"",sg);return t._reactRootContainer=u,t[Vn]=u.current,yo(t.nodeType===8?t.parentNode:t),ts(function(){xu(e,u,n,r)}),u}function _u(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=zl(o);a.call(u)}}xu(e,o,t,s)}else o=kS(n,e,t,s,r);return zl(o)}w0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ui(e.pendingLanes);n!==0&&(Gh(e,n|1),Pt(e,Me()),!(ce&6)&&(Zs=Me()+500,Ar()))}break;case 13:ts(function(){var r=zn(t,1);if(r!==null){var s=xt();sn(r,t,1,s)}}),Tf(t,1)}};Qh=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=xt();sn(e,t,134217728,n)}Tf(t,134217728)}};k0=function(t){if(t.tag===13){var e=yr(t),n=zn(t,e);if(n!==null){var r=xt();sn(n,t,e,r)}Tf(t,e)}};x0=function(){return me};S0=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};kd=function(t,e,n){switch(e){case"input":if(md(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pu(r);if(!s)throw Error(F(90));e0(r),md(r,s)}}}break;case"textarea":n0(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};u0=Sf;c0=ts;var xS={usingClientEntryPoint:!1,Events:[Qo,_s,pu,a0,l0,Sf]},Mi={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SS={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=f0(t),t===null?null:t.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||wS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Va.isDisabled&&Va.supportsFiber)try{du=Va.inject(SS),En=Va}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(F(200));return ES(t,e,null,n)};zt.createRoot=function(t,e){if(!bf(t))throw Error(F(299));var n=!1,r="",s=Hv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=If(t,1,!1,null,null,n,!1,r,s),t[Vn]=e.current,yo(t.nodeType===8?t.parentNode:t),new Df(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=f0(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return ts(t)};zt.hydrate=function(t,e,n){if(!Nu(e))throw Error(F(200));return _u(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qv(e,null,t,1,n??null,s,!1,i,o),t[Vn]=e.current,yo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Su(e)};zt.render=function(t,e,n){if(!Nu(e))throw Error(F(200));return _u(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(F(40));return t._reactRootContainer?(ts(function(){_u(null,null,t,!1,function(){t._reactRootContainer=null,t[Vn]=null})}),!0):!1};zt.unstable_batchedUpdates=Sf;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return _u(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function Wv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wv)}catch(t){console.error(t)}}Wv(),Wy.exports=zt;var NS=Wy.exports,Kv,ig=NS;Kv=ig.createRoot,ig.hydrateRoot;var og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_S=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_S(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new CS;const f=i<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IS=function(t){const e=Gv(t);return Qv.encodeByteArray(e,!0)},jl=function(t){return IS(t).replace(/\./g,"")},Yv=function(t){try{return Qv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=()=>TS().__FIREBASE_DEFAULTS__,bS=()=>{if(typeof process>"u"||typeof og>"u")return;const t=og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yv(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return DS()||bS()||AS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xv=t=>{var e,n;return(n=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RS=t=>{const e=Xv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jv=()=>{var t;return(t=Af())===null||t===void 0?void 0:t.config},Zv=t=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jl(JSON.stringify(n)),jl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function $S(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FS(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function US(){try{return typeof indexedDB=="object"}catch{return!1}}function VS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="FirebaseError";class Qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zS,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jS(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Qn(s,a,r)}}function jS(t,e){return t.replace(BS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BS=/\{\$([^}]+)}/g;function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ag(i)&&ag(o)){if(!Bl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ji(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HS(t,e){const n=new WS(t,e);return n.subscribe.bind(n)}class WS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=$c),s.error===void 0&&(s.error=$c),s.complete===void 0&&(s.complete=$c);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YS(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QS(t){return t===Vr?void 0:t}function YS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const JS={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ZS=de.INFO,eN={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},tN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=eN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=ZS,this._logHandler=tN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const nN=(t,e)=>e.some(n=>t instanceof n);let lg,ug;function rN(){return lg||(lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sN(){return ug||(ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,eh=new WeakMap,tE=new WeakMap,Lc=new WeakMap,Pf=new WeakMap;function iN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Er(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,t)}).catch(()=>{}),Pf.set(e,t),e}function oN(t){if(eh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});eh.set(t,e)}let th={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aN(t){th=t(th)}function lN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fc(this),e,...n);return tE.set(r,e.sort?e.sort():[e]),Er(r)}:sN().includes(t)?function(...e){return t.apply(Fc(this),e),Er(eE.get(this))}:function(...e){return Er(t.apply(Fc(this),e))}}function uN(t){return typeof t=="function"?lN(t):(t instanceof IDBTransaction&&oN(t),nN(t,rN())?new Proxy(t,th):t)}function Er(t){if(t instanceof IDBRequest)return iN(t);if(Lc.has(t))return Lc.get(t);const e=uN(t);return e!==t&&(Lc.set(t,e),Pf.set(e,t)),e}const Fc=t=>Pf.get(t);function cN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Er(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Er(o.result),u.oldVersion,u.newVersion,Er(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dN=["get","getKey","getAll","getAllKeys","count"],hN=["put","add","delete","clear"],Uc=new Map;function cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uc.get(e))return Uc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dN.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return Uc.set(e,i),i}aN(t=>({...t,get:(e,n,r)=>cg(e,n)||t.get(e,n,r),has:(e,n)=>!!cg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nh="@firebase/app",dg="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Rf("@firebase/app"),pN="@firebase/app-compat",gN="@firebase/analytics-compat",yN="@firebase/analytics",vN="@firebase/app-check-compat",EN="@firebase/app-check",wN="@firebase/auth",kN="@firebase/auth-compat",xN="@firebase/database",SN="@firebase/database-compat",NN="@firebase/functions",_N="@firebase/functions-compat",CN="@firebase/installations",IN="@firebase/installations-compat",TN="@firebase/messaging",DN="@firebase/messaging-compat",bN="@firebase/performance",AN="@firebase/performance-compat",RN="@firebase/remote-config",PN="@firebase/remote-config-compat",MN="@firebase/storage",ON="@firebase/storage-compat",$N="@firebase/firestore",LN="@firebase/firestore-compat",FN="firebase",UN="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="[DEFAULT]",VN={[nh]:"fire-core",[pN]:"fire-core-compat",[yN]:"fire-analytics",[gN]:"fire-analytics-compat",[EN]:"fire-app-check",[vN]:"fire-app-check-compat",[wN]:"fire-auth",[kN]:"fire-auth-compat",[xN]:"fire-rtdb",[SN]:"fire-rtdb-compat",[NN]:"fire-fn",[_N]:"fire-fn-compat",[CN]:"fire-iid",[IN]:"fire-iid-compat",[TN]:"fire-fcm",[DN]:"fire-fcm-compat",[bN]:"fire-perf",[AN]:"fire-perf-compat",[RN]:"fire-rc",[PN]:"fire-rc-compat",[MN]:"fire-gcs",[ON]:"fire-gcs-compat",[$N]:"fire-fst",[LN]:"fire-fst-compat","fire-js":"fire-js",[FN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,sh=new Map;function zN(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(sh.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;sh.set(e,t);for(const n of ql.values())zN(n,t);return!0}function Mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},wr=new Xo("app","Firebase",jN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=UN;function nE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(n||(n=Jv()),!n)throw wr.create("no-options");const i=ql.get(s);if(i){if(Bl(n,i.options)&&Bl(r,i.config))return i;throw wr.create("duplicate-app",{appName:s})}const o=new XS(s);for(const u of sh.values())o.addComponent(u);const a=new BN(n,r,o);return ql.set(s,a),a}function rE(t=rh){const e=ql.get(t);if(!e&&t===rh&&Jv())return nE();if(!e)throw wr.create("no-app",{appName:t});return e}function kr(t,e,n){var r;let s=(r=VN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(a.join(" "));return}ei(new ns(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebase-heartbeat-database",HN=1,Co="firebase-heartbeat-store";let Vc=null;function sE(){return Vc||(Vc=cN(qN,HN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Co)}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Vc}async function WN(t){try{return await(await sE()).transaction(Co).objectStore(Co).get(iE(t))}catch(e){if(e instanceof Qn)rs.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(n.message)}}}async function hg(t,e){try{const r=(await sE()).transaction(Co,"readwrite");await r.objectStore(Co).put(e,iE(t)),await r.done}catch(n){if(n instanceof Qn)rs.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rs.warn(r.message)}}}function iE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,GN=30*24*60*60*1e3;class QN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=GN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fg(),{heartbeatsToSend:n,unsentEntries:r}=YN(this._heartbeatsCache.heartbeats),s=jl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function fg(){return new Date().toISOString().substring(0,10)}function YN(t,e=KN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return US()?VS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await WN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mg(t){return jl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){ei(new ns("platform-logger",e=>new fN(e),"PRIVATE")),ei(new ns("heartbeat",e=>new QN(e),"PRIVATE")),kr(nh,dg,t),kr(nh,dg,"esm2017"),kr("fire-js","")}JN("");var ZN="firebase",e_="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(ZN,e_,"app");function Of(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function oE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t_=oE,aE=new Xo("auth","Firebase",oE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Rf("@firebase/auth");function n_(t,...e){Hl.logLevel<=de.WARN&&Hl.warn(`Auth (${pi}): ${t}`,...e)}function ul(t,...e){Hl.logLevel<=de.ERROR&&Hl.error(`Auth (${pi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw $f(t,...e)}function kn(t,...e){return $f(t,...e)}function r_(t,e,n){const r=Object.assign(Object.assign({},t_()),{[e]:n});return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function $f(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aE.create(t,...e)}function X(t,e,...n){if(!t)throw $f(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ul(e),new Error(e)}function Bn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function s_(){return pg()==="http:"||pg()==="https:"}function pg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s_()||$S()||"connection"in navigator)?navigator.onLine:!0}function o_(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bn(n>e,"Short delay should be less than long delay!"),this.isMobile=OS()||LS()}get(){return i_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){Bn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Zo(3e4,6e4);function ea(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gi(t,e,n,r,s={}){return uE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Jo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),lE.fetch()(cE(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function uE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},a_),e);try{const s=new u_(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw za(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw r_(t,d,c);an(t,d)}}catch(s){if(s instanceof Qn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function Cu(t,e,n,r,s={}){const i=await gi(t,e,n,r,s);return"mfaPendingCredential"in i&&an(t,"multi-factor-auth-required",{_serverResponse:i}),i}function cE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Lf(t.config,s):`${t.config.apiScheme}://${s}`}class u_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),l_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function d_(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h_(t,e=!1){const n=Oe(t),r=await n.getIdToken(e),s=Ff(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ro(zc(s.auth_time)),issuedAtTime:ro(zc(s.iat)),expirationTime:ro(zc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zc(t){return Number(t)*1e3}function Ff(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ul("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yv(n);return s?JSON.parse(s):(ul("Failed to decode base64 JWT payload"),null)}catch(s){return ul("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function f_(t){const e=Ff(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qn&&m_(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m_({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Io(t,d_(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?v_(i.providerUserInfo):[],a=y_(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new dE(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function g_(t){const e=Oe(t);await Wl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y_(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function v_(t){return t.map(e=>{var{providerId:n}=e,r=Of(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(t,e){const n=await uE(t,{},async()=>{const r=Jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=cE(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return X(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await E_(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new To;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return h_(this,e)}reload(){return g_(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Io(this,c_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,p=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:k,isAnonymous:I,providerData:L,stsTokenManager:z}=n;X(y&&z,e,"internal-error");const M=To.fromJSON(this.name,z);X(typeof y=="string",e,"internal-error"),Xn(h,e.name),Xn(f,e.name),X(typeof k=="boolean",e,"internal-error"),X(typeof I=="boolean",e,"internal-error"),Xn(g,e.name),Xn(v,e.name),Xn(E,e.name),Xn(w,e.name),Xn(m,e.name),Xn(p,e.name);const Q=new Qr({uid:y,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:I,photoURL:v,phoneNumber:g,tenantId:E,stsTokenManager:M,createdAt:m,lastLoginAt:p});return L&&Array.isArray(L)&&(Q.providerData=L.map(A=>Object.assign({},A))),w&&(Q._redirectEventId=w),Q}static async _fromIdTokenResponse(e,n,r=!1){const s=new To;s.updateFromServerResponse(n);const i=new Qr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wl(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new Map;function Mn(t){Bn(t instanceof Function,"Expected a class definition");let e=gg.get(t);return e?(Bn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hE.type="NONE";const yg=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t,e,n){return`firebase:${t}:${e}:${n}`}class Vs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cl(this.userKey,s.apiKey,i),this.fullPersistenceKey=cl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vs(Mn(yg),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Mn(yg);const o=cl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Qr._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Vs(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Vs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(vE(e))return"Webos";if(Uf(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(gE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fE(t=yt()){return/firefox\//i.test(t)}function Uf(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(t=yt()){return/crios\//i.test(t)}function pE(t=yt()){return/iemobile/i.test(t)}function gE(t=yt()){return/android/i.test(t)}function yE(t=yt()){return/blackberry/i.test(t)}function vE(t=yt()){return/webos/i.test(t)}function Iu(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function w_(t=yt()){var e;return Iu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function k_(){return FS()&&document.documentMode===10}function EE(t=yt()){return Iu(t)||gE(t)||vE(t)||yE(t)||/windows phone/i.test(t)||pE(t)}function x_(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e=[]){let n;switch(t){case"Browser":n=vg(yt());break;case"Worker":n=`${vg(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pi}/${r}`}async function kE(t,e){return gi(t,"GET","/v2/recaptchaConfig",ea(t,e))}function Eg(t){return t!==void 0&&t.enterprise!==void 0}class xE{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function SE(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",S_().appendChild(r)})}function N_(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const __="https://www.google.com/recaptcha/enterprise.js?render=",C_="recaptcha-enterprise",I_="NO_RECAPTCHA";class NE{constructor(e){this.type=C_,this.auth=ta(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{kE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new xE(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;Eg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(I_)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Eg(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}SE(__+a).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function wg(t,e,n,r=!1){const s=new NE(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kg(this),this.idTokenSubscription=new kg(this),this.beforeStateQueue=new T_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Vs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Oe(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}async initializeRecaptchaConfig(){const e=await kE(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new xE(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new NE(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Vs.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return X(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&n_(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ta(t){return Oe(t)}class kg{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){const n=Mf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Bl(i,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function A_(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function R_(t,e,n){const r=ta(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=_E(e),{host:o,port:a}=P_(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),M_()}function _E(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P_(t){const e=_E(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:xg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:xg(o)}}}function xg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function M_(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}async function O_(t,e){return gi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e){return Cu(t,"POST","/v1/accounts:signInWithPassword",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $_(t,e){return Cu(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}async function L_(t,e){return Cu(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Vf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Do(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Do(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await wg(e,r,"signInWithPassword");return jc(e,s)}else return jc(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const i=await wg(e,r,"signInWithPassword");return jc(e,i)}else return Promise.reject(s)});case"emailLink":return $_(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return O_(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return L_(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e){return Cu(t,"POST","/v1/accounts:signInWithIdp",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="http://localhost";class ss extends Vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Of(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ss(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zs(e,n)}buildRequest(){const e={requestUri:F_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V_(t){const e=zi(ji(t)).link,n=e?zi(ji(e)).deep_link_id:null,r=zi(ji(t)).deep_link_id;return(r?zi(ji(r)).link:null)||r||n||e||t}class zf{constructor(e){var n,r,s,i,o,a;const u=zi(ji(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=U_((s=u.mode)!==null&&s!==void 0?s:null);X(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=V_(e);try{return new zf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.providerId=yi.PROVIDER_ID}static credential(e,n){return Do._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zf.parseLink(n);return X(r,"argument-error"),Do._fromEmailAndCode(e,r.code,r.tenantId)}}yi.PROVIDER_ID="password";yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends CE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends na{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends na{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends na{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qr._fromIdTokenResponse(e,r,s),o=Sg(r);return new ti({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Sg(r);return new ti({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Sg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kl(e,n,r,s)}}function IE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kl._fromErrorAndOperation(t,i,e,r):i})}async function z_(t,e,n=!1){const r=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j_(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Io(t,IE(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=Ff(i.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),ti._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&an(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(t,e,n=!1){const r="signIn",s=await IE(t,r,e),i=await ti._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function B_(t,e){return TE(ta(t),e)}function q_(t,e,n){return B_(Oe(t),yi.credential(e,n))}function H_(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function W_(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function K_(t,e,n,r){return Oe(t).onAuthStateChanged(e,n,r)}function dl(t){return Oe(t).signOut()}const Gl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){const t=yt();return Uf(t)||Iu(t)}const Q_=1e3,Y_=10;class bE extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=G_()&&x_(),this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);k_()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Y_):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Q_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bE.type="LOCAL";const X_=bE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AE.type="SESSION";const RE=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Tu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await J_(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=jf("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function eC(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rC(){return PE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firebaseLocalStorageDb",sC=1,Ql="firebaseLocalStorage",OE="fbase_key";class ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Du(t,e){return t.transaction([Ql],e?"readwrite":"readonly").objectStore(Ql)}function iC(){const t=indexedDB.deleteDatabase(ME);return new ra(t).toPromise()}function oh(){const t=indexedDB.open(ME,sC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ql,{keyPath:OE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ql)?e(r):(r.close(),await iC(),e(await oh()))})})}async function Ng(t,e,n){const r=Du(t,!0).put({[OE]:e,value:n});return new ra(r).toPromise()}async function oC(t,e){const n=Du(t,!1).get(e),r=await new ra(n).toPromise();return r===void 0?null:r.value}function _g(t,e){const n=Du(t,!0).delete(e);return new ra(n).toPromise()}const aC=800,lC=3;class $E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tu._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new Z_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oh();return await Ng(e,Gl,"1"),await _g(e,Gl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ng(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_g(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Du(s,!1).getAll();return new ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$E.type="LOCAL";const uC=$E;new Zo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e){return e?Mn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dC(t){return TE(t.auth,new Bf(t),t.bypassAuthState)}function hC(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),j_(n,new Bf(t),t.bypassAuthState)}async function fC(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),z_(n,new Bf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return hC;default:an(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Zo(2e3,1e4);class Rs extends LE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Bn(this.filter.length===1,"Popup operations only handle one event");const e=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}Rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",hl=new Map;class gC extends LE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hl.get(this.auth._key());if(!e){try{const r=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hl.set(this.auth._key(),e)}return this.bypassAuthState||hl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(t,e){const n=wC(e),r=EC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vC(t,e){hl.set(t._key(),e)}function EC(t){return Mn(t._redirectPersistence)}function wC(t){return cl(pC,t.config.apiKey,t.name)}async function kC(t,e,n=!1){const r=ta(t),s=cC(r,e),o=await new gC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cg(e))}saveEventToCache(e){this.cachedEventUids.add(Cg(e)),this.lastProcessedEventTime=Date.now()}}function Cg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function TC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _C(t);for(const n of e)try{if(DC(n))return}catch{}an(t,"unauthorized-domain")}function DC(t){const e=ih(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IC.test(n))return!1;if(CC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Zo(3e4,6e4);function Ig(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AC(t){return new Promise((e,n)=>{var r,s,i;function o(){Ig(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ig(),n(kn(t,"network-request-failed"))},timeout:bC.get()})}if(!((s=(r=xn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=xn().gapi)===null||i===void 0)&&i.load)o();else{const a=N_("iframefcb");return xn()[a]=()=>{gapi.load?o():n(kn(t,"network-request-failed"))},SE(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw fl=null,e})}let fl=null;function RC(t){return fl=fl||AC(t),fl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Zo(5e3,15e3),MC="__/auth/iframe",OC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lf(e,OC):`https://${t.config.authDomain}/${MC}`,r={apiKey:e.apiKey,appName:t.name,v:pi},s=LC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jo(r).slice(1)}`}async function UC(t){const e=await RC(t),n=xn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:FC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),a=xn().setTimeout(()=>{i(o)},PC.get());function u(){xn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,jC=600,BC="_blank",qC="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HC(t,e,n,r=zC,s=jC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},VC),{width:r.toString(),height:s.toString(),top:i,left:o}),c=yt().toLowerCase();n&&(a=mE(c)?BC:n),fE(c)&&(e=e||qC,u.scrollbars="yes");const d=Object.entries(u).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(w_(c)&&a!=="_self")return WC(e||"",a),new Tg(null);const h=window.open(e||"",a,d);X(h,t,"popup-blocked");try{h.focus()}catch{}return new Tg(h)}function WC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__/auth/handler",GC="emulator/auth/handler",QC=encodeURIComponent("fac");async function Dg(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pi,eventId:s};if(e instanceof CE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof na){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${QC}=${encodeURIComponent(u)}`:"";return`${YC(t)}?${Jo(a).slice(1)}${c}`}function YC({config:t}){return t.emulator?Lf(t,GC):`https://${t.authDomain}/${KC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="webStorageSupport";class XC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=kC,this._overrideRedirectResult=vC}async _openPopup(e,n,r,s){var i;Bn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Dg(e,n,r,ih(),s);return HC(e,o,jf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Dg(e,n,r,ih(),s);return eC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Bn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UC(e),r=new SC(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bc,{type:Bc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bc];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||Uf()||Iu()}}const JC=XC;var bg="@firebase/auth",Ag="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function tI(t){ei(new ns("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wE(t)},c=new D_(r,s,i,u);return A_(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new ns("auth-internal",e=>{const n=ta(e.getProvider("auth").getImmediate());return(r=>new ZC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(bg,Ag,eI(t)),kr(bg,Ag,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=5*60,rI=Zv("authIdTokenMaxAge")||nI;let Rg=null;const sI=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rI)return;const s=n==null?void 0:n.token;Rg!==s&&(Rg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iI(t=rE()){const e=Mf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=b_(t,{popupRedirectResolver:JC,persistence:[uC,X_,RE]}),r=Zv("authTokenSyncURL");if(r){const i=sI(r);W_(n,i,()=>i(n.currentUser)),H_(n,o=>i(o))}const s=Xv("auth");return s&&R_(n,`http://${s}`),n}tI("Browser");var oI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,qf=qf||{},Z=oI||self;function bu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Au(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function aI(t,e,n){return t.call.apply(t.bind,arguments)}function lI(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function ht(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ht=aI:ht=lI,ht.apply(null,arguments)}function ja(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ye(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Rr(){this.s=this.s,this.o=this.o}var uI=0;Rr.prototype.s=!1;Rr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),uI!=0)};Rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const UE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Hf(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Pg(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(bu(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ft(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var cI=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",()=>{},e),Z.removeEventListener("test",()=>{},e)}catch{}return t}();function bo(t){return/^[\s\xa0]*$/.test(t)}function Ru(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function gn(t){return Ru().indexOf(t)!=-1}function Wf(t){return Wf[" "](t),t}Wf[" "]=function(){};function dI(t,e){var n=sT;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hI=gn("Opera"),ni=gn("Trident")||gn("MSIE"),VE=gn("Edge"),ah=VE||ni,zE=gn("Gecko")&&!(Ru().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge"))&&!(gn("Trident")||gn("MSIE"))&&!gn("Edge"),fI=Ru().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge");function jE(){var t=Z.document;return t?t.documentMode:void 0}var lh;e:{var qc="",Hc=function(){var t=Ru();if(zE)return/rv:([^\);]+)(\)|;)/.exec(t);if(VE)return/Edge\/([\d\.]+)/.exec(t);if(ni)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fI)return/WebKit\/(\S+)/.exec(t);if(hI)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Hc&&(qc=Hc?Hc[1]:""),ni){var Wc=jE();if(Wc!=null&&Wc>parseFloat(qc)){lh=String(Wc);break e}}lh=qc}var uh;if(Z.document&&ni){var Mg=jE();uh=Mg||parseInt(lh,10)||void 0}else uh=void 0;var mI=uh;function Ao(t,e){if(ft.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zE){e:{try{Wf(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pI[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ao.$.h.call(this)}}Ye(Ao,ft);var pI={2:"touch",3:"pen",4:"mouse"};Ao.prototype.h=function(){Ao.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Pu="closure_listenable_"+(1e6*Math.random()|0),gI=0;function yI(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++gI,this.fa=this.ia=!1}function Mu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Kf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function vI(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function BE(t){const e={};for(const n in t)e[n]=t[n];return e}const Og="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qE(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Og.length;i++)n=Og[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ou(t){this.src=t,this.g={},this.h=0}Ou.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=dh(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new yI(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ch(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=UE(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Mu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dh(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Gf="closure_lm_"+(1e6*Math.random()|0),Kc={};function HE(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)HE(t,e[i],n,r,s);return null}return n=GE(n),t&&t[Pu]?t.O(e,n,Au(r)?!!r.capture:!1,s):EI(t,e,n,!1,r,s)}function EI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Au(s)?!!s.capture:!!s,a=Yf(t);if(a||(t[Gf]=a=new Ou(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=wI(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cI||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(KE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wI(){function t(n){return e.call(t.src,t.listener,n)}const e=kI;return t}function WE(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)WE(t,e[i],n,r,s);else r=Au(r)?!!r.capture:!!r,n=GE(n),t&&t[Pu]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=dh(i,n,r,s),-1<n&&(Mu(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Yf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dh(e,n,r,s)),(n=-1<t?e[t]:null)&&Qf(n))}function Qf(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Pu])ch(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(KE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Yf(e))?(ch(n,t),n.h==0&&(n.src=null,e[Gf]=null)):Mu(t)}}}function KE(t){return t in Kc?Kc[t]:Kc[t]="on"+t}function kI(t,e){if(t.fa)t=!0;else{e=new Ao(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Qf(t),t=n.call(r,e)}return t}function Yf(t){return t=t[Gf],t instanceof Ou?t:null}var Gc="__closure_events_fn_"+(1e9*Math.random()>>>0);function GE(t){return typeof t=="function"?t:(t[Gc]||(t[Gc]=function(e){return t.handleEvent(e)}),t[Gc])}function Qe(){Rr.call(this),this.i=new Ou(this),this.S=this,this.J=null}Ye(Qe,Rr);Qe.prototype[Pu]=!0;Qe.prototype.removeEventListener=function(t,e,n,r){WE(this,t,e,n,r)};function tt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ft(e,t);else if(e instanceof ft)e.target=e.target||t;else{var s=e;e=new ft(r,t),qE(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Ba(o,r,!0,e)&&s}if(o=e.g=t,s=Ba(o,r,!0,e)&&s,s=Ba(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Ba(o,r,!1,e)&&s}Qe.prototype.N=function(){if(Qe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mu(n[r]);delete t.g[e],t.h--}}this.J=null};Qe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Qe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ba(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&ch(t.i,o),s=a.call(u,r)!==!1&&s}}return s&&!r.defaultPrevented}var Xf=Z.JSON.stringify;class xI{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function SI(){var t=Jf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class NI{constructor(){this.h=this.g=null}add(e,n){const r=QE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var QE=new xI(()=>new _I,t=>t.reset());class _I{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function CI(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function II(t){Z.setTimeout(()=>{throw t},0)}let Ro,Po=!1,Jf=new NI,YE=()=>{const t=Z.Promise.resolve(void 0);Ro=()=>{t.then(TI)}};var TI=()=>{for(var t;t=SI();){try{t.h.call(t.g)}catch(n){II(n)}var e=QE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Po=!1};function $u(t,e){Qe.call(this),this.h=t||1,this.g=e||Z,this.j=ht(this.qb,this),this.l=Date.now()}Ye($u,Qe);B=$u.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),tt(this,"tick"),this.ga&&(Zf(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Zf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){$u.$.N.call(this),Zf(this),delete this.g};function em(t,e,n){if(typeof t=="function")n&&(t=ht(t,n));else if(t&&typeof t.handleEvent=="function")t=ht(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function XE(t){t.g=em(()=>{t.g=null,t.i&&(t.i=!1,XE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class DI extends Rr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XE(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(t){Rr.call(this),this.h=t,this.g={}}Ye(Mo,Rr);var $g=[];function JE(t,e,n,r){Array.isArray(n)||(n&&($g[0]=n.toString()),n=$g);for(var s=0;s<n.length;s++){var i=HE(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function ZE(t){Kf(t.g,function(e,n){this.g.hasOwnProperty(n)&&Qf(e)},t),t.g={}}Mo.prototype.N=function(){Mo.$.N.call(this),ZE(this)};Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lu(){this.g=!0}Lu.prototype.Ea=function(){this.g=!1};function bI(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function AI(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ps(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+PI(t,n)+(r?" "+r:"")})}function RI(t,e){t.info(function(){return"TIMEOUT: "+e})}Lu.prototype.info=function(){};function PI(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Xf(n)}catch{return e}}var cs={},Lg=null;function Fu(){return Lg=Lg||new Qe}cs.Ta="serverreachability";function ew(t){ft.call(this,cs.Ta,t)}Ye(ew,ft);function Oo(t){const e=Fu();tt(e,new ew(e))}cs.STAT_EVENT="statevent";function tw(t,e){ft.call(this,cs.STAT_EVENT,t),this.stat=e}Ye(tw,ft);function wt(t){const e=Fu();tt(e,new tw(e,t))}cs.Ua="timingevent";function nw(t,e){ft.call(this,cs.Ua,t),this.size=e}Ye(nw,ft);function sa(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var Uu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tm(){}tm.prototype.h=null;function Fg(t){return t.h||(t.h=t.i())}function sw(){}var ia={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nm(){ft.call(this,"d")}Ye(nm,ft);function rm(){ft.call(this,"c")}Ye(rm,ft);var hh;function Vu(){}Ye(Vu,tm);Vu.prototype.g=function(){return new XMLHttpRequest};Vu.prototype.i=function(){return{}};hh=new Vu;function oa(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Mo(this),this.P=MI,t=ah?125:void 0,this.V=new $u(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new iw}function iw(){this.i=null,this.g="",this.h=!1}var MI=45e3,fh={},Yl={};B=oa.prototype;B.setTimeout=function(t){this.P=t};function mh(t,e,n){t.L=1,t.v=ju(qn(e)),t.s=n,t.S=!0,ow(t,null)}function ow(t,e){t.G=Date.now(),aa(t),t.A=qn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),mw(n.i,"t",r),t.C=0,n=t.l.J,t.h=new iw,t.g=Ow(t.l,n?e:null,!t.s),0<t.O&&(t.M=new DI(ht(t.Pa,t,t.g),t.O)),JE(t.U,t.g,"readystatechange",t.nb),e=t.I?BE(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Oo(),bI(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&yn(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const d=yn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||ah||this.g&&(this.h.h||this.g.ja()||jg(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Oo(3):Oo(2)),zu(this);var n=this.g.da();this.ca=n;t:if(aw(this)){var r=jg(this.g);t="";var s=r.length,i=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),so(this);var o="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,AI(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(a)){var c=a;break t}}c=null}if(n=c)Ps(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ph(this,n);else{this.i=!1,this.o=3,wt(12),qr(this),so(this);break e}}this.S?(lw(this,d,o),ah&&this.i&&d==3&&(JE(this.U,this.V,"tick",this.mb),this.V.start())):(Ps(this.j,this.m,o,null),ph(this,o)),d==4&&qr(this),this.i&&!this.J&&(d==4?Aw(this.l,this):(this.i=!1,aa(this)))}else tT(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,wt(12)):(this.o=0,wt(13)),qr(this),so(this)}}}catch{}finally{}};function aw(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function lw(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=OI(t,n),s==Yl){e==4&&(t.o=4,wt(14),r=!1),Ps(t.j,t.m,null,"[Incomplete Response]");break}else if(s==fh){t.o=4,wt(15),Ps(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ps(t.j,t.m,s,null),ph(t,s);aw(t)&&s!=Yl&&s!=fh&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,wt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),um(e),e.M=!0,wt(11))):(Ps(t.j,t.m,n,"[Invalid Chunked Response]"),qr(t),so(t))}B.mb=function(){if(this.g){var t=yn(this.g),e=this.g.ja();this.C<e.length&&(zu(this),lw(this,t,e),this.i&&t!=4&&aa(this))}};function OI(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Yl:(n=Number(e.substring(n,r)),isNaN(n)?fh:(r+=1,r+n>e.length?Yl:(e=e.slice(r,r+n),t.C=r+n,e)))}B.cancel=function(){this.J=!0,qr(this)};function aa(t){t.Y=Date.now()+t.P,uw(t,t.P)}function uw(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=sa(ht(t.lb,t),e)}function zu(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(RI(this.j,this.A),this.L!=2&&(Oo(),wt(17)),qr(this),this.o=2,so(this)):uw(this,this.Y-t)};function so(t){t.l.H==0||t.J||Aw(t.l,t)}function qr(t){zu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Zf(t.V),ZE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ph(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gh(n.i,t))){if(!t.K&&gh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Zl(n),Hu(n);else break e;lm(n),wt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=sa(ht(n.ib,n),6e3));if(1>=yw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hr(n,11)}else if((t.K||n.g==t)&&Zl(n),!bo(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const v=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=r.i;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(sm(i,i.h),i.h=null))}if(r.F){const E=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,xe(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Mw(r,r.J?r.pa:null,r.Y),o.K){vw(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(zu(a),aa(a)),r.g=o}else Dw(r);0<n.j.length&&Wu(n)}else c[0]!="stop"&&c[0]!="close"||Hr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Hr(n,7):am(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Oo(4)}catch{}}function $I(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(bu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function LI(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(bu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function cw(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(bu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=LI(t),r=$I(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var dw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FI(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Yr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yr){this.h=t.h,Xl(this,t.j),this.s=t.s,this.g=t.g,Jl(this,t.m),this.l=t.l;var e=t.i,n=new $o;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ug(this,n),this.o=t.o}else t&&(e=String(t).match(dw))?(this.h=!1,Xl(this,e[1]||"",!0),this.s=Bi(e[2]||""),this.g=Bi(e[3]||"",!0),Jl(this,e[4]),this.l=Bi(e[5]||"",!0),Ug(this,e[6]||"",!0),this.o=Bi(e[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Yr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qi(e,Vg,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(qi(e,Vg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(qi(n,n.charAt(0)=="/"?zI:VI,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qi(n,BI)),t.join("")};function qn(t){return new Yr(t)}function Xl(t,e,n){t.j=n?Bi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Jl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ug(t,e,n){e instanceof $o?(t.i=e,qI(t.i,t.h)):(n||(e=qi(e,jI)),t.i=new $o(e,t.h))}function xe(t,e,n){t.i.set(e,n)}function ju(t){return xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Bi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,UI),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function UI(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Vg=/[#\/\?@]/g,VI=/[#\?:]/g,zI=/[#\?]/g,jI=/[#\?@]/g,BI=/#/g;function $o(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pr(t){t.g||(t.g=new Map,t.h=0,t.i&&FI(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=$o.prototype;B.add=function(t,e){Pr(this),this.i=null,t=vi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function hw(t,e){Pr(t),e=vi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fw(t,e){return Pr(t),e=vi(t,e),t.g.has(e)}B.forEach=function(t,e){Pr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};B.ta=function(){Pr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};B.Z=function(t){Pr(this);let e=[];if(typeof t=="string")fw(this,t)&&(e=e.concat(this.g.get(vi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return Pr(this),this.i=null,t=vi(this,t),fw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function mw(t,e,n){hw(t,e),0<n.length&&(t.i=null,t.g.set(vi(t,e),Hf(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function vi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qI(t,e){e&&!t.j&&(Pr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(hw(this,r),mw(this,s,n))},t)),t.j=e}var HI=class{constructor(t,e){this.g=t,this.map=e}};function pw(t){this.l=t||WI,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WI=10;function gw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function yw(t){return t.h?1:t.g?t.g.size:0}function gh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function sm(t,e){t.g?t.g.add(e):t.h=e}function vw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}pw.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ew(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Hf(t.i)}var KI=class{stringify(t){return Z.JSON.stringify(t,void 0)}parse(t){return Z.JSON.parse(t,void 0)}};function GI(){this.g=new KI}function QI(t,e,n){const r=n||"";try{cw(t,function(s,i){let o=s;Au(s)&&(o=Xf(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function YI(t,e){const n=new Lu;if(Z.Image){const r=new Image;r.onload=ja(qa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ja(qa,n,r,"TestLoadImage: error",!1,e),r.onabort=ja(qa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ja(qa,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qa(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function la(t){this.l=t.fc||null,this.j=t.ob||!1}Ye(la,tm);la.prototype.g=function(){return new Bu(this.l,this.j)};la.prototype.i=function(t){return function(){return t}}({});function Bu(t,e){Qe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=im,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ye(Bu,Qe);var im=0;B=Bu.prototype;B.open=function(t,e){if(this.readyState!=im)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lo(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=im};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ww(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ww(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ua(this):Lo(this),this.readyState==3&&ww(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,ua(this))};B.Ya=function(t){this.g&&(this.response=t,ua(this))};B.ka=function(){this.g&&ua(this)};function ua(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lo(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Lo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XI=Z.JSON.parse;function Pe(t){Qe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kw,this.L=this.M=!1}Ye(Pe,Qe);var kw="",JI=/^https?$/i,ZI=["POST","PUT"];B=Pe.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hh.g(),this.C=this.u?Fg(this.u):Fg(hh),this.g.onreadystatechange=ht(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){zg(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Z.FormData&&t instanceof Z.FormData,!(0<=UE(ZI,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Nw(this),0<this.B&&((this.L=eT(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ht(this.ua,this)):this.A=em(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){zg(this,i)}};function eT(t){return ni&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof qf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tt(this,"timeout"),this.abort(8))};function zg(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xw(t),qu(t)}function xw(t){t.F||(t.F=!0,tt(t,"complete"),tt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,tt(this,"complete"),tt(this,"abort"),qu(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qu(this,!0)),Pe.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?Sw(this):this.kb())};B.kb=function(){Sw(this)};function Sw(t){if(t.h&&typeof qf<"u"&&(!t.C[1]||yn(t)!=4||t.da()!=2)){if(t.v&&yn(t)==4)em(t.La,0,t);else if(tt(t,"readystatechange"),yn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(dw)[1]||null;!s&&Z.self&&Z.self.location&&(s=Z.self.location.protocol.slice(0,-1)),r=!JI.test(s?s.toLowerCase():"")}n=r}if(n)tt(t,"complete"),tt(t,"success");else{t.m=6;try{var i=2<yn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",xw(t)}}finally{qu(t)}}}}function qu(t,e){if(t.g){Nw(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||tt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Nw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function yn(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XI(e)}};function jg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case kw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function tT(t){const e={};t=(t.g&&2<=yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(bo(t[r]))continue;var n=CI(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}vI(e,function(r){return r.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function _w(t){let e="";return Kf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function om(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_w(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):xe(t,e,n))}function Oi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cw(t){this.Ga=0,this.j=[],this.l=new Lu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oi("baseRetryDelayMs",5e3,t),this.hb=Oi("retryDelaySeedMs",1e4,t),this.eb=Oi("forwardChannelMaxRetries",2,t),this.xa=Oi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new pw(t&&t.concurrentRequestLimit),this.Ja=new GI,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=Cw.prototype;B.ra=8;B.H=1;function am(t){if(Iw(t),t.H==3){var e=t.W++,n=qn(t.I);if(xe(n,"SID",t.K),xe(n,"RID",e),xe(n,"TYPE","terminate"),ca(t,n),e=new oa(t,t.l,e),e.L=2,e.v=ju(qn(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon)try{n=Z.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Z.Image&&(new Image().src=e.v,n=!0),n||(e.g=Ow(e.l,null),e.g.ha(e.v)),e.G=Date.now(),aa(e)}Pw(t)}function Hu(t){t.g&&(um(t),t.g.cancel(),t.g=null)}function Iw(t){Hu(t),t.u&&(Z.clearTimeout(t.u),t.u=null),Zl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function Wu(t){if(!gw(t.i)&&!t.m){t.m=!0;var e=t.Na;Ro||YE(),Po||(Ro(),Po=!0),Jf.add(e,t),t.C=0}}function nT(t,e){return yw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=sa(ht(t.Na,t,e),Rw(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new oa(this,this.l,t);let i=this.s;if(this.U&&(i?(i=BE(i),qE(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Tw(this,s,e),n=qn(this.I),xe(n,"RID",t),xe(n,"CVER",22),this.F&&xe(n,"X-HTTP-Session-Id",this.F),ca(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(_w(i)))+"&"+e:this.o&&om(n,this.o,i)),sm(this.i,s),this.bb&&xe(n,"TYPE","init"),this.P?(xe(n,"$req",e),xe(n,"SID","null"),s.aa=!0,mh(s,n,null)):mh(s,n,e),this.H=2}}else this.H==3&&(t?Bg(this,t):this.j.length==0||gw(this.i)||Bg(this))};function Bg(t,e){var n;e?n=e.m:n=t.W++;const r=qn(t.I);xe(r,"SID",t.K),xe(r,"RID",n),xe(r,"AID",t.V),ca(t,r),t.o&&t.s&&om(r,t.o,t.s),n=new oa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Tw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),sm(t.i,n),mh(n,r,e)}function ca(t,e){t.na&&Kf(t.na,function(n,r){xe(e,r,n)}),t.h&&cw({},function(n,r){xe(e,r,n)})}function Tw(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ht(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let u=0;u<n;u++){let c=s[u].g;const d=s[u].map;if(c-=i,0>c)i=Math.max(0,s[u].g-100),a=!1;else try{QI(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Dw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ro||YE(),Po||(Ro(),Po=!0),Jf.add(e,t),t.A=0}}function lm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=sa(ht(t.Ma,t),Rw(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,bw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=sa(ht(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wt(10),Hu(this),bw(this))};function um(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function bw(t){t.g=new oa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=qn(t.wa);xe(e,"RID","rpc"),xe(e,"SID",t.K),xe(e,"AID",t.V),xe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&xe(e,"TO",t.qa),xe(e,"TYPE","xmlhttp"),ca(t,e),t.o&&t.s&&om(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=ju(qn(e)),n.s=null,n.S=!0,ow(n,t)}B.ib=function(){this.v!=null&&(this.v=null,Hu(this),lm(this),wt(19))};function Zl(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function Aw(t,e){var n=null;if(t.g==e){Zl(t),um(t),t.g=null;var r=2}else if(gh(t.i,e))n=e.F,vw(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Fu(),tt(r,new nw(r,n)),Wu(t)}else Dw(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&nT(t,e)||r==2&&lm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Hr(t,5);break;case 4:Hr(t,10);break;case 3:Hr(t,6);break;default:Hr(t,2)}}}function Rw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ht(t.pb,t);n||(n=new Yr("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||Xl(n,"https"),ju(n)),YI(n.toString(),r)}else wt(2);t.H=0,t.h&&t.h.za(e),Pw(t),Iw(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),wt(2)):(this.l.info("Failed to ping google.com"),wt(1))};function Pw(t){if(t.H=0,t.ma=[],t.h){const e=Ew(t.i);(e.length!=0||t.j.length!=0)&&(Pg(t.ma,e),Pg(t.ma,t.j),t.i.i.length=0,Hf(t.j),t.j.length=0),t.h.ya()}}function Mw(t,e,n){var r=n instanceof Yr?qn(n):new Yr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Jl(r,r.m);else{var s=Z.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Yr(null);r&&Xl(i,r),e&&(i.g=e),s&&Jl(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&xe(r,n,e),xe(r,"VER",t.ra),ca(t,r),r}function Ow(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Pe(new la({ob:!0})):new Pe(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function $w(){}B=$w.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function eu(){if(ni&&!(10<=Number(mI)))throw Error("Environmental error: no available transport.")}eu.prototype.g=function(t,e){return new Vt(t,e)};function Vt(t,e){Qe.call(this),this.g=new Cw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!bo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ei(this)}Ye(Vt,Qe);Vt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Mw(t,null,t.Y),Wu(t)};Vt.prototype.close=function(){am(this.g)};Vt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Xf(t),t=n);e.j.push(new HI(e.fb++,t)),e.H==3&&Wu(e)};Vt.prototype.N=function(){this.g.h=null,delete this.j,am(this.g),delete this.g,Vt.$.N.call(this)};function Lw(t){nm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ye(Lw,nm);function Fw(){rm.call(this),this.status=1}Ye(Fw,rm);function Ei(t){this.g=t}Ye(Ei,$w);Ei.prototype.Ba=function(){tt(this.g,"a")};Ei.prototype.Aa=function(t){tt(this.g,new Lw(t))};Ei.prototype.za=function(t){tt(this.g,new Fw)};Ei.prototype.ya=function(){tt(this.g,"b")};function rT(){this.blockSize=-1}function ln(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ye(ln,rT);ln.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qc(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}ln.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Qc(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Qc(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Qc(this,r),s=0;break}}this.h=s,this.i+=e};ln.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function pe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var sT={};function cm(t){return-128<=t&&128>t?dI(t,function(e){return new pe([e|0],0>e?-1:0)}):new pe([t|0],0>t?-1:0)}function vn(t){if(isNaN(t)||!isFinite(t))return js;if(0>t)return Ze(vn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yh;return new pe(e,0)}function Uw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ze(Uw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vn(Math.pow(e,8)),r=js,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=vn(Math.pow(e,i)),r=r.R(i).add(vn(o))):(r=r.R(n),r=r.add(vn(o)))}return r}var yh=4294967296,js=cm(0),vh=cm(1),qg=cm(16777216);B=pe.prototype;B.ea=function(){if(Gt(this))return-Ze(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yh+r)*e,e*=yh}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(On(this))return"0";if(Gt(this))return"-"+Ze(this).toString(t);for(var e=vn(Math.pow(t,6)),n=this,r="";;){var s=nu(n,e).g;n=tu(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,On(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function On(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Gt(t){return t.h==-1}B.X=function(t){return t=tu(this,t),Gt(t)?-1:On(t)?0:1};function Ze(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new pe(n,~t.h).add(vh)}B.abs=function(){return Gt(this)?Ze(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new pe(n,n[n.length-1]&-2147483648?-1:0)};function tu(t,e){return t.add(Ze(e))}B.R=function(t){if(On(this)||On(t))return js;if(Gt(this))return Gt(t)?Ze(this).R(Ze(t)):Ze(Ze(this).R(t));if(Gt(t))return Ze(this.R(Ze(t)));if(0>this.X(qg)&&0>t.X(qg))return vn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,u=t.D(s)&65535;n[2*r+2*s]+=o*u,Ha(n,2*r+2*s),n[2*r+2*s+1]+=i*u,Ha(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ha(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ha(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new pe(n,0)};function Ha(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function $i(t,e){this.g=t,this.h=e}function nu(t,e){if(On(e))throw Error("division by zero");if(On(t))return new $i(js,js);if(Gt(t))return e=nu(Ze(t),e),new $i(Ze(e.g),Ze(e.h));if(Gt(e))return e=nu(t,Ze(e)),new $i(Ze(e.g),e.h);if(30<t.g.length){if(Gt(t)||Gt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vh,r=e;0>=r.X(t);)n=Hg(n),r=Hg(r);var s=ps(n,1),i=ps(r,1);for(r=ps(r,2),n=ps(n,2);!On(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=ps(r,1),n=ps(n,1)}return e=tu(t,s.R(e)),new $i(s,e)}for(s=js;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=vn(n),o=i.R(e);Gt(o)||0<o.X(t);)n-=r,i=vn(n),o=i.R(e);On(i)&&(i=vh),s=s.add(i),t=tu(t,o)}return new $i(s,t)}B.gb=function(t){return nu(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new pe(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new pe(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new pe(n,this.h^t.h)};function Hg(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new pe(n,t.h)}function ps(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new pe(s,t.h)}eu.prototype.createWebChannel=eu.prototype.g;Vt.prototype.send=Vt.prototype.u;Vt.prototype.open=Vt.prototype.m;Vt.prototype.close=Vt.prototype.close;Uu.NO_ERROR=0;Uu.TIMEOUT=8;Uu.HTTP_ERROR=6;rw.COMPLETE="complete";sw.EventType=ia;ia.OPEN="a";ia.CLOSE="b";ia.ERROR="c";ia.MESSAGE="d";Qe.prototype.listen=Qe.prototype.O;Pe.prototype.listenOnce=Pe.prototype.P;Pe.prototype.getLastError=Pe.prototype.Sa;Pe.prototype.getLastErrorCode=Pe.prototype.Ia;Pe.prototype.getStatus=Pe.prototype.da;Pe.prototype.getResponseJson=Pe.prototype.Wa;Pe.prototype.getResponseText=Pe.prototype.ja;Pe.prototype.send=Pe.prototype.ha;Pe.prototype.setWithCredentials=Pe.prototype.Oa;ln.prototype.digest=ln.prototype.l;ln.prototype.reset=ln.prototype.reset;ln.prototype.update=ln.prototype.j;pe.prototype.add=pe.prototype.add;pe.prototype.multiply=pe.prototype.R;pe.prototype.modulo=pe.prototype.gb;pe.prototype.compare=pe.prototype.X;pe.prototype.toNumber=pe.prototype.ea;pe.prototype.toString=pe.prototype.toString;pe.prototype.getBits=pe.prototype.D;pe.fromNumber=vn;pe.fromString=Uw;var iT=function(){return new eu},oT=function(){return Fu()},Yc=Uu,aT=rw,lT=cs,Wg={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uT=la,Wa=sw,cT=Pe,dT=ln,Bs=pe;const Kg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Rf("@firebase/firestore");function Gg(){return _r.logLevel}function Qg(t){_r.setLogLevel(t)}function W(t,...e){if(_r.logLevel<=de.DEBUG){const n=e.map(dm);_r.debug(`Firestore (${wi}): ${t}`,...n)}}function Hn(t,...e){if(_r.logLevel<=de.ERROR){const n=e.map(dm);_r.error(`Firestore (${wi}): ${t}`,...n)}}function ri(t,...e){if(_r.logLevel<=de.WARN){const n=e.map(dm);_r.warn(`Firestore (${wi}): ${t}`,...n)}}function dm(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: `+t;throw Hn(e),new Error(e)}function _e(t,e){t||J()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class fT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mT{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Vw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new lt(e)}}class pT{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class gT{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new pT(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vT{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.T=n.token,new yT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ET(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function si(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ae.fromMillis(Date.now())}static fromDate(e){return ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new ae(0,0))}static max(){return new ee(new ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Fo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const wT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Fo{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return wT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Se.fromString(e))}static fromName(e){return new G(Se.fromString(e).popFirst(5))}static empty(){return new G(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Se(e.slice()))}}function kT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new ae(n+1,0):new ae(n,r));return new Cr(s,G.empty(),e)}function xT(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(ee.min(),G.empty(),-1)}static max(){return new Cr(ee.max(),G.empty(),-1)}}function ST(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _T{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==_.FAILED_PRECONDITION||t.message!==NT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}hm.ct=-1;function Ku(t){return t==null}function ru(t){return t===0&&1/t==-1/0}function CT(t){return typeof t=="number"&&Number.isInteger(t)&&!ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Je(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xg(this.data.getIterator())}getIteratorFrom(e){return new Xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Xg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new mt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bw("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const IT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(_e(!!t),typeof t=="string"){let e=0;const n=IT.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mm(t){const e=t.mapValue.fields.__previous_value__;return fm(e)?mm(e):e}function Uo(t){const e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Vo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga={mapValue:{}};function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fm(t)?4:DT(t)?9007199254740991:10:J()}function Nn(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uo(t).isEqual(Uo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Ir(r.timestampValue),o=Ir(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return is(r.bytesValue).isEqual(is(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ue(r.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(r.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ue(r.integerValue)===Ue(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Ue(r.doubleValue),o=Ue(s.doubleValue);return i===o?ru(i)===ru(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return si(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Yg(i)!==Yg(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Nn(i[a],o[a])))return!1;return!0}(t,e);default:return J()}}function zo(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function ii(t,e){if(t===e)return 0;const n=os(t),r=os(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Ue(s.integerValue||s.doubleValue),a=Ue(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Jg(t.timestampValue,e.timestampValue);case 4:return Jg(Uo(t),Uo(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,i){const o=is(s),a=is(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=he(o[u],a[u]);if(c!==0)return c}return he(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=he(Ue(s.latitude),Ue(i.latitude));return o!==0?o:he(Ue(s.longitude),Ue(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=ii(o[u],a[u]);if(c)return c}return he(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Ga.mapValue&&i===Ga.mapValue)return 0;if(s===Ga.mapValue)return 1;if(i===Ga.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let d=0;d<a.length&&d<c.length;++d){const h=he(a[d],c[d]);if(h!==0)return h;const f=ii(o[a[d]],u[c[d]]);if(f!==0)return f}return he(a.length,c.length)}(t.mapValue,e.mapValue);default:throw J()}}function Jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Ir(t),r=Ir(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function oi(t){return Eh(t)}function Eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Ir(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?is(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,G.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Eh(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Eh(r.fields[a])}`;return i+"}"}(t.mapValue):J();var e,n}function Zg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function pm(t){return!!t&&"arrayValue"in t}function ey(t){return!!t&&"nullValue"in t}function ty(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ml(t){return!!t&&"mapValue"in t}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=io(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ml(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(io(this.value))}}function qw(t){const e=[];return ds(t.fields,(n,r)=>{const s=new dt([n]);if(ml(r)){const i=qw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function ny(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=ii(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ry(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n="asc"){this.field=e,this.dir=n}}function bT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{}class ze extends Hw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RT(e,n,r):n==="array-contains"?new OT(e,r):n==="in"?new $T(e,r):n==="not-in"?new LT(e,r):n==="array-contains-any"?new FT(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PT(e,r):new MT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ii(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class un extends Hw{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new un(e,n)}matches(e){return Ww(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ww(t){return t.op==="and"}function Kw(t){return AT(t)&&Ww(t)}function AT(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function kh(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+oi(t.value);if(Kw(t))return t.filters.map(e=>kh(e)).join(",");{const e=t.filters.map(n=>kh(n)).join(",");return`${t.op}(${e})`}}function Gw(t,e){return t instanceof ze?function(n,r){return r instanceof ze&&n.op===r.op&&n.field.isEqual(r.field)&&Nn(n.value,r.value)}(t,e):t instanceof un?function(n,r){return r instanceof un&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&Gw(i,r.filters[o]),!0):!1}(t,e):void J()}function Qw(t){return t instanceof ze?function(e){return`${e.field.canonicalString()} ${e.op} ${oi(e.value)}`}(t):t instanceof un?function(e){return e.op.toString()+" {"+e.getFilters().map(Qw).join(" ,")+"}"}(t):"Filter"}class RT extends ze{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class PT extends ze{constructor(e,n){super(e,"in",n),this.keys=Yw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MT extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Yw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Yw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class OT extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pm(n)&&zo(n.arrayValue,this.value)}}class $T extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zo(this.value.arrayValue,n)}}class LT extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!zo(this.value.arrayValue,n)}}class FT extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function sy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new UT(t,e,n,r,s,i,o)}function gm(t){const e=te(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oi(r)).join(",")),e.dt=n}return e.dt}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Gw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ry(t.startAt,e.startAt)&&ry(t.endAt,e.endAt)}function xh(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}}function VT(t,e,n,r,s,i,o,a){return new ki(t,e,n,r,s,i,o,a)}function Gu(t){return new ki(t)}function iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vm(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Qu(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Xw(t){return t.collectionGroup!==null}function Hs(t){const e=te(t);if(e.wt===null){e.wt=[];const n=Qu(e),r=vm(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new qs(n)),e.wt.push(new qs(dt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new qs(dt.keyField(),i))}}}return e.wt}function Wn(t){const e=te(t);if(!e._t)if(e.limitType==="F")e._t=sy(e.path,e.collectionGroup,Hs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Hs(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new qs(i.field,o))}const r=e.endAt?new su(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new su(e.startAt.position,e.startAt.inclusive):null;e._t=sy(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function Sh(t,e){e.getFirstInequalityField(),Qu(t);const n=t.filters.concat([e]);return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nh(t,e,n){return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yu(t,e){return ym(Wn(t),Wn(e))&&t.limitType===e.limitType}function Jw(t){return`${gm(Wn(t))}|lt:${t.limitType}`}function _h(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Qw(r)).join(", ")}]`),Ku(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oi(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oi(r)).join(",")),`Target(${n})`}(Wn(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):G.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of Hs(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=ny(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Hs(n),r)||n.endAt&&!function(s,i,o){const a=ny(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Hs(n),r))}(t,e)}function zT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Zw(t){return(e,n)=>{let r=!1;for(const s of Hs(t)){const i=jT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jT(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),u=o.data.field(s);return a!==null&&u!==null?ii(a,u):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Ae(G.comparator);function Kn(){return BT}const ek=new Ae(G.comparator);function Hi(...t){let e=ek;for(const n of t)e=e.insert(n.key,n);return e}function tk(t){let e=ek;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return oo()}function nk(){return oo()}function oo(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const qT=new Ae(G.comparator),HT=new mt(G.comparator);function ie(...t){let e=HT;for(const n of t)e=e.add(n);return e}const WT=new mt(he);function KT(){return WT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function GT(t,e){return CT(e)?sk(e):rk(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this._=void 0}}function QT(t,e,n){return t instanceof jo?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&fm(s)&&(s=mm(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Bo?ok(t,e):t instanceof qo?ak(t,e):function(r,s){const i=ik(r,s),o=oy(i)+oy(r.gt);return wh(i)&&wh(r.gt)?sk(o):rk(r.serializer,o)}(t,e)}function YT(t,e,n){return t instanceof Bo?ok(t,e):t instanceof qo?ak(t,e):n}function ik(t,e){return t instanceof iu?wh(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class jo extends Ju{}class Bo extends Ju{constructor(e){super(),this.elements=e}}function ok(t,e){const n=lk(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qo extends Ju{constructor(e){super(),this.elements=e}}function ak(t,e){let n=lk(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class iu extends Ju{constructor(e,n){super(),this.serializer=e,this.gt=n}}function oy(t){return Ue(t.integerValue||t.doubleValue)}function lk(t){return pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n){this.field=e,this.transform=n}}function JT(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Bo&&r instanceof Bo||n instanceof qo&&r instanceof qo?si(n.elements,r.elements,Nn):n instanceof iu&&r instanceof iu?Nn(n.gt,r.gt):n instanceof jo&&r instanceof jo}(t.transform,e.transform)}class ZT{constructor(e,n){this.version=e,this.transformResults=n}}class St{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new St}static exists(e){return new St(void 0,e)}static updateTime(e){return new St(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zu{}function uk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ec(t.key,St.none()):new fa(t.key,t.data,St.none());{const n=t.data,r=Dt.empty();let s=new mt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Mr(t.key,r,new $t(s.toArray()),St.none())}}function eD(t,e,n){t instanceof fa?function(r,s,i){const o=r.value.clone(),a=ly(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(r,s,i){if(!pl(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=ly(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(ck(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ao(t,e,n,r){return t instanceof fa?function(s,i,o,a){if(!pl(s.precondition,i))return o;const u=s.value.clone(),c=uy(s.fieldTransforms,a,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(s,i,o,a){if(!pl(s.precondition,i))return o;const u=uy(s.fieldTransforms,a,i),c=i.data;return c.setAll(ck(s)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,i,o){return pl(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function tD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ik(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&si(n,r,(s,i)=>JT(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fa extends Zu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mr extends Zu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ck(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ly(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,YT(o,a,n[s]))}return r}function uy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,QT(i,o,e))}return r}class ec extends Zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nD extends Zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=uk(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&si(this.mutations,e.mutations,(n,r)=>ay(n,r))&&si(this.baseMutations,e.baseMutations,(n,r)=>ay(n,r))}}class Em{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=qT;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Em(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ue;function oD(t){switch(t){default:return J();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function dk(t){if(t===void 0)return Hn("GRPC error has no .code"),_.UNKNOWN;switch(t){case Fe.OK:return _.OK;case Fe.CANCELLED:return _.CANCELLED;case Fe.UNKNOWN:return _.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return _.INTERNAL;case Fe.UNAVAILABLE:return _.UNAVAILABLE;case Fe.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Fe.NOT_FOUND:return _.NOT_FOUND;case Fe.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Fe.ABORTED:return _.ABORTED;case Fe.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Fe.DATA_LOSS:return _.DATA_LOSS;default:return J()}}(ue=Fe||(Fe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qa}static getOrCreateInstance(){return Qa===null&&(Qa=new wm),Qa}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Qa=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Bs([4294967295,4294967295],0);function cy(t){const e=aD().encode(t),n=new dT;return n.update(e),new Uint8Array(n.digest())}function dy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bs([n,r],0),new Bs([s,i],0)]}class km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Bs.fromNumber(this.It)}Et(e,n,r){let s=e.add(n.multiply(Bs.fromNumber(r)));return s.compare(lD)===1&&(s=new Bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=cy(e),[r,s]=dy(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);if(!this.At(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new km(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=cy(e),[r,s]=dy(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tc(ee.min(),s,new Ae(he),Kn(),ie())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=s}}class hk{constructor(e,n){this.targetId=e,this.Vt=n}}class fk{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hy{constructor(){this.St=0,this.Dt=my(),this.Ct=vt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ie(),n=ie(),r=ie();return this.Dt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new ma(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=my()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class uD{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Kn(),this.zt=fy(),this.Wt=new Ae(he)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,s)=>{this.te(s)&&n(s)})}ne(e){var n;const r=e.targetId,s=e.Vt.count,i=this.se(r);if(i){const o=i.target;if(xh(o))if(s===0){const a=new G(o.path);this.Yt(r,a,ct.newNoDocument(a,ee.min()))}else _e(s===1);else{const a=this.ie(r);if(a!==s){const u=this.re(e,a);if(u!==0){this.ee(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,c)}(n=wm.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,d,h){var f,g,v,E,w,m;const p={localCacheCount:d,existenceFilterCount:h.count},y=h.unchangedNames;return y&&(p.bloomFilter={applied:c===0,hashCount:(f=y==null?void 0:y.hashCount)!==null&&f!==void 0?f:0,bitmapLength:(E=(v=(g=y==null?void 0:y.bits)===null||g===void 0?void 0:g.bitmap)===null||v===void 0?void 0:v.length)!==null&&E!==void 0?E:0,padding:(m=(w=y==null?void 0:y.bits)===null||w===void 0?void 0:w.padding)!==null&&m!==void 0?m:0}),p}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=is(i).toUint8Array()}catch(d){if(d instanceof Bw)return ri("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw d}try{c=new km(u,o,a)}catch(d){return ri(d instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",d),1}return c.It===0?1:s!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.vt(a)||(this.Yt(e,i,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((i,o)=>{const a=this.se(o);if(a){if(i.current&&xh(a.target)){const u=new G(a.target.path);this.jt.get(u)!==null||this.ae(o,u)||this.Yt(o,u,ct.newNoDocument(u,e))}i.Mt&&(n.set(o,i.Ot()),i.Ft())}});let r=ie();this.zt.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.jt.forEach((i,o)=>o.setReadTime(e));const s=new tc(e,n,this.Wt,this.jt,r);return this.jt=Kn(),this.zt=fy(),this.Wt=new Ae(he),s}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new hy,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new mt(he),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new hy),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function fy(){return new Ae(G.comparator)}function my(){return new Ae(G.comparator)}const cD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hD={and:"AND",or:"OR"};class fD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ch(t,e){return t.useProto3Json||Ku(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mD(t,e){return ou(t,e.toTimestamp())}function Sn(t){return _e(!!t),ee.fromTimestamp(function(e){const n=Ir(e);return new ae(n.seconds,n.nanos)}(t))}function xm(t,e){return function(n){return new Se(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function pk(t){const e=Se.fromString(t);return _e(Ek(e)),e}function Ih(t,e){return xm(t.databaseId,e.path)}function Xc(t,e){const n=pk(e);if(n.get(1)!==t.databaseId.projectId)throw new q(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(gk(n))}function Th(t,e){return xm(t.databaseId,e)}function pD(t){const e=pk(t);return e.length===4?Se.emptyPath():gk(e)}function Dh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gk(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function py(t,e,n){return{name:Ih(t,e),fields:n.value.mapValue.fields}}function gD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,c){return u.useProto3Json?(_e(c===void 0||typeof c=="string"),vt.fromBase64String(c||"")):(_e(c===void 0||c instanceof Uint8Array),vt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?_.UNKNOWN:dk(u.code);return new q(c,u.message||"")}(o);n=new fk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xc(t,r.document.name),i=Sn(r.document.updateTime),o=r.document.createTime?Sn(r.document.createTime):ee.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new gl(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xc(t,r.document),i=r.readTime?Sn(r.readTime):ee.min(),o=ct.newNoDocument(s,i),a=r.removedTargetIds||[];n=new gl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xc(t,r.document),i=r.removedTargetIds||[];n=new gl([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iD(s,i),a=r.targetId;n=new hk(a,o)}}return n}function yD(t,e){let n;if(e instanceof fa)n={update:py(t,e.key,e.value)};else if(e instanceof ec)n={delete:Ih(t,e.key)};else if(e instanceof Mr)n={update:py(t,e.key,e.data),updateMask:CD(e.fieldMask)};else{if(!(e instanceof nD))return J();n={verify:Ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof jo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Bo)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qo)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof iu)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:mD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function vD(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Sn(r.updateTime):Sn(s);return i.isEqual(ee.min())&&(i=Sn(s)),new ZT(i,r.transformResults||[])}(n,e))):[]}function ED(t,e){return{documents:[Th(t,e.path)]}}function wD(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Th(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Th(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(u){if(u.length!==0)return vk(un.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:vs(d.field),direction:SD(d.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Ch(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function kD(t){let e=pD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(d){const h=yk(d);return h instanceof un&&Kw(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(d=>function(h){return new qs(Es(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d)));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Ku(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){const h=!!d.before,f=d.values||[];return new su(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new su(f,h)}(n.endAt)),VT(e,s,o,i,a,"F",u,c)}function xD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Es(e.unaryFilter.field);return ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Es(e.unaryFilter.field);return ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Es(e.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Es(e.unaryFilter.field);return ze.create(i,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(e){return ze.create(Es(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return un.create(e.compositeFilter.filters.map(n=>yk(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return J()}}(e.compositeFilter.op))}(t):J()}function SD(t){return cD[t]}function ND(t){return dD[t]}function _D(t){return hD[t]}function vs(t){return{fieldPath:t.canonicalString()}}function Es(t){return dt.fromServerFormat(t.fieldPath)}function vk(t){return t instanceof ze?function(e){if(e.op==="=="){if(ty(e.value))return{unaryFilter:{field:vs(e.field),op:"IS_NAN"}};if(ey(e.value))return{unaryFilter:{field:vs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ty(e.value))return{unaryFilter:{field:vs(e.field),op:"IS_NOT_NAN"}};if(ey(e.value))return{unaryFilter:{field:vs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(e.field),op:ND(e.op),value:e.value}}}(t):t instanceof un?function(e){const n=e.getFilters().map(r=>vk(r));return n.length===1?n[0]:{compositeFilter:{op:_D(e.op),filters:n}}}(t):J()}function CD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ek(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.fe=e}}function TD(t){const e=kD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.rn=new bD}addToCollectionParentIndex(e,n){return this.rn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Cr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class bD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ai(0)}static Mn(){return new ai(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ao(r.mutation,s,$t.empty(),ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Wr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Hi();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Kn();const o=oo(),a=oo();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Mr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ao(d.mutation,c,d.mutation.getFieldMask(),ae.now())):o.set(c.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new RD(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=oo();let s=new Ae((o,a)=>o-a),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||$t.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(s.get(a.batchId)||ie()).add(u);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=nk();d.forEach(f=>{if(!i.has(f)){const g=uk(n.get(f),r.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Wr());let a=-1,u=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{u=u.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ie())).next(d=>({batchId:a,changes:tk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Hi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Hi();return this.indexManager.getCollectionParents(e,s).next(o=>V.forEach(o,a=>{const u=function(c,d){return new ki(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,u)=>{const c=u.getKey();i.get(c)===null&&(i=i.insert(c,ct.newInvalidDocument(c)))});let o=Hi();return i.forEach((a,u)=>{const c=s.get(a);c!==void 0&&ao(c.mutation,u,$t.empty(),ae.now()),Xu(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return V.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Sn(r.createTime)}),V.resolve()}getNamedQuery(e,n){return V.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:TD(r.bundledQuery),readTime:Sn(r.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.overlays=new Ae(G.comparator),this.ls=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Wr(),i=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Wr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Wr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sD(n,r));let i=this.ls.get(n);i===void 0&&(i=ie(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.fs=new mt(We.ds),this.ws=new mt(We._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new We(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new We(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new G(new Se([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new G(new Se([])),r=new We(n,e),s=new We(n,e+1);let i=ie();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return G.comparator(e.key,n.key)||he(e.As,n.As)}static _s(e,n){return he(e.As,n.As)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new mt(We.ds)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new We(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(he);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),V.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new We(new G(i),0);let a=new mt(he);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.As)),!0)},o),V.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return V.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new We(n,0),s=this.Rs.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.Ds=e,this.docs=new Ae(G.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Kn();const o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ST(xT(d),r)<=0||(s.has(d.key)||Xu(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}Cs(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FD(this)}getSize(e){return V.resolve(this.size)}}class FD extends AD{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.persistence=e,this.xs=new xi(n=>gm(n),ym),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Sm,this.targetCount=0,this.Ms=ai.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),V.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ai(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Fn(n),V.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.$s={},this.overlays={},this.Os=new hm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new UD(this),this.indexManager=new DD,this.remoteDocumentCache=function(r){return new LD(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new ID(n),this.qs=new MD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new $D(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new zD(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return V.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class zD extends _T{constructor(e){super(),this.currentSequenceNumber=e}}class Nm{constructor(e){this.persistence=e,this.Qs=new Sm,this.js=null}static zs(e){return new Nm(e)}get Ws(){if(this.js)return this.js;throw J()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),V.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Ws,r=>{const s=G.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return V.or([()=>V.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _m(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(iy(n))return V.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nh(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,Nh(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,s){return iy(n)||s.isEqual(ee.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(Gg()<=de.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_h(n)),this.Wi(e,o,n,kT(s,-1)))})}ji(e,n){let r=new mt(Zw(e));return n.forEach((s,i)=>{Xu(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return Gg()<=de.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",_h(n)),this.Ui.getDocumentsMatchingQuery(e,n,Cr.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Ae(he),this.Yi=new xi(i=>gm(i),ym),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PD(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function qD(t,e,n,r){return new BD(t,e,n,r)}async function wk(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function HD(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const d=u.batch,h=d.keys();let f=V.resolve();return h.forEach(g=>{f=f.next(()=>c.getEntry(a,g)).next(v=>{const E=u.docVersions.get(g);_e(E!==null),v.version.compareTo(E)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ie();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function kk(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function WD(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Bs.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(i,d.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(vt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(v,E,w){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,d)&&a.push(n.Bs.updateTargetData(i,g))});let u=Kn(),c=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(KD(i,o,e.documentUpdates).next(d=>{u=d.nr,c=d.sr})),!r.isEqual(ee.min())){const d=n.Bs.getLastRemoteSnapshotVersion(i).next(h=>n.Bs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ji=s,i))}function KD(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Kn();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:s}})}function GD(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QD(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Bs.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Bs.allocateTargetId(r).next(o=>(s=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function bh(t,e,n){const r=te(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ha(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function gy(t,e,n){const r=te(t);let s=ee.min(),i=ie();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const d=te(a),h=d.Yi.get(c);return h!==void 0?V.resolve(d.Ji.get(h)):d.Bs.getTargetData(u,c)}(r,o,Wn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ie())).next(a=>(YD(r,zT(e),a),{documents:a,ir:i})))}function YD(t,e,n){let r=t.Xi.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Xi.set(e,r)}class yy{constructor(){this.activeTargetIds=KT()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XD{constructor(){this.Hr=new yy,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new yy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya=null;function Jc(){return Ya===null?Ya=268435456+Math.round(2147483648*Math.random()):Ya++,"0x"+Ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class tb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=Jc(),a=this.To(e,n);W("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,s,i),this.Ao(e,a,u,r).then(c=>(W("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw ri("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=ZD[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=Jc();return new Promise((o,a)=>{const u=new cT;u.setWithCredentials(!0),u.listenOnce(aT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yc.NO_ERROR:const d=u.getResponseJson();W(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Yc.TIMEOUT:W(at,`RPC '${e}' ${i} timed out`),a(new q(_.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const h=u.getStatus();if(W(at,`RPC '${e}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(w)>=0?w:_.UNKNOWN}(g.status);a(new q(v,g.message))}else a(new q(_.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new q(_.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{W(at,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const s=Jc(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iT(),a=oT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new uT({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");W(at,`Creating RPC '${e}' stream ${s}: ${d}`,u);const h=o.createWebChannel(d,u);let f=!1,g=!1;const v=new eb({ro:w=>{g?W(at,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(W(at,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),W(at,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},oo:()=>h.close()}),E=(w,m,p)=>{w.listen(m,y=>{try{p(y)}catch(k){setTimeout(()=>{throw k},0)}})};return E(h,Wa.EventType.OPEN,()=>{g||W(at,`RPC '${e}' stream ${s} transport opened.`)}),E(h,Wa.EventType.CLOSE,()=>{g||(g=!0,W(at,`RPC '${e}' stream ${s} transport closed`),v.wo())}),E(h,Wa.EventType.ERROR,w=>{g||(g=!0,ri(at,`RPC '${e}' stream ${s} transport errored:`,w),v.wo(new q(_.UNAVAILABLE,"The operation could not be completed")))}),E(h,Wa.EventType.MESSAGE,w=>{var m;if(!g){const p=w.data[0];_e(!!p);const y=p,k=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(k){W(at,`RPC '${e}' stream ${s} received error:`,k);const I=k.status;let L=function(M){const Q=Fe[M];if(Q!==void 0)return dk(Q)}(I),z=k.message;L===void 0&&(L=_.INTERNAL,z="Unknown error status: "+I+" with message "+k.message),g=!0,v.wo(new q(L,z)),h.close()}else W(at,`RPC '${e}' stream ${s} received:`,p),v._o(p)}}),E(a,lT.STAT_EVENT,w=>{w.stat===Wg.PROXY?W(at,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===Wg.NOPROXY&&W(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}function Zc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new fD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n,r,s,i,o,a,u){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new xk(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new q(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nb extends Sk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=gD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ee.min():i.readTime?Sn(i.readTime):ee.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Dh(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=xh(a)?{documents:ED(s,a)}:{query:wD(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=mk(s,i.resumeToken);const u=Ch(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(ee.min())>0){o.readTime=ou(s,i.snapshotVersion.toTimestamp());const u=Ch(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=xD(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Dh(this.serializer),n.removeTarget=e,this.Wo(n)}}class rb extends Sk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=vD(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.cu(r,n)}return _e(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Dh(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yD(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new q(_.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(_.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(_.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class ib{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Hn(n),this.mu=!1):W("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{hs(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=te(a);u.vu.add(4),await pa(u),u.bu.set("Unknown"),u.vu.delete(4),await rc(u)}(this))})}),this.bu=new ib(r,s)}}async function rc(t){if(hs(t))for(const e of t.Ru)await e(!0)}async function pa(t){for(const e of t.Ru)await e(!1)}function Nk(t,e){const n=te(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Tm(n)?Im(n):Si(n).Ko()&&Cm(n,e))}function _k(t,e){const n=te(t),r=Si(n);n.Au.delete(e),r.Ko()&&Ck(n,e),n.Au.size===0&&(r.Ko()?r.jo():hs(n)&&n.bu.set("Unknown"))}function Cm(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).su(e)}function Ck(t,e){t.Vu.qt(e),Si(t).iu(e)}function Im(t){t.Vu=new uD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.bu.gu()}function Tm(t){return hs(t)&&!Si(t).Uo()&&t.Au.size>0}function hs(t){return te(t).vu.size===0}function Ik(t){t.Vu=void 0}async function ab(t){t.Au.forEach((e,n)=>{Cm(t,e)})}async function lb(t,e){Ik(t),Tm(t)?(t.bu.Iu(e),Im(t)):t.bu.set("Unknown")}async function ub(t,e,n){if(t.bu.set("Online"),e instanceof fk&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await au(t,r)}else if(e instanceof gl?t.Vu.Ht(e):e instanceof hk?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ee.min()))try{const r=await kk(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Vu.ce(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.Au.get(u);c&&s.Au.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,u)=>{const c=s.Au.get(a);if(!c)return;s.Au.set(a,c.withResumeToken(vt.EMPTY_BYTE_STRING,c.snapshotVersion)),Ck(s,a);const d=new cr(c.target,a,u,c.sequenceNumber);Cm(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await au(t,r)}}async function au(t,e,n){if(!ha(e))throw e;t.vu.add(1),await pa(t),t.bu.set("Offline"),n||(n=()=>kk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await rc(t)})}function Tk(t,e){return e().catch(n=>au(t,n,e))}async function sc(t){const e=te(t),n=Tr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;cb(e);)try{const s=await GD(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,db(e,s)}catch(s){await au(e,s)}Dk(e)&&bk(e)}function cb(t){return hs(t)&&t.Eu.length<10}function db(t,e){t.Eu.push(e);const n=Tr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Dk(t){return hs(t)&&!Tr(t).Uo()&&t.Eu.length>0}function bk(t){Tr(t).start()}async function hb(t){Tr(t).hu()}async function fb(t){const e=Tr(t);for(const n of t.Eu)e.uu(n.mutations)}async function mb(t,e,n){const r=t.Eu.shift(),s=Em.from(r,e,n);await Tk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sc(t)}async function pb(t,e){e&&Tr(t).ou&&await async function(n,r){if(s=r.code,oD(s)&&s!==_.ABORTED){const i=n.Eu.shift();Tr(n).Qo(),await Tk(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await sc(n)}var s}(t,e),Dk(t)&&bk(t)}async function Ey(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=hs(n);n.vu.add(3),await pa(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await rc(n)}async function gb(t,e){const n=te(t);e?(n.vu.delete(2),await rc(n)):e||(n.vu.add(2),await pa(n),n.bu.set("Unknown"))}function Si(t){return t.Su||(t.Su=function(e,n,r){const s=te(e);return s.fu(),new nb(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:ab.bind(null,t),ao:lb.bind(null,t),nu:ub.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Tm(t)?Im(t):t.bu.set("Unknown")):(await t.Su.stop(),Ik(t))})),t.Su}function Tr(t){return t.Du||(t.Du=function(e,n,r){const s=te(e);return s.fu(),new rb(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:hb.bind(null,t),ao:pb.bind(null,t),au:fb.bind(null,t),cu:mb.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await sc(t)):(await t.Du.stop(),t.Eu.length>0&&(W("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Dm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),ha(t))return new q(_.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Hi(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.Cu=new Ae(G.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):J():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class li{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new li(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.Nu=void 0,this.listeners=[]}}class vb{constructor(){this.queries=new xi(e=>Jw(e),Yu),this.onlineState="Unknown",this.ku=new Set}}async function Am(t,e){const n=te(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new yb),s)try{i.Nu=await n.onListen(r)}catch(o){const a=bm(o,`Initialization of query '${_h(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&Pm(n)}async function Rm(t,e){const n=te(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Eb(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.$u(s)&&(r=!0);o.Nu=s}}r&&Pm(n)}function wb(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Pm(t){t.ku.forEach(e=>{e.next()})}class Mm{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.key=e}}class Rk{constructor(e){this.key=e}}class kb{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ie(),this.mutatedKeys=ie(),this.tc=Zw(e),this.ec=new Ws(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new wy,s=n?n.ec:this.ec;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),g=Xu(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?v!==E&&(r.track({type:3,doc:g}),w=!0):this.rc(f,g)||(r.track({type:2,doc:g}),w=!0,(u&&this.tc(g,u)>0||c&&this.tc(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(u||c)&&(a=!0)),w&&(g?(o=o.add(g),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{ec:o,ic:r,zi:a,mutatedKeys:i}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((c,d)=>function(h,f){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return g(h)-g(f)}(c.type,d.type)||this.tc(c.doc,d.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,i.length!==0||u?{snapshot:new li(this.query,e.ec,s,i,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wy,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ie(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new Rk(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new Ak(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ie();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return li.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class xb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sb{constructor(e){this.key=e,this.fc=!1}}class Nb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new xi(a=>Jw(a),Yu),this._c=new Map,this.mc=new Set,this.gc=new Ae(G.comparator),this.yc=new Map,this.Ic=new Sm,this.Tc={},this.Ec=new Map,this.Ac=ai.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function _b(t,e){const n=Ob(t);let r,s;const i=n.wc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const o=await QD(n.localStore,Wn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Cb(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Nk(n.remoteStore,o)}return s}async function Cb(t,e,n,r,s){t.Rc=(h,f,g)=>async function(v,E,w,m){let p=E.view.sc(w);p.zi&&(p=await gy(v.localStore,E.query,!1).then(({documents:I})=>E.view.sc(I,p)));const y=m&&m.targetChanges.get(E.targetId),k=E.view.applyChanges(p,v.isPrimaryClient,y);return xy(v,E.targetId,k.cc),k.snapshot}(t,h,f,g);const i=await gy(t.localStore,e,!0),o=new kb(e,i.ir),a=o.sc(i.documents),u=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);xy(t,n,c.cc);const d=new xb(e,n,o);return t.wc.set(e,d),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function Ib(t,e){const n=te(t),r=n.wc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Yu(i,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await bh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_k(n.remoteStore,r.targetId),Ah(n,r.targetId)}).catch(da)):(Ah(n,r.targetId),await bh(n.localStore,r.targetId,!0))}async function Tb(t,e,n){const r=$b(t);try{const s=await function(i,o){const a=te(i),u=ae.now(),c=o.reduce((f,g)=>f.add(g.key),ie());let d,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Kn(),v=ie();return a.Zi.getEntries(f,c).next(E=>{g=E,g.forEach((w,m)=>{m.isValidDocument()||(v=v.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,g)).next(E=>{d=E;const w=[];for(const m of o){const p=tD(m,d.get(m.key).overlayedDocument);p!=null&&w.push(new Mr(m.key,p,qw(p.value.mapValue),St.exists(!0)))}return a.mutationQueue.addMutationBatch(f,u,w,o)}).next(E=>{h=E;const w=E.applyToLocalDocumentSet(d,v);return a.documentOverlayCache.saveOverlays(f,E.batchId,w)})}).then(()=>({batchId:h.batchId,changes:tk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let u=i.Tc[i.currentUser.toKey()];u||(u=new Ae(he)),u=u.insert(o,a),i.Tc[i.currentUser.toKey()]=u}(r,s.batchId,n),await ga(r,s.changes),await sc(r.remoteStore)}catch(s){const i=bm(s,"Failed to persist write");n.reject(i)}}async function Pk(t,e){const n=te(t);try{const r=await WD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.yc.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?_e(o.fc):s.removedDocuments.size>0&&(_e(o.fc),o.fc=!1))}),await ga(n,r,e)}catch(r){await da(r)}}function ky(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=te(i);a.onlineState=o;let u=!1;a.queries.forEach((c,d)=>{for(const h of d.listeners)h.Mu(o)&&(u=!0)}),u&&Pm(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Db(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.yc.get(e),i=s&&s.key;if(i){let o=new Ae(G.comparator);o=o.insert(i,ct.newNoDocument(i,ee.min()));const a=ie().add(i),u=new tc(ee.min(),new Map,new Ae(he),o,a);await Pk(r,u),r.gc=r.gc.remove(i),r.yc.delete(e),Om(r)}else await bh(r.localStore,e,!1).then(()=>Ah(r,e,n)).catch(da)}async function bb(t,e){const n=te(t),r=e.batch.batchId;try{const s=await HD(n.localStore,e);Ok(n,r,null),Mk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ga(n,s)}catch(s){await da(s)}}async function Ab(t,e,n){const r=te(t);try{const s=await function(i,o){const a=te(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(d=>(_e(d!==null),c=d.keys(),a.mutationQueue.removeMutationBatch(u,d))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);Ok(r,e,n),Mk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ga(r,s)}catch(s){await da(s)}}function Mk(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function Ok(t,e,n){const r=te(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Ah(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||$k(t,r)})}function $k(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(_k(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Om(t))}function xy(t,e,n){for(const r of n)r instanceof Ak?(t.Ic.addReference(r.key,e),Rb(t,r)):r instanceof Rk?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||$k(t,r.key)):J()}function Rb(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(W("SyncEngine","New document in limbo: "+n),t.mc.add(r),Om(t))}function Om(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new G(Se.fromString(e)),r=t.Ac.next();t.yc.set(r,new Sb(n)),t.gc=t.gc.insert(n,r),Nk(t.remoteStore,new cr(Wn(Gu(n.path)),r,"TargetPurposeLimboResolution",hm.ct))}}async function ga(t,e,n){const r=te(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=_m.Li(u.targetId,c);i.push(d)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,u){const c=te(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>V.forEach(u,h=>V.forEach(h.Fi,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>V.forEach(h.Bi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ha(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.Ji.get(h),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);c.Ji=c.Ji.insert(h,v)}}}(r.localStore,i))}async function Pb(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await wk(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new q(_.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ga(n,r.er)}}function Mb(t,e){const n=te(t),r=n.yc.get(e);if(r&&r.fc)return ie().add(r.key);{let s=ie();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function Ob(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Db.bind(null,e),e.dc.nu=Eb.bind(null,e.eventManager),e.dc.Pc=wb.bind(null,e.eventManager),e}function $b(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ab.bind(null,e),e}class Sy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qD(this.persistence,new jD,e.initialUser,this.serializer)}createPersistence(e){return new VD(Nm.zs,this.serializer)}createSharedClientState(e){return new XD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Lb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ky(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pb.bind(null,this.syncEngine),await gb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vb}createDatastore(e){const n=nc(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new tb(s));var s;return function(i,o,a,u){return new sb(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>ky(this.syncEngine,a,0),o=vy.D()?new vy:new JD,new ob(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,u,c){const d=new Nb(r,s,i,o,a,u);return c&&(d.vc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=te(e);W("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await pa(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=zw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{W("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(W("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ny(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Vb(t);W("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Ey(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ey(e.remoteStore,i)),t._onlineComponents=e}function Ub(t){return t.name==="FirebaseError"?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Vb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Ub(n))throw n;ri("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Sy)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await ed(t,new Sy);return t._offlineComponents}async function Lk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Ny(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Ny(t,new Lb))),t._onlineComponents}function zb(t){return Lk(t).then(e=>e.syncEngine)}async function lu(t){const e=await Lk(t),n=e.eventManager;return n.onListen=_b.bind(null,e.syncEngine),n.onUnlisten=Ib.bind(null,e.syncEngine),n}function jb(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,u){const c=new $m({next:h=>{i.enqueueAndForget(()=>Rm(s,d));const f=h.docs.has(o);!f&&h.fromCache?u.reject(new q(_.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?u.reject(new q(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Mm(Gu(o.path),c,{includeMetadataChanges:!0,Ku:!0});return Am(s,d)}(await lu(t),t.asyncQueue,e,n,r)),r.promise}function Bb(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,u){const c=new $m({next:h=>{i.enqueueAndForget(()=>Rm(s,d)),h.fromCache&&a.source==="server"?u.reject(new q(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Mm(o,c,{includeMetadataChanges:!0,Ku:!0});return Am(s,d)}(await lu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e,n){if(!n)throw new q(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qb(t,e,n,r){if(e===!0&&r===!0)throw new q(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cy(t){if(!G.isDocumentKey(t))throw new q(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Iy(t){if(G.isDocumentKey(t))throw new q(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ic(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Nt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ic(t);throw new q(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class oc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new hT;switch(n.type){case"firstParty":return new gT(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_y.get(e);n&&(W("ComponentProvider","Removing Datastore"),_y.delete(e),n.terminate())}(this),Promise.resolve()}}function Hb(t,e,n,r={}){var s;const i=(t=Nt(t,oc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=lt.MOCK_USER;else{a=MS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(c)}t._authCredentials=new fT(new Vw(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}}class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class xr extends Or{constructor(e,n,r){super(e,n,Gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new G(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function kt(t,e,...n){if(t=Oe(t),Uk("collection","path",e),t instanceof oc){const r=Se.fromString(e,...n);return Iy(r),new xr(t,null,r)}{if(!(t instanceof pt||t instanceof xr))throw new q(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Iy(r),new xr(t.firestore,null,r)}}function Te(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=zw.A()),Uk("doc","path",e),t instanceof oc){const r=Se.fromString(e,...n);return Cy(r),new pt(t,null,new G(r))}{if(!(t instanceof pt||t instanceof xr))throw new q(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Cy(r),new pt(t.firestore,t instanceof xr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new xk(this,"async_queue_retry"),this.Xc=()=>{const n=Zc();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Zc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Zc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Fn;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ha(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Hn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=Dm.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&J()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Dy(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _n extends oc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vk(this),this._firestoreClient.terminate()}}function Kb(t,e){const n=typeof t=="object"?t:rE(),r=typeof t=="string"?t:"(default)",s=Mf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=RS("firestore");i&&Hb(s,...i)}return s}function ya(t){return t._firestoreClient||Vk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vk(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,u,c){return new TT(o,a,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Fk(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Fb(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(vt.fromBase64String(e))}catch(n){throw new q(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ui(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=/^__.*__$/;class Qb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}}class zk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Fm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Fm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return uu(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(jk(this.ca)&&Gb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Yb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nc(e)}ya(e,n,r,s=!1){return new Fm({ca:e,methodName:n,ga:r,path:dt.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ea(t){const e=t._freezeSettings(),n=nc(t._databaseId);return new Yb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Um(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);zm("Data must be an object, but it was:",o,r);const a=Hk(r,o);let u,c;if(i.merge)u=new $t(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Rh(e,h,n);if(!o.contains(f))throw new q(_.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Kk(d,f)||d.push(f)}u=new $t(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new Qb(new Dt(a),u,c)}class lc extends ac{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}class Vm extends ac{_toFieldTransform(e){return new XT(e.path,new jo)}isEqual(e){return e instanceof Vm}}function Bk(t,e,n,r){const s=t.ya(1,e,n);zm("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();ds(r,(u,c)=>{const d=jm(e,u,n);c=Oe(c);const h=s.da(d);if(c instanceof lc)i.push(d);else{const f=wa(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new $t(i);return new zk(o,a,s.fieldTransforms)}function qk(t,e,n,r,s,i){const o=t.ya(1,e,n),a=[Rh(e,r,n)],u=[s];if(i.length%2!=0)throw new q(_.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Rh(e,i[f])),u.push(i[f+1]);const c=[],d=Dt.empty();for(let f=a.length-1;f>=0;--f)if(!Kk(c,a[f])){const g=a[f];let v=u[f];v=Oe(v);const E=o.da(g);if(v instanceof lc)c.push(g);else{const w=wa(v,E);w!=null&&(c.push(g),d.set(g,w))}}const h=new $t(c);return new zk(d,h,o.fieldTransforms)}function Xb(t,e,n,r=!1){return wa(n,t.ya(r?4:3,e))}function wa(t,e){if(Wk(t=Oe(t)))return zm("Unsupported field value:",e,t),Hk(t,e);if(t instanceof ac)return function(n,r){if(!jk(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=wa(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Oe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return GT(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ae.fromDate(n);return{timestampValue:ou(r.serializer,s)}}if(n instanceof ae){const s=new ae(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ou(r.serializer,s)}}if(n instanceof Lm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ui)return{bytesValue:mk(r.serializer,n._byteString)};if(n instanceof pt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xm(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${ic(n)}`)}(t,e)}function Hk(t,e){const n={};return jw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=wa(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Wk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ae||t instanceof Lm||t instanceof ui||t instanceof pt||t instanceof ac)}function zm(t,e,n){if(!Wk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=ic(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Rh(t,e,n){if((e=Oe(e))instanceof va)return e._internalPath;if(typeof e=="string")return jm(t,e);throw uu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jb=new RegExp("[~\\*/\\[\\]]");function jm(t,e,n){if(e.search(Jb)>=0)throw uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new va(...e.split("."))._internalPath}catch{throw uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(_.INVALID_ARGUMENT,a+t+u)}function Kk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Zb extends Gk{data(){return super.data()}}function Bm(t,e){return typeof e=="string"?jm(t,e):e instanceof va?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qm{}class Yk extends qm{}function Ph(t,e,...n){let r=[];e instanceof qm&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof Wm).length,o=s.filter(a=>a instanceof Hm).length;if(i>1||i>0&&o>0)throw new q(_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hm extends Yk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hm(e,n,r)}_apply(e){const n=this._parse(e);return Xk(e._query,n),new Or(e.firestore,e.converter,Sh(e._query,n))}_parse(e){const n=Ea(e.firestore);return function(s,i,o,a,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new q(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Ay(d,c);const f=[];for(const g of d)f.push(by(a,s,g));h={arrayValue:{values:f}}}else h=by(a,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Ay(d,c),h=Xb(o,i,d,c==="in"||c==="not-in");return ze.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Wm extends qm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const a of o)Xk(i,a),i=Sh(i,a)}(e._query,n),new Or(e.firestore,e.converter,Sh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Km extends Yk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Km(e,n)}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new q(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new q(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new qs(s,i);return function(a,u){if(vm(a)===null){const c=Qu(a);c!==null&&Jk(a,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new ki(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function eA(t,e="asc"){const n=e,r=Bm("orderBy",t);return Km._create(r,n)}function by(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new q(_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(e)&&n.indexOf("/")!==-1)throw new q(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!G.isDocumentKey(r))throw new q(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zg(t,new G(r))}if(n instanceof pt)return Zg(t,n._key);throw new q(_.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ic(n)}.`)}function Ay(t,e){if(!Array.isArray(t)||t.length===0)throw new q(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xk(t,e){if(e.isInequality()){const r=Qu(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new q(_.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=vm(t);i!==null&&Jk(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Jk(t,e,n){if(!n.isEqual(e))throw new q(_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class tA{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Lm(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);_e(Ek(r));const s=new Vo(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zk extends Gk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yl extends Zk{data(e={}){return super.data(e)}}class e1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yl(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new yl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ki(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new yl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ki(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:nA(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){t=Nt(t,pt);const e=Nt(t.firestore,_n);return jb(ya(e),t._key).then(n=>n1(e,t,n))}class Qm extends tA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Mh(t){t=Nt(t,Or);const e=Nt(t.firestore,_n),n=ya(e),r=new Qm(e);return Qk(t._query),Bb(n,t._query).then(s=>new e1(e,r,t,s))}function t1(t,e,n){t=Nt(t,pt);const r=Nt(t.firestore,_n),s=Gm(t.converter,e,n);return ka(r,[Um(Ea(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,St.none())])}function ci(t,e,n,...r){t=Nt(t,pt);const s=Nt(t.firestore,_n),i=Ea(s);let o;return o=typeof(e=Oe(e))=="string"||e instanceof va?qk(i,"updateDoc",t._key,e,n,r):Bk(i,"updateDoc",t._key,e),ka(s,[o.toMutation(t._key,St.exists(!0))])}function di(t){return ka(Nt(t.firestore,_n),[new ec(t._key,St.none())])}function as(t,e){const n=Nt(t.firestore,_n),r=Te(t),s=Gm(t.converter,e);return ka(n,[Um(Ea(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,St.exists(!1))]).then(()=>r)}function rA(t,...e){var n,r,s;t=Oe(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Dy(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Dy(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let u,c,d;if(t instanceof pt)c=Nt(t.firestore,_n),d=Gu(t._key.path),u={next:h=>{e[o]&&e[o](n1(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Nt(t,Or);c=Nt(h.firestore,_n),d=h._query;const f=new Qm(c);u={next:g=>{e[o]&&e[o](new e1(c,f,h,g))},error:e[o+1],complete:e[o+2]},Qk(t._query)}return function(h,f,g,v){const E=new $m(v),w=new Mm(f,E,g);return h.asyncQueue.enqueueAndForget(async()=>Am(await lu(h),w)),()=>{E.Dc(),h.asyncQueue.enqueueAndForget(async()=>Rm(await lu(h),w))}}(ya(c),d,a,u)}function ka(t,e){return function(n,r){const s=new Fn;return n.asyncQueue.enqueueAndForget(async()=>Tb(await zb(n),r,s)),s.promise}(ya(t),e)}function n1(t,e,n){const r=n.docs.get(e._key),s=new Qm(t);return new Zk(t,s,e._key,r,new Ki(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ea(e)}set(e,n,r){this._verifyNotCommitted();const s=td(e,this._firestore),i=Gm(s.converter,n,r),o=Um(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,St.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=td(e,this._firestore);let o;return o=typeof(n=Oe(n))=="string"||n instanceof va?qk(this._dataReader,"WriteBatch.update",i._key,n,r,s):Bk(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,St.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=td(e,this._firestore);return this._mutations=this._mutations.concat(new ec(n._key,St.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function td(t,e){if((t=Oe(t)).firestore!==e)throw new q(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function iA(){return new Vm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){return ya(t=Nt(t,_n)),new sA(t,e=>ka(t,e))}(function(t,e=!0){(function(n){wi=n})(pi),ei(new ns("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new _n(new mT(n.getProvider("auth-internal")),new vT(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new q(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(a.options.projectId,u)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),kr(Kg,"3.13.0",t),kr(Kg,"3.13.0","esm2017")})();let nd=null,Ht=null,$n=null,Ho=typeof __firebase_config<"u"?JSON.parse(__firebase_config):null;Ho||(Ho={apiKey:"AIzaSyDkiLiR8QI7XDLkQ3S4R7psfSiAhL8Ds7U",authDomain:"mia-move-dev.firebaseapp.com",projectId:"mia-move-dev",storageBucket:"mia-move-dev.firebasestorage.app",messagingSenderId:"539510852507",appId:"1:539510852507:web:0d2293397af8756a2f6f3e",measurementId:"G-JRW1F0E3K8"});if(Ho){try{Qg&&Qg("debug")}catch{}nd=nE(Ho),Ht=Kb(nd),$n=iI(nd)}const Ee=(t,e,n=typeof __app_id<"u"?__app_id:"mia-move-app")=>`/artifacts/${n}/users/${t}/${e}`,Ft=({title:t,children:e,isOpen:n,onClose:r,actions:s,size:i="max-w-lg",compact:o=!1})=>{if(!n)return null;const a=o?"p-4":"p-6",u=o?"rounded-md":"rounded-xl";return l.createElement("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:r},l.createElement("div",{className:`bg-white dark:bg-gray-800 ${u} w-full ${i} ${a} shadow-2xl max-h-[90vh] flex flex-col`,onClick:c=>c.stopPropagation()},l.createElement("div",{className:"flex justify-between items-center mb-4 border-b pb-2 border-gray-200 dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-bold text-pink-600"},t),l.createElement("button",{onClick:r,"aria-label":"Fechar modal",className:"text-gray-600 hover:text-gray-800 dark:text-gray-200 dark:hover:text-gray-100 text-2xl"},"")),l.createElement("div",{className:"mb-6 overflow-y-auto flex-1 min-h-0"},e),s&&l.createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},s)))},oA=async t=>{if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(t);const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("copy")}finally{document.body.removeChild(e)}},aA=({isOpen:t,onClose:e,showToast:n,onSync:r,onUnsync:s,currentUid:i,isSynced:o})=>{const[a,u]=S.useState(""),c=async()=>{try{await oA(i||""),n("ID da Sesso copiado!","success")}catch{n("Falha ao copiar o ID.","error")}},d=()=>{if(!a.trim())return n("Por favor, cole um ID para sincronizar.","error");r(a.trim()),e()};return l.createElement(Ft,{isOpen:t,onClose:e,title:"Sincronizar Dispositivos",size:"max-w-xl"},l.createElement("div",{className:"space-y-6"},l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Use esta funo para acessar os mesmos dados em diferentes aparelhos."),l.createElement("div",{className:"p-4 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50"},l.createElement("h4",{className:"font-semibold text-lg mb-2"},"1. Copie o ID do Dispositivo Principal"),l.createElement("div",{className:"mt-4 text-center bg-pink-100 dark:bg-pink-900/40 p-3 rounded-lg flex items-center justify-between"},l.createElement("span",{className:"text-sm font-mono break-all text-pink-800 dark:text-pink-200"},i),l.createElement("button",{onClick:c,className:"ml-4 px-3 py-2 text-sm font-semibold bg-pink-500 text-white rounded-lg hover:bg-pink-600"},"Copiar"))),l.createElement("div",{className:"p-4 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50"},l.createElement("h4",{className:"font-semibold text-lg mb-2"},"2. Cole o ID no Novo Dispositivo"),l.createElement("div",{className:"flex space-x-2"},l.createElement("input",{type:"text",value:a,onChange:h=>u(h.target.value),placeholder:"Cole o ID da Sesso aqui",className:"w-full p-3 border border-gray-300 rounded-lg"}),l.createElement("button",{onClick:d,className:"px-6 py-2 font-semibold text-white rounded-lg bg-teal-500 hover:bg-teal-600"},"Sincronizar"))),o&&l.createElement("div",{className:"text-center pt-4 border-t"},l.createElement("button",{onClick:s,className:"px-4 py-2 text-sm font-semibold rounded-full bg-red-500 text-white"},"Desfazer Sincronizao neste Dispositivo"))))},lA=({message:t,type:e,onClose:n})=>{const r="fixed bottom-5 right-5 p-4 rounded-lg shadow-xl text-white font-semibold flex items-center space-x-3 transition-opacity duration-300 z-50";let s="";switch(e){case"success":s="bg-teal-500";break;case"error":s="bg-red-500";break;default:s="bg-gray-700"}return l.createElement("div",{className:`${r} ${s}`},l.createElement("span",null,t),l.createElement("button",{onClick:n,className:"ml-4 opacity-75 hover:opacity-100"},""))},uA=({onLogin:t})=>{const[e,n]=S.useState(""),[r,s]=S.useState(""),[i,o]=S.useState(!1),a="usemiamove@gmail.com",u=async d=>{if(d.preventDefault(),!e.trim()||!r.trim())return alert("Preencha email e senha");o(!0);try{const f=(await q_($n,e.trim(),r)).user,g=Te(Ht,"users",f.uid),v=await cu(g);if(!v.exists())if(f.email===a)try{await t1(g,{email:f.email,role:"master",createdAt:iA()})}catch(m){return console.error("Failed to create master user doc",m),await dl($n),o(!1),alert("Falha ao criar o perfil do usurio. Contate o administrador.")}else return await dl($n),o(!1),alert("Usurio autenticado, mas documento de perfil no encontrado. Contate o administrador.");const E=await cu(g),w=E.exists()?E.data():v.exists()?v.data():null;if(!w||w.role!=="master")return await dl($n),o(!1),alert("Acesso negado: usurio no tem permisso de master.");t&&t({uid:f.uid,email:f.email,displayName:f.displayName})}catch(h){console.error("Login error",h),alert("Falha no login: "+(h.message||h.code||"erro desconhecido"))}finally{o(!1)}};return l.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900"},l.createElement("div",{className:"absolute inset-0 overflow-hidden"},l.createElement("img",{src:"login-cat.svg",alt:"background",className:"w-full h-full object-cover opacity-30 dark:opacity-20"}),l.createElement("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/60 to-white/80 dark:from-transparent dark:via-gray-900/60 dark:to-gray-900/80"})),l.createElement("div",{className:"relative z-10 w-full max-w-md p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg"},l.createElement("h1",{className:"text-2xl font-extrabold text-pink-600 mb-2"},"Mia Move"),l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-300 mb-6"},"Entre com sua conta para continuar"),l.createElement("form",{onSubmit:u,className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email"),l.createElement("input",{type:"email",value:e,onChange:d=>n(d.target.value),className:"mt-1 w-full p-3 border rounded bg-white dark:bg-gray-700 dark:text-gray-50",placeholder:"vc@exemplo.com"})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Senha"),l.createElement("input",{type:"password",value:r,onChange:d=>s(d.target.value),className:"mt-1 w-full p-3 border rounded bg-white dark:bg-gray-700 dark:text-gray-50",placeholder:""})),l.createElement("div",{className:"flex items-center justify-between"},l.createElement("label",{className:"flex items-center text-sm"},l.createElement("input",{type:"checkbox",className:"mr-2"})," Lembrar"),l.createElement("a",{className:"text-sm text-pink-600 hover:underline",href:"#"},"Esqueci a senha")),l.createElement("button",{disabled:i,type:"submit",className:"w-full py-3 bg-pink-500 text-white font-bold rounded-lg"},i?"Entrando...":"Entrar")),l.createElement("p",{className:"text-sm text-center text-gray-500 mt-4"},"Ou cole a sesso principal no modal de Sincronizao para puxar os dados.")))},cA=({variants:t})=>{const r=S.useMemo(()=>{if(!t||t.length===0)return{full:{count:0,percentage:0},medium:{count:0,percentage:0},low:{count:0,percentage:0},outOfStock:{count:0,percentage:0},total:0};let i=0,o=0,a=0,u=0;t.forEach(d=>{d.quantity===0?u++:d.quantity<5?a++:d.quantity<10?o++:i++});const c=t.length;return{full:{count:i,percentage:i/c*100},medium:{count:o,percentage:o/c*100},low:{count:a,percentage:a/c*100},outOfStock:{count:u,percentage:u/c*100},total:c}},[t]),s=({percentage:i,color:o,radius:a,strokeWidth:u,label:c,count:d})=>{const h=2*Math.PI*a,f=h-i/100*h;return l.createElement("div",{className:"relative flex flex-col items-center justify-center"},l.createElement("svg",{className:"transform -rotate-90",width:a*2+u*2,height:a*2+u*2},l.createElement("circle",{className:"text-gray-200 dark:text-gray-700",stroke:"currentColor",strokeWidth:u,fill:"transparent",r:a,cx:a+u,cy:a+u}),l.createElement("circle",{className:o,stroke:"currentColor",strokeWidth:u,strokeLinecap:"round",fill:"transparent",r:a,cx:a+u,cy:a+u,style:{strokeDasharray:h,strokeDashoffset:f,transition:"stroke-dashoffset 0.5s ease-out"}})),l.createElement("div",{className:"absolute flex flex-col items-center"},l.createElement("span",{className:"text-xl font-bold"},d),l.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400"},c)))};return l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Viso Geral do Estoque"),r.total===0?l.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8"},"Nenhum item em estoque para exibir."):l.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center text-center"},l.createElement(s,{percentage:r.full.percentage,color:"text-green-500",radius:40,strokeWidth:8,label:"Estoque Cheio",count:r.full.count}),l.createElement(s,{percentage:r.medium.percentage,color:"text-blue-500",radius:40,strokeWidth:8,label:"Estoque Mdio",count:r.medium.count}),l.createElement(s,{percentage:r.low.percentage,color:"text-orange-500",radius:40,strokeWidth:8,label:"Estoque Baixo",count:r.low.count}),l.createElement(s,{percentage:r.outOfStock.percentage,color:"text-red-500",radius:40,strokeWidth:8,label:"Esgotado",count:r.outOfStock.count})))},gs="w-full p-2 border border-gray-300 rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 text-sm",dA=({variant:t,index:e,onChange:n,onRemove:r,showRemove:s,applyToAll:i})=>{const o=a=>n(e,a);return l.createElement("div",{className:"p-3 border dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 relative"},l.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 items-end"},l.createElement("div",null,l.createElement("label",{className:"block text-xs font-medium"},"SKU*:"),l.createElement("input",{type:"text",name:"sku",value:t.sku,onChange:o,required:!0,className:gs})),l.createElement("div",null,l.createElement("label",{className:"block text-xs font-medium"},"Tamanho:"),l.createElement("input",{type:"text",name:"size",value:t.size,onChange:o,className:gs})),l.createElement("div",null,l.createElement("label",{className:"block text-xs font-medium"},"Cor:"),l.createElement("input",{type:"text",name:"color",value:t.color,onChange:o,className:gs})),l.createElement("div",null,l.createElement("label",{className:"block text-xs font-medium"},"Qtd*:"),l.createElement("input",{type:"number",name:"quantity",value:t.quantity,onChange:o,required:!0,min:"0",className:gs})),l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"flex-grow"},l.createElement("label",{className:"block text-xs font-medium"},"Custo (R$):"),l.createElement("input",{type:"number",name:"costPrice",value:t.costPrice,onChange:o,step:"0.01",min:"0",className:gs}))),l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"flex-grow"},l.createElement("label",{className:"block text-xs font-medium"},"Venda (R$)*:"),l.createElement("input",{type:"number",name:"salePrice",value:t.salePrice,onChange:o,required:!0,step:"0.01",min:"0.01",className:gs})))),s&&l.createElement("button",{type:"button",onClick:()=>r(e),className:"absolute top-2 right-2 text-red-500 hover:text-red-700 text-lg font-bold"},""),i&&i.show&&l.createElement("div",{className:"absolute top-2 left-2 flex space-x-1"},i.fields.map(a=>l.createElement("button",{key:a.key,type:"button",title:`Aplicar ${a.label} para todos`,onClick:()=>i.onApply(a.key,t[a.key]),className:"p-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"}))))))},Ry="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",hA=({isOpen:t,onClose:e,variant:n,onAdjust:r})=>{const[s,i]=S.useState((n==null?void 0:n.quantity)||0),[o,a]=S.useState(""),u=["Avaria","Perda","Acerto de contagem","Devoluo","Outro"];return S.useEffect(()=>{i((n==null?void 0:n.quantity)||0),a("")},[n,t]),l.createElement(Ft,{isOpen:t,onClose:e,title:`Ajustar Estoque: ${(n==null?void 0:n.productName)||""}`,size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:()=>r(parseInt(s,10),o),className:"px-4 py-2 text-white rounded-full bg-pink-500"},"Confirmar Ajuste"))},l.createElement("div",{className:"space-y-4"},l.createElement("p",null,"Variao: ",l.createElement("strong",null,n==null?void 0:n.size," - ",n==null?void 0:n.color)," (SKU: ",n==null?void 0:n.sku,")"),l.createElement("p",null,"Quantidade Atual: ",l.createElement("strong",null,n==null?void 0:n.quantity)),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Nova Quantidade:"),l.createElement("input",{type:"number",value:s,onChange:c=>i(c.target.value),className:Ry,min:"0"})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Motivo do Ajuste:"),l.createElement("select",{value:o,onChange:c=>a(c.target.value),className:Ry},l.createElement("option",{value:""},"Selecione um motivo"),u.map(c=>l.createElement("option",{key:c,value:c},c))))))},fA=({isOpen:t,onClose:e,variant:n,movements:r=[]})=>{const s=i=>{switch(i){case"venda":return l.createElement("span",{className:"text-red-600 font-semibold"},"Venda");case"estorno":return l.createElement("span",{className:"text-blue-600 font-semibold"},"Estorno");case"ajuste_entrada":return l.createElement("span",{className:"text-green-600 font-semibold"},"Ajuste (Entrada)");case"ajuste_saida":return l.createElement("span",{className:"text-orange-600 font-semibold"},"Ajuste (Sada)");case"saida_defeito":return l.createElement("span",{className:"text-yellow-600 font-semibold"},"Sada (Defeito)");default:return i}};return l.createElement(Ft,{isOpen:t,onClose:e,title:`Histrico: ${(n==null?void 0:n.productName)||""} (${(n==null?void 0:n.size)||""} - ${(n==null?void 0:n.color)||""})`,size:"max-w-2xl"},l.createElement("div",{className:"max-h-[60vh] overflow-y-auto"},l.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},l.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Data"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Tipo"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Alterao"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Saldo Final"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Motivo / Venda ID"))),l.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},r.map((i,o)=>l.createElement("tr",{key:o},l.createElement("td",{className:"px-3 py-4 text-sm"},i.date.toDate().toLocaleString("pt-BR")),l.createElement("td",{className:"px-3 py-4 text-sm"},s(i.type)),l.createElement("td",{className:`px-3 py-4 text-sm font-bold ${i.type==="ajuste_entrada"||i.type==="estorno"?"text-green-600":"text-red-600"}`},i.type==="ajuste_entrada"||i.type==="estorno"?`+${i.quantityChange}`:`-${i.quantityChange}`),l.createElement("td",{className:"px-3 py-4 text-sm font-bold"},i.newQuantity),l.createElement("td",{className:"px-3 py-4 text-sm"},i.reason||i.saleId)))))))},rd="bg-pink-500 hover:bg-pink-600",mA="bg-teal-500 hover:bg-teal-600",pA="bg-red-500 hover:bg-red-600",gA="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",Lr="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 dark:placeholder-gray-400",ys={sku:"",size:"",color:"",quantity:0,costPrice:0,salePrice:0},yA=({db:t,userId:e,products:n=[],showToast:r=()=>{},categories:s=[]})=>{const i=!!t&&!!e,[o,a]=S.useState(!1),[u,c]=S.useState(null),[d,h]=S.useState(!1),[f,g]=S.useState(null),[v,E]=S.useState(!1),[w,m]=S.useState(null),[p,y]=S.useState(!1),[k,I]=S.useState(null),[L,z]=S.useState([]),[M,Q]=S.useState("all"),[A,N]=S.useState(!1),[O,K]=S.useState(s||[]),[re,D]=S.useState(""),[R,b]=S.useState({name:"",categoryId:"",variants:[ys]}),[x,C]=S.useState(""),[j,T]=S.useState(""),[$,ne]=S.useState("");S.useEffect(()=>{b(u?{name:u.name||"",categoryId:u.categoryId||"",variants:u.variants&&u.variants.length>0?u.variants:[ys]}:{name:"",categoryId:"",variants:[ys]})},[u]),S.useEffect(()=>{K(s||[])},[s]);const ye=P=>b(Y=>({...Y,[P.target.name]:P.target.value})),je=(P,Y)=>{const{name:oe,value:ve}=Y.target,le=[...R.variants];le[P]={...le[P],[oe]:ve},b(It=>({...It,variants:le}))},$e=()=>b(P=>({...P,variants:[...P.variants,ys]})),rt=P=>b(Y=>({...Y,variants:Y.variants.filter((oe,ve)=>ve!==P)})),Cn=(P,Y)=>{b(oe=>({...oe,variants:oe.variants.map(ve=>({...ve,[P]:Y}))}))},uc=()=>{const P=x.split(",").map(le=>le.trim()).filter(Boolean),Y=j.split(",").map(le=>le.trim()).filter(Boolean);if(P.length===0&&Y.length===0)return r("Informe cores e/ou tamanhos para gerar variaes.","error");const oe=[];P.length>0&&Y.length>0?P.forEach(le=>Y.forEach(It=>oe.push({color:le,size:It}))):P.length>0?P.forEach(le=>oe.push({color:le,size:""})):Y.length>0&&Y.forEach(le=>oe.push({color:"",size:le}));const ve=oe.map((le,It)=>{const fs=String(It+1).padStart(3,"0"),_i=le.color?le.color.replace(/\s+/g,"").toUpperCase().slice(0,6):"",Sa=le.size?le.size.replace(/\s+/g,"").toUpperCase().slice(0,6):"",In=[];$&&In.push($.replace(/\s+/g,"").toUpperCase()),_i&&In.push(_i),Sa&&In.push(Sa),In.push(fs);const Ci=In.join("-");return{...ys,sku:Ci,color:le.color,size:le.size}});b(le=>({...le,variants:ve.length>0?ve:[ys]})),r("Variaes geradas.","success")},U=async P=>{if(P.preventDefault(),!R.name.trim())return r("O nome do produto  obrigatrio.","error");if(R.variants.some(oe=>!oe.sku.trim()||parseFloat(oe.salePrice)<=0))return r("Todas as variaes devem ter SKU e Preo de Venda vlidos.","error");if(!i){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}const Y=kt(t,Ee(e,"products"));try{const oe={...R,variants:R.variants.map(ve=>({...ve,quantity:parseInt(ve.quantity,10)||0,costPrice:parseFloat(ve.costPrice)||0,salePrice:parseFloat(ve.salePrice)||0})),updatedAt:ae.now()};u?(await ci(Te(Y,u.id),oe),r("Produto atualizado!","success")):(await as(Y,{...oe,createdAt:ae.now()}),r("Novo produto adicionado!","success")),a(!1),c(null)}catch(oe){console.error("Erro ao salvar o produto:",oe),r("Erro ao salvar produto.","error")}},ge=P=>{g(P),h(!0)},Be=async()=>{if(f){if(!i){r("Firestore no configurado. Faa login com uma conta vlida.","error"),h(!1),g(null);return}try{await di(Te(t,Ee(e,"products"),f.id)),r(`Produto ${f.name} excludo.`,"success")}catch(P){console.error("Erro ao deletar produto:",P),r("Erro ao deletar produto.","error")}finally{h(!1),g(null)}}},Le=(P=null)=>{c(P),a(!0)},cn=P=>{m(P),E(!0)},st=async P=>{if(I(P),!i){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{const Y=kt(t,Ee(e,"stockMovements")),oe=Ph(Y),le=(await Mh(oe)).docs.map(It=>It.data()).filter(It=>It.variantSku===P.sku).sort((It,fs)=>fs.date.seconds-It.date.seconds);z(le),y(!0)}catch(Y){console.error("Erro ao buscar histrico:",Y),r("Erro ao buscar histrico.","error")}},dn=async(P,Y)=>{if(!w||Y.trim()==="")return r("Nova quantidade e motivo so obrigatrios.","error");if(!i){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{const oe=Te(t,Ee(e,"products"),w.productId),ve=n.find(Ci=>Ci.id===w.productId),le=ve.variants.findIndex(Ci=>Ci.sku===w.sku);if(le===-1)return;const It=ve.variants[le].quantity,fs=P-It,_i=[...ve.variants];_i[le].quantity=P;const Sa={date:ae.now(),productId:w.productId,productName:w.productName,variantSku:w.sku,type:fs>0?"ajuste_entrada":"ajuste_saida",quantityChange:Math.abs(fs),reason:Y,oldQuantity:It,newQuantity:P},In=Ym(t);In.update(oe,{variants:_i}),In.set(Te(kt(t,Ee(e,"stockMovements"))),Sa),await In.commit(),r("Estoque ajustado com sucesso!","success"),E(!1),m(null)}catch(oe){console.error("Erro ao ajustar estoque:",oe),r("Erro ao ajustar estoque.","error")}},xa=async()=>{if(!re.trim())return r("Preencha o nome da categoria.","error");const P=re.trim();if(!i){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{const Y=kt(t,Ee(e,"categories")),ve={id:(await as(Y,{name:P,createdAt:ae.now()})).id,name:P};K(le=>[...le,ve]),D(""),r("Categoria adicionada!","success")}catch(Y){console.error("Erro ao adicionar categoria",Y),r("Erro ao adicionar categoria.","error")}},Ni=async P=>{if(P){if(!i){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{await di(Te(t,Ee(e,"categories"),P.id)),K(Y=>Y.filter(oe=>oe.id!==P.id)),r("Categoria removida!","success")}catch(Y){console.error("Erro ao deletar categoria",Y),r("Erro ao excluir categoria.","error")}}},$r=S.useMemo(()=>(n||[]).filter(P=>M==="all"||P.categoryId===M).flatMap(P=>(P.variants||[]).map(Y=>{var oe;return{...Y,productId:P.id,productName:P.name,category:((oe=O.find(ve=>ve.id===P.categoryId))==null?void 0:oe.name)||"Sem Categoria"}})),[n,O,M]),Bt=S.useMemo(()=>$r.filter(P=>P.quantity<5),[$r]);return l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},l.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Estoque Mia Move"),l.createElement("div",{className:"flex items-center space-x-2 mt-4 md:mt-0"},l.createElement("select",{value:M,onChange:P=>Q(P.target.value),className:Lr+" max-w-xs"},l.createElement("option",{value:"all"},"Todas as Categorias"),O.map(P=>l.createElement("option",{key:P.id,value:P.id},P.name))),l.createElement("button",{onClick:()=>N(!0),className:"px-4 py-3 text-pink-600 dark:text-pink-300 font-semibold bg-pink-100 dark:bg-pink-900/40 rounded-lg hover:bg-pink-200 dark:hover:bg-pink-900/60 whitespace-nowrap"},"Gerenciar Categorias"),l.createElement("button",{onClick:()=>Le(),className:`px-4 py-3 text-white font-semibold rounded-lg ${rd} shadow-md whitespace-nowrap`},"+ Novo Produto"))),l.createElement(cA,{variants:$r}),Bt.length>0&&l.createElement("div",{className:"bg-orange-100 dark:bg-orange-900/40 border-l-4 border-orange-500 p-4 rounded-xl shadow-md"},l.createElement("p",{className:"font-bold text-orange-800 dark:text-orange-200"}," ",Bt.length," Variae(s) com Estoque Baixo!")),l.createElement("div",{className:`${gA}`},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Variaes em Estoque (",$r.length,")"),l.createElement("div",{className:"overflow-x-auto"},l.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},l.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Produto / Categoria"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"SKU"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Variao"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qtd"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Venda"),l.createElement("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Aes"))),l.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},$r.map((P,Y)=>{var ve;const oe=n.find(le=>le.id===P.productId);return l.createElement("tr",{key:`${P.productId}-${P.sku}-${Y}`,className:P.quantity<5?"bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50":"hover:bg-gray-50 dark:hover:bg-gray-700"},l.createElement("td",{className:"px-3 py-4 text-sm font-medium"},P.productName," ",l.createElement("span",{className:"block text-xs text-gray-500 dark:text-gray-400"},P.category)),l.createElement("td",{className:"px-3 py-4 text-sm"},P.sku),l.createElement("td",{className:"px-3 py-4 text-sm text-gray-600 dark:text-gray-300"},P.size," - ",P.color),l.createElement("td",{className:"px-3 py-4 text-sm font-bold"},P.quantity),l.createElement("td",{className:"px-3 py-4 text-sm font-semibold text-teal-600 dark:text-teal-400"},(ve=P.salePrice)!=null&&ve.toLocaleString?P.salePrice.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):`R$ ${P.salePrice}`),l.createElement("td",{className:"px-3 py-4 text-right text-sm font-medium space-x-2"},l.createElement("button",{onClick:()=>st(P),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100"},"Histrico"),l.createElement("button",{onClick:()=>cn(P),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},"Ajustar"),l.createElement("button",{onClick:()=>Le(oe),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},"Editar"),l.createElement("button",{onClick:()=>ge(oe),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},"Excluir")))}))))),l.createElement(Ft,{isOpen:o,onClose:()=>a(!1),title:u?"Editar Produto":"Adicionar Novo Produto",size:"max-w-3xl",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:U,className:`px-5 py-2 text-white rounded-full ${rd}`},u?"Salvar Alteraes":"Adicionar Produto"))},l.createElement("form",{className:"space-y-6"},l.createElement("div",{className:"p-4 border dark:border-gray-700 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Nome do Produto:"),l.createElement("input",{type:"text",name:"name",value:R.name,onChange:ye,required:!0,className:Lr})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Categoria:"),l.createElement("select",{name:"categoryId",value:R.categoryId,onChange:ye,className:Lr},l.createElement("option",{value:""},"Selecione uma categoria"),O.map(P=>l.createElement("option",{key:P.id,value:P.id},P.name))))),!u&&l.createElement("div",{className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700/50"},l.createElement("h4",{className:"font-semibold text-lg mb-3 text-gray-700 dark:text-gray-200"},"Gerador de Variaes em Massa"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3 items-start"},l.createElement("div",{className:"flex flex-col"},l.createElement("label",{className:"block text-sm font-medium mb-2 min-h-[2.1rem] leading-tight"},"Cores (separadas por vrgula):"),l.createElement("input",{type:"text",value:x,onChange:P=>C(P.target.value),placeholder:"Preto, Azul, Rosa",className:Lr+" h-10 text-sm"})),l.createElement("div",{className:"flex flex-col"},l.createElement("label",{className:"block text-sm font-medium mb-2 min-h-[2.1rem] leading-tight"},"Tamanhos (separadas por vrgula):"),l.createElement("input",{type:"text",value:j,onChange:P=>T(P.target.value),placeholder:"P, M, G",className:Lr+" h-10 text-sm"})),l.createElement("div",{className:"flex flex-col"},l.createElement("label",{className:"block text-sm font-medium mb-2 min-h-[2.1rem] leading-tight"},"Prefixo do SKU (Opcional):"),l.createElement("input",{type:"text",value:$,onChange:P=>ne(P.target.value),placeholder:"LEG-FLARE",className:Lr+" h-10 text-sm"}))),l.createElement("button",{type:"button",onClick:uc,className:`w-full text-center py-3 text-sm font-semibold text-white rounded-full ${mA} transition`},"Gerar Variaes")),l.createElement("div",{className:"space-y-4"},l.createElement("h4",{className:"font-semibold text-lg text-gray-700 dark:text-gray-200"},"Variaes do Produto"),l.createElement("div",{className:"max-h-[40vh] overflow-y-auto space-y-4 pr-2 border-t border-b py-4 dark:border-gray-700"},R.variants.map((P,Y)=>l.createElement(dA,{key:Y,variant:P,index:Y,onChange:je,onRemove:rt,showRemove:R.variants.length>1,applyToAll:Y===0&&R.variants.length>1?{show:!0,fields:[{key:"costPrice",label:"Custo"},{key:"salePrice",label:"Venda"}],onApply:Cn}:null}))),l.createElement("button",{type:"button",onClick:$e,className:"w-full text-center py-2 text-sm font-semibold text-pink-600 dark:text-pink-400 border-2 border-dashed border-pink-300 dark:border-pink-500 rounded-lg hover:bg-pink-50 dark:hover:bg-pink-900/30 transition"},"+ Adicionar Variao Manualmente")))),l.createElement(Ft,{isOpen:d,onClose:()=>h(!1),title:"Confirmar Excluso",size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:Be,className:`px-4 py-2 text-white rounded-full ${pA}`},"Excluir"))},l.createElement("p",null,"Voc tem certeza que deseja deletar o produto ",l.createElement("strong",null,f==null?void 0:f.name)," e todas as suas variaes?")),w&&l.createElement(hA,{isOpen:v,onClose:()=>E(!1),variant:w,onAdjust:dn}),k&&l.createElement(fA,{isOpen:p,onClose:()=>y(!1),variant:k,movements:L}),l.createElement(Ft,{isOpen:A,onClose:()=>N(!1),title:"Gerenciar Categorias",size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Fechar"),l.createElement("button",{onClick:()=>{xa()},className:`px-4 py-2 text-white rounded-full ${rd}`},"Adicionar"))},l.createElement("div",{className:"space-y-4"},l.createElement("input",{type:"text",placeholder:"Nome da nova categoria",value:re,onChange:P=>D(P.target.value),className:Lr}),l.createElement("div",{className:"space-y-2"},O.length===0&&l.createElement("p",{className:"text-gray-500"},"Nenhuma categoria cadastrada."),O.map(P=>l.createElement("div",{key:P.id,className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded"},l.createElement("div",{className:"text-sm"},P.name),l.createElement("div",{className:"space-x-2"},l.createElement("button",{onClick:()=>{Q(P.id),N(!1)},className:"text-sm text-teal-600"},"Selecionar"),l.createElement("button",{onClick:()=>Ni(P),className:"text-sm text-red-600"},"Excluir"))))))))},fe=t=>{const e=typeof t=="number"?t:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},sd=t=>new Intl.NumberFormat("pt-BR").format(t),bn=t=>{const e=new Date(t);return e.setHours(0,0,0,0),e},fn="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",vA="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",EA=({db:t,userId:e,products:n=[],sales:r=[],customers:s=[],showToast:i=()=>{}})=>{const[o,a]=S.useState("new"),[u,c]=S.useState(""),[d,h]=S.useState([]),[f,g]=S.useState(""),[v,E]=S.useState(!1),[w,m]=S.useState("Carto de Crdito"),[p,y]=S.useState(0),[k,I]=S.useState(0),[L,z]=S.useState(1),[M,Q]=S.useState("recebido"),[A,N]=S.useState(""),[O,K]=S.useState(""),[re,D]=S.useState(""),[R,b]=S.useState(""),x=S.useMemo(()=>(n||[]).flatMap(U=>(U.variants||[]).map(ge=>({...ge,productId:U.id,productName:U.name}))).filter(U=>U.productName.toLowerCase().includes(f.toLowerCase())||U.color.toLowerCase().includes(f.toLowerCase())||U.size.toLowerCase().includes(f.toLowerCase())||U.sku.toLowerCase().includes(f.toLowerCase())),[n,f]),{subtotal:C,costOfGoodsSold:j,totalAfterDiscount:T,feeAmount:$,finalTotal:ne}=S.useMemo(()=>{const U=d.reduce((st,dn)=>st+dn.salePrice*dn.quantity,0),ge=d.reduce((st,dn)=>st+dn.costPrice*dn.quantity,0),Be=U*(1-p/100);let Le=0;w==="Carto de Crdito"&&k>0&&(Le=Be*(k/100));const cn=Be+Le;return{subtotal:U,costOfGoodsSold:ge,totalAfterDiscount:Be,feeAmount:Le,finalTotal:cn}},[d,p,k,w]),ye=C-T,je=S.useMemo(()=>{const U=u.trim().toLowerCase();return(r||[]).filter(ge=>!!(!U||(ge.id||"").toLowerCase().includes(U)||(ge.customerName||"").toLowerCase().includes(U)||ge.items&&ge.items.some(Be=>(Be.productName||"").toLowerCase().includes(U)||(Be.sku||"").toLowerCase().includes(U))))},[r,u]),$e=U=>{const ge=d.find(Be=>Be.sku===U.sku);ge?ge.quantity<U.quantity?h(Be=>Be.map(Le=>Le.sku===U.sku?{...Le,quantity:Le.quantity+1}:Le)):i("Estoque insuficiente.","error"):h(Be=>[...Be,{productId:U.productId,productName:U.productName,sku:U.sku,size:U.size,color:U.color,quantity:1,salePrice:U.salePrice,costPrice:U.costPrice,stockQuantity:U.quantity}]),g("")},rt=(U,ge)=>h(Be=>Be.map(Le=>Le.sku===U?{...Le,quantity:Math.min(Math.max(1,ge),Le.stockQuantity)}:Le)),Cn=U=>h(ge=>ge.filter(Be=>Be.sku!==U)),uc=async()=>{if(d.length===0)return i("O carrinho est vazio.","error");if(M==="a_receber"&&!O.trim())return i("Digite um nome de cliente para vendas a receber.","error");if(M==="a_receber"&&!A)return i("Preencha a data de vencimento.","error");E(!0);try{if(console.log("processSale start",{selectedItems:d,subtotal:C,finalTotal:ne,paymentStatus:M}),i("Iniciando processamento da venda...","info"),!t||!e){i("Firestore no configurado. Faa login com uma conta vlida.","error"),E(!1);return}else try{const U=kt(t,Ee(e,"sales")),ge={items:d,subtotal:C,discountPercentage:p,totalDiscount:ye,feeAmount:$,finalTotal:ne,paymentMethod:w,paymentStatus:M,dueDate:M==="a_receber"&&A?ae.fromDate(new Date(A)):null,customerName:O,customerWhatsapp:R,saleNotes:re,installments:L,createdAt:ae.now(),updatedAt:ae.now()},Be=await as(U,ge),Le=Ym(t),cn={};d.forEach(st=>{cn[st.productId]||(cn[st.productId]=[]),cn[st.productId].push({sku:st.sku,qty:st.quantity})});for(const st of Object.keys(cn)){const dn=Te(t,Ee(e,"products"),st),xa=await cu(dn);if(!xa.exists())continue;const Ni=xa.data(),$r=(Ni.variants||[]).map(Bt=>{const P=cn[st].find(Y=>Y.sku===Bt.sku);if(P){const Y=parseInt(Bt.quantity||0,10);return{...Bt,quantity:Math.max(0,Y-P.qty)}}return Bt});Le.update(dn,{variants:$r,updatedAt:ae.now()}),cn[st].forEach(Bt=>{const P=(Ni.variants||[]).find(le=>le.sku===Bt.sku),Y=P?parseInt(P.quantity||0,10):0,oe=Math.max(0,Y-Bt.qty),ve=Te(kt(t,Ee(e,"stockMovements")));Le.set(ve,{date:ae.now(),productId:st,productName:Ni.name,variantSku:Bt.sku,type:"venda",quantityChange:Bt.qty,oldQuantity:Y,newQuantity:oe})})}await Le.commit(),i(`Venda registrada: ${fe(ne)}`,"success"),h([]),y(0),m("Carto de Crdito"),Q("recebido"),N(""),K(""),D(""),I(0),z(1),b("")}catch(U){console.error("Erro ao processar venda com Firebase:",U),i("Erro ao processar a venda (Firebase).","error")}}catch(U){console.error("Erro ao processar a venda:",U),i("Erro ao processar a venda.","error")}finally{E(!1)}};return l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},l.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Vendas"),l.createElement("div",{className:"flex rounded-lg shadow-sm border border-gray-300 dark:border-gray-600 mt-4 md:mt-0"},l.createElement("button",{onClick:()=>a("new"),className:`px-4 py-2 font-semibold rounded-l-lg transition ${o==="new"?"bg-pink-500 text-white":"bg-white dark:bg-gray-700 hover:bg-gray-50"}`},"Nova Venda"),l.createElement("button",{onClick:()=>a("history"),className:`px-4 py-2 font-semibold rounded-r-lg transition ${o==="history"?"bg-pink-500 text-white":"bg-white dark:bg-gray-700 hover:bg-gray-50"}`},"Histrico de Vendas"))),o==="new"&&l.createElement("div",{className:"grid lg:grid-cols-3 gap-6"},l.createElement("div",{className:"lg:col-span-1 space-y-4"},l.createElement("h3",{className:"text-xl font-bold"},"1. Adicionar Produtos"),l.createElement("input",{type:"text",placeholder:"Buscar produto...",value:f,onChange:U=>g(U.target.value),className:fn}),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow max-h-[500px] overflow-y-auto"},(x||[]).map(U=>l.createElement("div",{key:U.sku,className:"flex justify-between items-center p-3 border rounded-xl mb-2"},l.createElement("div",null,l.createElement("p",{className:"font-medium"},U.productName," (",U.size," - ",U.color,")"),l.createElement("p",{className:"text-sm text-gray-500"},"Qtd: ",U.quantity," | ",fe(U.salePrice))),l.createElement("button",{onClick:()=>$e(U),className:"p-2 bg-teal-500 text-white rounded-full"},"+"))))),l.createElement("div",{className:"lg:col-span-2 space-y-4"},l.createElement("h3",{className:"text-xl font-bold"},"2. Finalizar Venda"),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow"},l.createElement("h3",{className:"font-semibold text-xl mb-4"},"Resumo da Venda"),d.length===0?l.createElement("p",{className:"text-gray-500 text-center py-8"},"O carrinho est vazio."):l.createElement("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 mb-4 border-b pb-4"},d.map(U=>l.createElement("div",{key:U.sku,className:"flex items-center justify-between border-b pb-2"},l.createElement("div",null,l.createElement("p",{className:"font-medium"},U.productName," (",U.size," - ",U.color,")"),l.createElement("p",{className:"text-sm text-gray-500"},fe(U.salePrice)," x ",U.quantity)),l.createElement("div",{className:"flex items-center space-x-2"},l.createElement("input",{type:"number",min:"1",max:U.stockQuantity,value:U.quantity,onChange:ge=>rt(U.sku,parseInt(ge.target.value,10)),className:"w-16 p-1 text-center border rounded-lg text-sm"}),l.createElement("button",{onClick:()=>Cn(U.sku),className:"text-red-500"},"Remover"))))),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Nome da Cliente"),l.createElement("input",{type:"text",value:O,onChange:U=>K(U.target.value),className:fn,placeholder:"Para venda annima, deixe em branco"})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Contato WhatsApp (Opcional)"),l.createElement("input",{type:"tel",value:R,onChange:U=>b(U.target.value),className:fn,placeholder:"Ser salvo no cadastro"}))),l.createElement("div",{className:"grid grid-cols-2 gap-4 mt-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Pagamento:"),l.createElement("select",{value:w,onChange:U=>m(U.target.value),className:fn},l.createElement("option",null,"Carto de Crdito"),l.createElement("option",null,"PIX"),l.createElement("option",null,"Dinheiro"),l.createElement("option",null,"Dbito"),l.createElement("option",null,"Outro"))),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Desconto (%):"),l.createElement("input",{type:"number",min:"0",max:"100",value:p,onChange:U=>y(parseFloat(U.target.value)||0),className:fn}))),w==="Carto de Crdito"&&l.createElement("div",{className:"grid grid-cols-2 gap-4 mt-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Juros da Maquininha (%):"),l.createElement("input",{type:"number",min:"0",value:k,onChange:U=>I(parseFloat(U.target.value)||0),className:fn})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"N de Parcelas:"),l.createElement("input",{type:"number",min:"1",value:L,onChange:U=>z(parseInt(U.target.value,10)||1),className:fn}))),l.createElement("div",{className:"grid grid-cols-1 gap-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"Status:"),l.createElement("div",{className:"flex rounded-lg shadow-sm mt-2"},l.createElement("button",{type:"button",onClick:()=>Q("recebido"),className:`w-full py-2 text-sm font-semibold rounded-l-lg transition ${M==="recebido"?"bg-teal-500 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`}," Recebido"),l.createElement("button",{type:"button",onClick:()=>Q("a_receber"),className:`w-full py-2 text-sm font-semibold rounded-r-lg transition ${M==="a_receber"?"bg-yellow-500 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`}," A Receber"))),M==="a_receber"&&l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mt-2"},"Vencimento:"),l.createElement("input",{type:"date",value:A,onChange:U=>N(U.target.value),className:fn,min:new Date().toISOString().split("T")[0]})),l.createElement("div",null,l.createElement("label",{htmlFor:"saleNotes",className:"block text-sm font-medium mt-2"},"Observaes:"),l.createElement("textarea",{id:"saleNotes",value:re,onChange:U=>D(U.target.value),className:fn,rows:"2",placeholder:"Detalhes da venda (ex: embrulhar para presente)..."}))),l.createElement("div",{className:"mt-4 border-t pt-4"},l.createElement("div",{className:"flex justify-between text-base text-gray-500"},l.createElement("span",null,"Subtotal:"),l.createElement("span",null,fe(C))),l.createElement("div",{className:"flex justify-between text-base text-red-500 font-medium"},l.createElement("span",null,"Desconto:"),l.createElement("span",null,"- ",fe(ye))),$>0&&l.createElement("div",{className:"flex justify-between text-base text-yellow-600 font-medium"},l.createElement("span",null,"Juros Carto:"),l.createElement("span",null,"+ ",fe($))),l.createElement("div",{className:"flex justify-between text-2xl font-bold text-gray-800 pt-2 border-t"},l.createElement("span",null,"Total:"),l.createElement("span",{className:"text-pink-600"},fe(ne))),l.createElement("button",{onClick:uc,disabled:d.length===0||v||ne<=0,className:"mt-4 w-full py-3 text-white font-bold rounded-full bg-pink-500"},v?"Processando...":"Finalizar Venda"))))),o==="history"&&l.createElement("div",{className:"space-y-4"},l.createElement("input",{type:"text",placeholder:"Buscar por ID da Venda, Cliente ou Produto...",value:u,onChange:U=>c(U.target.value),className:fn}),l.createElement("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto pr-2"},je.map(U=>l.createElement("div",{key:U.id,className:`${vA} border-l-4 ${U.paymentStatus==="estornada"?"border-gray-400":"border-teal-500"}`},l.createElement("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center"},l.createElement("div",null,l.createElement("p",{className:"text-sm text-gray-500"},"ID: ",U.id.substring(0,8),"... | Data: ",new Date(U.createdAt).toLocaleString("pt-BR")),l.createElement("p",{className:"font-semibold text-lg"},U.customerName||"Venda Annima"," ",l.createElement("span",{className:"text-sm text-gray-500"},"- ",U.paymentMethod))),l.createElement("div",{className:"text-right"},l.createElement("p",{className:"text-xl font-bold text-pink-600"},fe(U.finalTotal)),l.createElement("p",{className:"text-sm text-gray-500"},U.items.length," item(s)"))),l.createElement("div",{className:"mt-3"},U.items.map(ge=>l.createElement("div",{key:ge.sku,className:"flex justify-between text-sm border-b py-1"},l.createElement("div",null,ge.productName," (",ge.size," - ",ge.color,")"),l.createElement("div",null,ge.quantity," x ",fe(ge.salePrice)))),U.saleNotes&&l.createElement("p",{className:"mt-2"},l.createElement("strong",null,"Observaes:")," ",U.saleNotes)))),je.length===0&&l.createElement("p",{className:"text-center text-gray-500"},"Nenhuma venda encontrada."))))},Jn="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",wA=({db:t,userId:e,customers:n=[],sales:r=[],showToast:s=()=>{}})=>{const[i,o]=S.useState("list"),[a,u]=S.useState(null),[c,d]=S.useState(!1),[h,f]=S.useState(null),[g,v]=S.useState(!1),[E,w]=S.useState(null),[m,p]=S.useState(""),y={name:"",phone:"",email:"",birthday:"",preferences:"",tags:""},[k,I]=S.useState(y);S.useEffect(()=>{I(h?{name:h.name||"",phone:h.phone||"",email:h.email||"",birthday:h.birthday||"",preferences:h.preferences||"",tags:(h.tags||[]).join(", ")}:y)},[h]);const L=(O=null)=>{f(O),d(!0)},z=async O=>{if(O.preventDefault(),!k.name.trim())return s("O nome da cliente  obrigatrio.","error");if(!t||!e){s("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{const K=kt(t,Ee(e,"customers")),re={...k,tags:k.tags?k.tags.split(",").map(D=>D.trim()).filter(Boolean):[],updatedAt:ae.now()};h?(await ci(Te(K,h.id),re),s("Cliente atualizada!","success")):(await as(K,{...re,createdAt:ae.now()}),s("Nova cliente adicionada!","success")),d(!1),f(null)}catch(K){console.error("Erro ao salvar cliente:",K),s("Erro ao salvar cliente.","error")}},M=O=>{w(O),v(!0)},Q=async()=>{if(E){if(!t||!e){s("Firestore no configurado. Faa login com uma conta vlida.","error"),v(!1),w(null),i==="profile"&&(a==null?void 0:a.id)===E.id&&(o("list"),u(null));return}try{const O=kt(t,Ee(e,"customers"));await di(Te(O,E.id)),s("Cliente excluda!","success")}catch(O){console.error("Erro ao deletar cliente:",O),s("Erro ao excluir cliente.","error")}finally{v(!1),w(null),i==="profile"&&(a==null?void 0:a.id)===E.id&&(o("list"),u(null))}}},A=S.useMemo(()=>(n||[]).filter(O=>O.name.toLowerCase().includes(m.toLowerCase())||O.phone&&O.phone.includes(m)||O.tags&&O.tags.some(K=>K.toLowerCase().includes(m.toLowerCase()))),[n,m]),N=({customer:O})=>{const[K,re]=S.useState([]),[D,R]=S.useState(""),[b,x]=S.useState(null),C=S.useMemo(()=>(r||[]).filter(T=>T.customerId===O.id).sort((T,$)=>{var ne,ye;return((ne=$.date)==null?void 0:ne.seconds)-((ye=T.date)==null?void 0:ye.seconds)}),[r,O.id]);S.useMemo(()=>{var ne;const T=C.reduce((ye,je)=>ye+je.totalAmount,0),$=C.length>0?(ne=C[0].date)==null?void 0:ne.toDate():null;return{totalSpent:T,lastPurchase:$}},[C]),S.useEffect(()=>{(async()=>{if(!t||!e){re([]);return}try{const $=kt(Te(t,Ee(e,"customers"),O.id),"notes"),ye=(await Mh($)).docs.map(je=>({id:je.id,...je.data()}));re(ye.sort((je,$e)=>{var rt,Cn;return(((rt=$e.createdAt)==null?void 0:rt.seconds)||0)-(((Cn=je.createdAt)==null?void 0:Cn.seconds)||0)}))}catch($){console.error("Erro ao carregar notas:",$),re([])}})()},[O.id,t,e]);const j=async()=>{if(D.trim()){if(!t||!e){s("Firestore no configurado. Faa login com uma conta vlida.","error");return}try{const T=kt(Te(t,Ee(e,"customers"),O.id),"notes");await as(T,{text:D.trim(),createdAt:ae.now()}),R("");const ne=(await Mh(T)).docs.map(ye=>({id:ye.id,...ye.data()}));re(ne.sort((ye,je)=>{var $e,rt;return((($e=je.createdAt)==null?void 0:$e.seconds)||0)-(((rt=ye.createdAt)==null?void 0:rt.seconds)||0)})),s("Anotao adicionada!","success")}catch(T){console.error("Erro ao adicionar nota:",T),s("Erro ao adicionar nota.","error")}}};return l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex justify-between items-center"},l.createElement("div",null,l.createElement("button",{onClick:()=>o("list"),className:"text-sm text-pink-600 hover:underline"}," Voltar para a Lista"),l.createElement("h2",{className:"text-3xl font-bold"},O.name)),l.createElement("div",{className:"space-x-2"},l.createElement("button",{onClick:()=>L(O),className:"px-4 py-2 text-sm text-white font-semibold rounded-full bg-indigo-500"},"Editar"),l.createElement("button",{onClick:()=>M(O),className:"px-4 py-2 text-sm text-white font-semibold rounded-full bg-red-500"},"Excluir"))),l.createElement("div",{className:"grid lg:grid-cols-3 gap-6"},l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow lg:col-span-1"},l.createElement("h3",{className:"text-xl font-semibold"},"Informaes"),l.createElement("p",null,l.createElement("strong",null,"Telefone:")," ",O.phone||"N/A"),l.createElement("p",null,l.createElement("strong",null,"Email:")," ",O.email||"N/A"),l.createElement("p",null,l.createElement("strong",null,"Aniversrio:")," ",O.birthday||"N/A"),l.createElement("div",null,l.createElement("h4",{className:"font-semibold"},"Tags:"),l.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},(O.tags||[]).map(T=>l.createElement("span",{key:T,className:"px-2 py-1 text-xs font-semibold text-pink-800 bg-pink-100 rounded-full"},T))))),l.createElement("div",{className:"lg:col-span-2 space-y-6"},l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow"},l.createElement("h3",{className:"text-xl font-semibold"},"Anotaes"),l.createElement("div",{className:"flex space-x-2 mb-4"},l.createElement("textarea",{value:D,onChange:T=>R(T.target.value),rows:"2",className:Jn,placeholder:"Adicionar nova anotao..."}),l.createElement("button",{onClick:j,className:"px-4 text-white font-semibold rounded-lg bg-pink-500"},"Salvar")),l.createElement("div",{className:"space-y-3 max-h-40 overflow-y-auto"},K.map(T=>l.createElement("div",{key:T.id,className:"p-2 bg-gray-50 dark:bg-gray-700/50 rounded"},l.createElement("p",{className:"text-sm"},T.text),l.createElement("p",{className:"text-xs text-right text-gray-400"},new Date(T.createdAt.seconds*1e3).toLocaleString("pt-BR")))))),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow"},l.createElement("h3",{className:"text-xl font-semibold"},"Histrico de Compras (",C.length,")"),l.createElement("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto"},C.length>0?C.map(T=>{var $;return l.createElement("div",{key:T.id,className:"p-4 rounded-lg border-l-4 bg-white dark:bg-gray-700/50 border-teal-500"},l.createElement("div",{className:"flex justify-between items-center"},l.createElement("div",null,l.createElement("p",{className:"text-sm text-gray-500"},($=T.date)!=null&&$.toDate?T.date.toDate().toLocaleString("pt-BR"):T.date),l.createElement("p",{className:"font-bold text-lg"},kA(T.totalAmount)," - ",l.createElement("span",{className:"font-medium"},T.paymentMethod))),l.createElement("div",null,l.createElement("button",{onClick:()=>x(b===T.id?null:T.id),className:"text-sm font-semibold text-gray-600"},b===T.id?"Fechar":"Ver Itens"))),b===T.id&&l.createElement("div",{className:"mt-4 pt-4 border-t text-sm"},l.createElement("p",{className:"font-semibold"},"Itens Comprados:"),l.createElement("ul",{className:"list-disc list-inside"},T.items.map(ne=>l.createElement("li",{key:ne.sku},ne.quantity,"x ",ne.name," - R$ ",ne.salePrice)))))}):l.createElement("p",{className:"text-gray-500"},"Nenhuma compra registrada para esta cliente."))))))};return i==="profile"&&a?l.createElement(N,{customer:a}):l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},l.createElement("h2",{className:"text-2xl font-bold"},"Gesto de Clientes"),l.createElement("div",{className:"flex items-center space-x-2 mt-4 md:mt-0"},l.createElement("input",{type:"text",placeholder:"Buscar por nome, telefone, tag...",value:m,onChange:O=>p(O.target.value),className:Jn+" max-w-sm"}),l.createElement("button",{onClick:()=>L(),className:"px-4 py-3 text-white font-semibold rounded-lg bg-pink-500"},"+ Nova Cliente"))),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow overflow-x-auto"},l.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},l.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},l.createElement("tr",null,l.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nome"),l.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Telefone"),l.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tags"),l.createElement("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aes"))),l.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},A.map(O=>l.createElement("tr",{key:O.id,className:"hover:bg-gray-50 dark:hover:bg-gray-700"},l.createElement("td",{className:"px-6 py-4"},l.createElement("div",{className:"text-sm font-medium"},O.name),O.email&&l.createElement("div",{className:"text-sm text-gray-500"},O.email)),l.createElement("td",{className:"px-6 py-4"},l.createElement("div",{className:"text-sm"},O.phone||"N/A")),l.createElement("td",{className:"px-6 py-4"},l.createElement("div",{className:"flex flex-wrap gap-1"},(O.tags||[]).slice(0,3).map(K=>l.createElement("span",{key:K,className:"px-2 py-1 text-xs font-semibold text-pink-800 bg-pink-100 rounded-full"},K)))),l.createElement("td",{className:"px-6 py-4 text-right text-sm font-medium"},l.createElement("button",{onClick:()=>L(O),className:"text-indigo-600 mr-4"},"Editar"),l.createElement("button",{onClick:()=>{u(O),o("profile")},className:"text-indigo-600"},"Ver Perfil"))))))),l.createElement(Ft,{isOpen:c,onClose:()=>d(!1),title:h?"Editar Cliente":"Adicionar Cliente",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:z,className:"px-4 py-2 text-white rounded-full bg-pink-500"},h?"Salvar":"Adicionar"))},l.createElement("form",{className:"space-y-4"},l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",null,"Nome*"),l.createElement("input",{type:"text",name:"name",value:k.name,onChange:O=>I({...k,name:O.target.value}),className:Jn})),l.createElement("div",null,l.createElement("label",null,"Telefone"),l.createElement("input",{type:"tel",name:"phone",value:k.phone,onChange:O=>I({...k,phone:O.target.value}),className:Jn}))),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",null,"Email"),l.createElement("input",{type:"email",name:"email",value:k.email,onChange:O=>I({...k,email:O.target.value}),className:Jn})),l.createElement("div",null,l.createElement("label",null,"Aniversrio"),l.createElement("input",{type:"date",name:"birthday",value:k.birthday,onChange:O=>I({...k,birthday:O.target.value}),className:Jn}))),l.createElement("div",null,l.createElement("label",null,"Preferncias"),l.createElement("textarea",{name:"preferences",rows:"3",value:k.preferences,onChange:O=>I({...k,preferences:O.target.value}),className:Jn})),l.createElement("div",null,l.createElement("label",null,"Tags (separadas por vrgula)"),l.createElement("input",{type:"text",name:"tags",value:k.tags,onChange:O=>I({...k,tags:O.target.value}),className:Jn})))),l.createElement(Ft,{isOpen:g,onClose:()=>v(!1),title:"Confirmar Excluso",size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:Q,className:"px-4 py-2 text-white rounded-full bg-red-500"},"Excluir"))},l.createElement("p",null,"Tem certeza que deseja excluir a cliente ",l.createElement("strong",null,E==null?void 0:E.name),"?")))},kA=(t=0)=>{try{return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}catch{return`R$ ${t}`}},Oh="bg-pink-500 hover:bg-pink-600",xA="bg-red-500 hover:bg-red-600",ar="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",r1="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",SA=({expenses:t})=>{const e=l.useMemo(()=>{const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),1),o=(t||[]).filter(u=>u.date&&u.date.toDate?u.date.toDate()>=s:!1).reduce((u,c)=>(u[c.category]=(u[c.category]||0)+c.amount,u),{}),a=Object.values(o).reduce((u,c)=>u+c,0);return Object.entries(o).map(([u,c])=>({category:u,amount:c,percentage:a>0?c/a*100:0})).sort((u,c)=>c.amount-u.amount)},[t]);if(!e||e.length===0)return null;const n=["bg-pink-500","bg-teal-500","bg-yellow-500","bg-purple-500","bg-orange-500","bg-indigo-500"];return l.createElement("div",{className:r1},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Despesas do Ms por Categoria"),l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"flex h-6 rounded-full overflow-hidden shadow-inner"},e.map((r,s)=>l.createElement("div",{key:r.category,style:{width:`${r.percentage}%`},className:n[s%n.length],title:`${r.category}: ${r.percentage.toFixed(1)}%`}))),l.createElement("ul",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2 text-sm"},e.map((r,s)=>l.createElement("li",{key:r.category,className:"flex items-center space-x-2"},l.createElement("span",{className:`w-3 h-3 rounded-full ${n[s%n.length]}`}),l.createElement("span",{className:"text-gray-700 dark:text-gray-300"},r.category,":"),l.createElement("span",{className:"font-semibold text-gray-800 dark:text-gray-100"},fe(r.amount)))))))},NA=({isOpen:t,onClose:e,db:n,userId:r,showToast:s,recurringExpenses:i=[],onLaunch:o,expenseCategories:a=[]})=>{const[u,c]=S.useState({description:"",amount:"",category:a[0]||"Matria Prima"});S.useEffect(()=>{c({description:"",amount:"",category:a[0]||"Matria Prima"})},[t,a]);const d=v=>c(E=>({...E,[v.target.name]:v.target.value})),h=async()=>{if(!u.description.trim()||parseFloat(u.amount)<=0){s("Descrio e valor so obrigatrios","error");return}if(!n||!r){s("Firestore no configurado. Faa login com uma conta vlida.","error");return}await as(kt(n,Ee(r,"recurringExpenses")),{...u,amount:parseFloat(u.amount)}),c({description:"",amount:"",category:a[0]||"Matria Prima"}),s("Despesa recorrente adicionada!","success")},f=async v=>{if(!n||!r){s("Firestore no configurado. Faa login com uma conta vlida.","error");return}await di(Te(n,Ee(r,"recurringExpenses"),v)),s("Despesa recorrente excluda","success")},g=v=>{o&&o({description:v.description,amount:v.amount,category:v.category,status:"a_pagar",date:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0]})};return l.createElement(Ft,{isOpen:t,onClose:e,title:"Gerenciar Despesas Recorrentes",size:"max-w-2xl"},l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700/50 space-y-3"},l.createElement("h4",{className:"font-semibold"},"Adicionar Nova Despesa Recorrente"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},l.createElement("input",{name:"description",value:u.description,onChange:d,className:ar,placeholder:"Descrio (Ex: Aluguel)"}),l.createElement("input",{name:"amount",value:u.amount,onChange:d,className:ar,placeholder:"Valor (R$)"}),l.createElement("select",{name:"category",value:u.category,onChange:d,className:ar},a.map(v=>l.createElement("option",{key:v,value:v},v)))),l.createElement("button",{onClick:h,className:`w-full py-2 text-white font-semibold rounded-lg ${Oh}`},"Adicionar")),l.createElement("div",{className:"max-h-64 overflow-y-auto"},l.createElement("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700"},(i||[]).map(v=>l.createElement("li",{key:v.id,className:"py-3 flex justify-between items-center"},l.createElement("div",null,l.createElement("p",{className:"font-medium dark:text-gray-200"},v.description," - ",fe(v.amount)),l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},v.category)),l.createElement("div",{className:"space-x-2"},l.createElement("button",{onClick:()=>g(v),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded-full"},"Lanar no Ms"),l.createElement("button",{onClick:()=>f(v.id),className:"text-red-500"},"Excluir"))))))))},_A=({db:t,userId:e,expenses:n=[],showToast:r=()=>{},recurringExpenses:s=[],onLaunchRecurring:i=null})=>{const[o,a]=S.useState(!1),[u,c]=S.useState(null),[d,h]=S.useState(!1),[f,g]=S.useState(null),[v,E]=S.useState(!1),w={description:"",amount:"",category:"Matria Prima",date:new Date().toISOString().split("T")[0],status:"pago",dueDate:""},[m,p]=S.useState(w),y=["Matria Prima","Marketing","Aluguel","Salrios","Impostos","Outros"];S.useEffect(()=>{if(u){const A=u.date&&u.date.toDate?u.date.toDate().toISOString().split("T")[0]:u.date||new Date().toISOString().split("T")[0],N=u.dueDate&&u.dueDate.toDate?u.dueDate.toDate().toISOString().split("T")[0]:u.dueDate||"";p({...u,date:A,dueDate:N})}},[u]);const k=(A=null)=>{c(null),p(A?{...w,...A}:w),a(!0)};S.useEffect(()=>{i&&k(i)},[i]);const I=A=>{const{name:N,value:O}=A.target;p(K=>({...K,[N]:O}))},L=async A=>{if(A&&A.preventDefault(),!m.description||parseFloat(m.amount)<=0)return r("Preencha a descrio e um valor vlido.","error");if(!t||!e){r("Firestore no configurado. Faa login com uma conta vlida.","error"),a(!1),c(null);return}try{const N={...m,amount:parseFloat(m.amount),date:ae.fromDate(new Date(m.date.replace(/-/g,"/"))),dueDate:m.status==="a_pagar"&&m.dueDate?ae.fromDate(new Date(m.dueDate.replace(/-/g,"/"))):null},O=kt(t,Ee(e,"expenses"));u?(await ci(Te(O,u.id),N),r("Despesa atualizada!","success")):(await as(O,N),r("Despesa adicionada!","success")),a(!1),c(null)}catch(N){console.error("Erro ao salvar despesa:",N),r("Erro ao salvar despesa.","error")}},z=A=>{g(A),h(!0)},M=async()=>{if(f){if(!t||!e){r("Firestore no configurado. Faa login com uma conta vlida.","error"),h(!1),g(null);return}try{await di(Te(t,Ee(e,"expenses"),f.id)),r("Despesa excluda.","success")}catch{r("Erro ao excluir.","error")}finally{h(!1),g(null)}}},Q=async A=>{if(!t||!e){r("Firestore no configurado. Faa login com uma conta vlida.","error");return}const N=Te(t,Ee(e,"expenses"),A.id);try{await ci(N,{status:"pago"}),r("Despesa marcada como paga!","success")}catch{r("Erro ao atualizar despesa.","error")}};return l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex justify-between items-center"},l.createElement("h2",{className:"text-2xl font-bold"},"Controle de Despesas"),l.createElement("div",{className:"flex space-x-2"},l.createElement("button",{onClick:()=>E(!0),className:"px-4 py-2 text-teal-600 font-semibold bg-teal-100 rounded-lg"},"Gerenciar Recorrentes"),l.createElement("button",{onClick:()=>k(),className:`px-4 py-2 text-white font-semibold rounded-lg ${Oh}`},"+ Nova Despesa"))),l.createElement(SA,{expenses:n}),l.createElement("div",{className:r1},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Despesas Registradas (",(n||[]).length,")"),l.createElement("div",{className:"overflow-x-auto"},l.createElement("table",{className:"min-w-full divide-y divide-gray-200"},l.createElement("thead",{className:"bg-gray-50"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Data"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Descrio"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Categoria"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Valor"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Status"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Aes"))),l.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},(n||[]).map(A=>{const N=A.status==="a_pagar"&&A.dueDate&&A.dueDate.toDate?A.dueDate.toDate()<bn(new Date):!1;return l.createElement("tr",{key:A.id,className:N?"bg-red-50":""},l.createElement("td",{className:"px-3 py-4 text-sm"},A.date&&A.date.toDate?A.date.toDate().toLocaleDateString("pt-BR"):A.date),l.createElement("td",{className:"px-3 py-4 text-sm font-medium"},A.description),l.createElement("td",{className:"px-3 py-4 text-sm"},l.createElement("span",{className:"px-2 inline-flex text-xs font-semibold rounded-full bg-pink-100 text-pink-800"},A.category)),l.createElement("td",{className:"px-3 py-4 text-sm font-semibold text-red-600"},fe(A.amount)),l.createElement("td",{className:"px-3 py-4 text-sm"},A.status==="pago"?l.createElement("span",{className:"text-green-600 font-semibold"},"Pago"):l.createElement("span",{className:"text-yellow-600 font-semibold"},"A Pagar ",A.dueDate?`em ${A.dueDate.toDate().toLocaleDateString("pt-BR")}`:"")),l.createElement("td",{className:"px-3 py-4 text-right text-sm space-x-2"},A.status==="a_pagar"&&l.createElement("button",{onClick:()=>Q(A),className:"text-green-600"},"Pagar"),l.createElement("button",{onClick:()=>{c(A),a(!0)},className:"text-indigo-600"},"Editar"),l.createElement("button",{onClick:()=>z(A),className:"text-red-600"},"Deletar")))}))))),l.createElement(Ft,{isOpen:o,onClose:()=>a(!1),title:u?"Editar Despesa":"Adicionar Despesa",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:L,className:`px-4 py-2 text-white rounded-full ${Oh}`},u?"Salvar":"Adicionar"))},l.createElement("form",{className:"space-y-4"},l.createElement("div",null,l.createElement("label",null,"Nome / Descrio"),l.createElement("input",{type:"text",name:"description",value:m.description,onChange:I,className:ar})),l.createElement("div",{className:"grid grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",null,"Valor (R$)"),l.createElement("input",{type:"number",name:"amount",value:m.amount,onChange:I,className:ar})),l.createElement("div",null,l.createElement("label",null,"Data"),l.createElement("input",{type:"date",name:"date",value:m.date,onChange:I,className:ar}))),l.createElement("div",null,l.createElement("label",null,"Categoria"),l.createElement("select",{name:"category",value:m.category,onChange:I,className:ar},y.map(A=>l.createElement("option",{key:A,value:A},A)))),l.createElement("div",{className:"grid grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("label",null,"Status"),l.createElement("div",{className:"flex"},l.createElement("button",{type:"button",onClick:()=>p({...m,status:"pago"}),className:`w-full py-2 ${m.status==="pago"?"bg-teal-500 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`},"Pago"),l.createElement("button",{type:"button",onClick:()=>p({...m,status:"a_pagar"}),className:`w-full py-2 ${m.status==="a_pagar"?"bg-yellow-500 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`},"A Pagar"))),m.status==="a_pagar"&&l.createElement("div",null,l.createElement("label",null,"Vencimento"),l.createElement("input",{type:"date",name:"dueDate",value:m.dueDate,onChange:I,className:ar}))))),l.createElement(Ft,{isOpen:d,onClose:()=>h(!1),title:"Confirmar Excluso",size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-full"},"Cancelar"),l.createElement("button",{onClick:M,className:`px-4 py-2 text-white rounded-full ${xA}`},"Excluir"))},l.createElement("p",null,"Tem certeza que deseja excluir a despesa ",l.createElement("strong",null,f==null?void 0:f.description),"?")),v&&l.createElement(NA,{isOpen:v,onClose:()=>E(!1),db:t,userId:e,showToast:r,recurringExpenses:s,onLaunch:A=>{E(!1),k(A)},expenseCategories:y}))},id="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",CA="bg-pink-500 hover:bg-pink-600",Py="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",IA=({goal:t,sales:e,expenses:n,goalTypes:r})=>{const s=S.useMemo(()=>{if(!t)return{idealPath:[],actualPath:[],daysInMonth:0,today:0};const E=new Date,w=E.getFullYear(),m=E.getMonth(),p=new Date(w,m+1,0).getDate(),y=E.getDate(),k=t.amount/p,I=Array.from({length:p},(N,O)=>k*(O+1)),L=(e||[]).filter(N=>N.date&&N.date.toDate&&N.date.toDate().getMonth()===m&&N.date.toDate().getFullYear()===w&&N.status!=="estornada"),z=(n||[]).filter(N=>N.date&&N.date.toDate&&N.date.toDate().getMonth()===m&&N.date.toDate().getFullYear()===w&&N.status==="pago"),M=Array(p).fill(0);switch(t.type){case"revenue":case"averageTicket":L.forEach(N=>{M[N.date.toDate().getDate()-1]+=N.totalAmount});break;case"netProfit":L.forEach(N=>{M[N.date.toDate().getDate()-1]+=N.profit||0}),z.forEach(N=>{M[N.date.toDate().getDate()-1]-=N.amount});break;case"salesCount":L.forEach(N=>{M[N.date.toDate().getDate()-1]+=1});break;case"itemsSold":L.forEach(N=>{const O=N.date.toDate().getDate()-1;M[O]+=N.items.reduce((K,re)=>K+re.quantity,0)});break}let Q=0;const A=M.map((N,O)=>{if(Q+=N,t.type==="averageTicket"){const K=L.filter(re=>re.date.toDate().getDate()<=O+1);return K.length>0?Q/K.length:0}return Q});return{idealPath:I,actualPath:A,daysInMonth:p,today:y}},[t,e,n]),{idealPath:i,actualPath:o,daysInMonth:a,today:u}=s,c=Math.max(...i,...o,t.amount||0);if(c===0)return l.createElement("p",null,"Sem dados para exibir.");const d=500,h=200,f=E=>E.map((w,m)=>`${m/(a-1)*d},${h-w/c*h}`).join(" "),g=f(i),v=f(o.slice(0,u));return l.createElement("div",{className:"text-center"},l.createElement("svg",{viewBox:`0 0 ${d} ${h}`,className:"w-full h-auto"},l.createElement("polyline",{fill:"none",stroke:"#cbd5e1",strokeWidth:"2",strokeDasharray:"4 4",points:g}),l.createElement("polyline",{fill:"none",stroke:"#ec4899",strokeWidth:"3",points:v})),l.createElement("div",{className:"flex justify-center items-center space-x-4 text-sm mt-2"},l.createElement("div",{className:"flex items-center"},l.createElement("span",{className:"w-4 h-0.5 bg-pink-500 mr-2"})," Realizado"),l.createElement("div",{className:"flex items-center"},l.createElement("span",{className:"w-4 h-0.5 bg-gray-300 border-t-2 border-dashed border-gray-300 mr-2"})," Ideal")),l.createElement("p",{className:"text-sm mt-2"},"Valor atual: ",l.createElement("strong",{className:"text-pink-600"},fe(o[u-1]||0))))},TA=({db:t,userId:e,sales:n=[],expenses:r=[],allGoals:s=[],showToast:i=()=>{}})=>{const o=new Date,a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`,u=s.find(m=>m.id===a),[c,d]=S.useState("revenue"),[h,f]=S.useState(""),g=[{value:"revenue",label:"Faturamento (Receita Total)",format:fe},{value:"netProfit",label:"Lucro Lquido",format:fe},{value:"salesCount",label:"Nmero de Vendas",format:sd},{value:"itemsSold",label:"Itens Vendidos",format:sd},{value:"averageTicket",label:"Ticket Mdio (R$)",format:fe}];S.useEffect(()=>{u?(d(u.type),f(u.amount)):(d("revenue"),f(""))},[u]);const v=async()=>{const m=parseFloat(h);if(!t||!e||isNaN(m)||m<=0){i("Por favor, insira um valor de meta vlido.","error");return}const p=Te(t,Ee(e,"goals"),a);try{await t1(p,{type:c,amount:m}),i("Meta salva com sucesso!","success")}catch(y){console.error("Erro ao salvar meta:",y),i("Erro ao salvar a meta.","error")}},E=(m,p,y)=>{if(!m)return{achieved:0,percentage:0};const[k,I]=m.id.split("-").map(Number),L=new Date(k,I-1,1),z=new Date(k,I,0,23,59,59),M=(p||[]).filter(K=>{const re=K.date&&K.date.toDate?K.date.toDate():new Date(K.date);return re>=L&&re<=z&&K.status!=="estornada"}),Q=(y||[]).filter(K=>{const re=K.date&&K.date.toDate?K.date.toDate():new Date(K.date);return re>=L&&re<=z&&K.status==="pago"});let A=0;const N=M.reduce((K,re)=>K+re.totalAmount,0);switch(m.type){case"revenue":A=N;break;case"netProfit":const K=M.reduce((D,R)=>D+(R.profit||0),0),re=Q.reduce((D,R)=>D+R.amount,0);A=K-re;break;case"salesCount":A=M.length;break;case"itemsSold":A=M.reduce((D,R)=>D+R.items.reduce((b,x)=>b+x.quantity,0),0);break;case"averageTicket":A=M.length>0?N/M.length:0;break;default:A=0}const O=m.amount>0?A/m.amount*100:0;return{achieved:A,percentage:O}},w=S.useMemo(()=>(s||[]).filter(m=>m.id!==a).sort((m,p)=>p.id.localeCompare(m.id)),[s,a]);return l.createElement("div",{className:"space-y-8"},l.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Metas e Objetivos"),l.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},l.createElement("div",{className:id},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Definir Meta para ",new Date().toLocaleDateString("pt-BR",{month:"long"})),l.createElement("div",{className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipo de Meta"),l.createElement("select",{value:c,onChange:m=>d(m.target.value),className:Py},g.map(m=>l.createElement("option",{key:m.value,value:m.value},m.label)))),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Valor da Meta"),l.createElement("input",{type:"number",value:h,onChange:m=>f(m.target.value),className:Py,placeholder:"Ex: 5000"})),l.createElement("button",{onClick:v,className:`w-full p-3 rounded-full text-white font-bold ${CA}`},u?"Atualizar Meta":"Salvar Meta"))),l.createElement("div",{className:id},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Ritmo para Atingir a Meta"),u?l.createElement(IA,{goal:u,sales:n,expenses:r,goalTypes:g}):l.createElement("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10"},"Defina uma meta para ver o ritmo de progresso."))),l.createElement("div",{className:id},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Histrico de Metas"),l.createElement("div",{className:"max-h-96 overflow-y-auto"},l.createElement("ul",{className:"space-y-3"},w.map(m=>{const p=E(m,n,r),y=g.find(M=>M.value===m.type)||{format:sd},k=p.percentage>=100,[I,L]=m.id.split("-"),z=new Date(I,L-1,1).toLocaleDateString("pt-BR",{month:"long"});return l.createElement("li",{key:m.id,className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-600"},l.createElement("p",{className:"font-bold text-gray-800 dark:text-gray-200 capitalize"},z," de ",I),l.createElement("div",{className:"flex justify-between items-center mt-1"},l.createElement("div",null,l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Meta (",y.label,"): ",y.format(m.amount)),l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Atingido: ",l.createElement("span",{className:"font-semibold"},y.format(p.achieved)))),l.createElement("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${k?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300"}`},p.percentage.toFixed(1),"% ",k?"":"")))})))))},qt="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",od="w-full p-3 border border-gray-300 rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",DA=({sales:t=[],expenses:e=[]})=>{const n=S.useMemo(()=>{const s=(t||[]).filter(o=>o.paymentStatus==="recebido"&&o.status!=="estornada").reduce((o,a)=>o+a.totalAmount,0),i=(e||[]).filter(o=>o.status==="pago").reduce((o,a)=>o+a.amount,0);return{inflow:s,outflow:i,balance:s-i}},[t,e]),r=Math.max(n.inflow,n.outflow,1);return l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"flex justify-around items-end h-48"},l.createElement("div",{className:"flex flex-col items-center"},l.createElement("p",{className:"font-bold text-green-600"},fe(n.inflow)),l.createElement("div",{className:"w-16 bg-green-400 rounded-t-lg",style:{height:`${n.inflow/r*150}px`}}),l.createElement("p",{className:"text-sm"},"Entradas")),l.createElement("div",{className:"flex flex-col items-center"},l.createElement("p",{className:"font-bold text-red-600"},fe(n.outflow)),l.createElement("div",{className:"w-16 bg-red-400 rounded-t-lg",style:{height:`${n.outflow/r*150}px`}}),l.createElement("p",{className:"text-sm"},"Sadas"))),l.createElement("div",{className:"text-center border-t pt-3"},l.createElement("p",{className:"text-sm"},"Saldo do Perodo"),l.createElement("p",{className:`text-2xl font-bold ${n.balance>=0?"text-blue-600":"text-orange-600"}`},fe(n.balance))))},bA=({sales:t=[],expenses:e=[],dateRange:n={}})=>{const r=S.useMemo(()=>{if(!n.start||!n.end)return[];const f=new Map,g=new Date(n.start);for(;g<=n.end;)f.set(g.toISOString().split("T")[0],0),g.setDate(g.getDate()+1);(t||[]).filter(E=>E.status!=="estornada").forEach(E=>{const w=E.date.toDate().toISOString().split("T")[0];f.has(w)&&f.set(w,f.get(w)+(E.profit||0))}),(e||[]).forEach(E=>{if(E.status!=="pago")return;const w=E.date.toDate().toISOString().split("T")[0];f.has(w)&&f.set(w,f.get(w)-E.amount)});let v=0;return Array.from(f.values()).map(E=>(v+=E,v))},[t,e,n]);if(r.length===0)return l.createElement("p",{className:"text-center"},"Selecione um perodo para ver a tendncia.");const s=Math.max(...r,0),i=Math.min(...r,0),o=s-i,a=500,u=200,c=f=>o===0?u/2:u-(f-i)/o*u,d=f=>f.length===1?`0,${c(f[0])} ${a},${c(f[0])}`:f.map((g,v)=>`${v/(f.length-1)*a},${c(g)}`).join(" "),h=c(0);return l.createElement("div",{className:"text-center"},l.createElement("svg",{viewBox:`0 0 ${a} ${u}`,className:"w-full h-auto"},h>=0&&h<=u&&l.createElement("line",{x1:"0",y1:h,x2:a,y2:h,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"4 4"}),l.createElement("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:d(r)})),l.createElement("p",{className:"text-sm mt-2"},"Lucro lquido acumulado no perodo."))},AA=({sales:t=[],products:e=[],expenses:n=[],db:r,userId:s,showToast:i=()=>{}})=>{const[o,a]=S.useState("month"),[u,c]=S.useState(""),[d,h]=S.useState(""),{filteredSales:f,filteredExpenses:g,dateRange:v}=S.useMemo(()=>{const D=new Date;let R,b=new Date;b.setHours(23,59,59,999),o==="custom"&&u&&d?(R=bn(new Date(u.replace(/-/g,"/"))),b=new Date(d.replace(/-/g,"/")),b.setHours(23,59,59,999)):o==="30days"?(R=new Date,R.setDate(D.getDate()-30),R=bn(R)):o==="month"?R=bn(new Date(D.getFullYear(),D.getMonth(),1)):o==="year"?R=bn(new Date(D.getFullYear(),0,1)):R=null;const x=(C,j=!1)=>R?C.filter(T=>{const $=T.date&&T.date.toDate?T.date.toDate():new Date(T.date);return $>=R&&$<=b}):C;return{filteredSales:x(t,!0),filteredExpenses:x(n),dateRange:{start:R,end:b}}},[t,n,o,u,d]),E=D=>{const R=new Date;let b,x;if(D==="month")b=new Date(R.getFullYear(),R.getMonth()-1,1),x=new Date(R.getFullYear(),R.getMonth(),0);else if(D==="30days")b=new Date,b.setDate(R.getDate()-60),x=new Date,x.setDate(R.getDate()-30);else if(D==="year")b=new Date(R.getFullYear()-1,0,1),x=new Date(R.getFullYear()-1,11,31);else return null;return{start:bn(b),end:x}},w=(D,R)=>{const b=(D||[]).reduce((T,$)=>(T.totalRevenue+=$.totalAmount,T.totalSalesCount+=1,T.grossProfit+=$.profit||0,T),{totalRevenue:0,grossProfit:0,totalSalesCount:0}),C=(R||[]).filter(T=>T.status==="pago").reduce((T,$)=>T+$.amount,0),j=b.grossProfit-C;return{...b,totalExpenses:C,netProfit:j}},m=S.useMemo(()=>{const D=w(f,g),R=E(o);if(!R)return{current:D,changes:null};const b=(t||[]).filter($=>$.status!=="estornada"&&$.date&&$.date.toDate?$.date.toDate()>=R.start&&$.date.toDate()<=R.end:!1),x=(n||[]).filter($=>$.date&&$.date.toDate?$.date.toDate()>=R.start&&$.date.toDate()<=R.end:!1),C=w(b,x),j=($,ne)=>ne===0?$>0?100:0:($-ne)/ne*100,T={revenue:j(D.totalRevenue,C.totalRevenue),netProfit:j(D.netProfit,C.netProfit),salesCount:j(D.totalSalesCount,C.totalSalesCount)};return{current:D,changes:T}},[f,g,t,n,o]),{totalRevenue:p,grossProfit:y,totalSalesCount:k,totalExpenses:I,netProfit:L}=m.current||{totalRevenue:0,grossProfit:0,totalSalesCount:0,totalExpenses:0,netProfit:0},z=S.useMemo(()=>{if(!f||f.length===0)return{A:[],B:[],C:[]};const D=new Map;let R=0;if(f.forEach(T=>T.items.forEach($=>{const ne=$.salePrice*$.quantity;D.set($.productId,(D.get($.productId)||0)+ne),R+=ne})),R===0)return{A:[],B:[],C:[]};const b=new Map((e||[]).map(T=>[T.id,T.name])),x=Array.from(D.entries()).map(([T,$])=>({id:T,name:b.get(T)||"Produto",revenue:$,percentage:$/R*100})).sort((T,$)=>$.revenue-T.revenue),C={A:[],B:[],C:[]};let j=0;return x.forEach(T=>{j+=T.percentage,j<=80?C.A.push(T):j<=95?C.B.push(T):C.C.push(T)}),C},[f,e]),M=S.useMemo(()=>{const D=new Map;(f||[]).forEach(b=>b.items.forEach(x=>{const C=D.get(x.sku)||{quantity:0,revenue:0};D.set(x.sku,{quantity:C.quantity+x.quantity,revenue:C.revenue+x.salePrice*x.quantity})}));const R=new Map((e||[]).flatMap(b=>(b.variants||[]).map(x=>[x.sku,{...x,productName:b.name}])));return Array.from(D.entries()).map(([b,x])=>({sku:b,...R.get(b),...x})).sort((b,x)=>x.quantity-b.quantity).slice(0,10)},[f,e]),Q=S.useMemo(()=>{const D=new Map;(t||[]).forEach(C=>{const j=C.date&&C.date.toDate?C.date.toDate():new Date;C.items.forEach(T=>{(!D.has(T.sku)||j>D.get(T.sku))&&D.set(T.sku,j)})});const R=120,b=new Date;return b.setDate(b.getDate()-R),(e||[]).flatMap(C=>(C.variants||[]).filter(j=>j.quantity>0).map(j=>({...j,productName:C.name,createdAt:C.createdAt&&C.createdAt.toDate?C.createdAt.toDate():null}))).map(C=>{const j=D.get(C.sku),T=j||C.createdAt,$=T?Math.floor((new Date-T)/(1e3*60*60*24)):null;return{...C,lastSale:j,daysSinceLastActivity:$,referenceDate:T}}).filter(C=>C.referenceDate?C.referenceDate<b:!1).sort((C,j)=>C.referenceDate-j.referenceDate)},[t,e]),A=S.useMemo(()=>{const D=[];return(t||[]).filter(R=>R.paymentStatus==="a_receber"&&R.status!=="estornada").forEach(R=>D.push({id:`${R.id}-0`,saleId:R.id,installmentNumber:null,dueDate:R.dueDate?R.dueDate.toDate():R.date.toDate(),customerName:R.customerName||"N/A",amount:R.totalAmount})),(t||[]).filter(R=>R.paymentStatus==="parcelado"&&R.status!=="estornada"&&R.installmentsData).forEach(R=>R.installmentsData.forEach(b=>{b.status==="a_receber"&&D.push({id:`${R.id}-${b.number}`,saleId:R.id,installmentNumber:b.number,dueDate:b.dueDate.toDate(),customerName:R.customerName||"N/A",amount:b.amount,totalInstallments:R.installments})})),D.sort((R,b)=>R.dueDate-b.dueDate)},[t]),N=async(D,R)=>{if(!r||!s)return i("Firebase no configurado para marcar como pago.","error");const b=Te(r,Ee(s,"sales"),D);if(R===null)await ci(b,{paymentStatus:"recebido"}),i("Venda marcada como recebida!","success");else{const x=await cu(b);if(x.exists()){const j=x.data().installmentsData.map($=>$.number===R?{...$,status:"recebido"}:$),T=j.every($=>$.status==="recebido");await ci(b,{installmentsData:j,...T&&{paymentStatus:"recebido"}}),i(`Parcela ${R} marcada como recebida!`,"success")}}},O=[{value:"month",label:"Este Ms"},{value:"30days",label:"ltimos 30 Dias"},{value:"year",label:"Este Ano"},{value:"all",label:"Todo o Perodo"},{value:"custom",label:"Personalizado"}],K=()=>{const D=["Data","Tipo","Descrio","Valor","Status"],R=(f||[]).map($=>[$.date.toDate().toISOString(),"Venda",`Venda para ${$.customerName||"N/A"}`,$.totalAmount,$.paymentStatus]),b=(g||[]).map($=>[$.date.toDate().toISOString(),"Despesa",$.description,-$.amount,$.status]),x=[...R,...b].sort(($,ne)=>new Date($[0])-new Date(ne[0])),C=[D.join(","),...x.map($=>$.join(","))].join(`
`),j=new Blob([`\uFEFF${C}`],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");T.href=URL.createObjectURL(j),T.setAttribute("download","relatorio_mia_move.csv"),document.body.appendChild(T),T.click(),document.body.removeChild(T),i("Exportao concluda!","success")},re=D=>{if(D===null||isNaN(D))return l.createElement("span",{className:"text-xs text-gray-400"},"s/ comp.");const R=D>=0,b=R?"text-green-500":"text-red-500";return l.createElement("span",{className:`text-sm font-bold ${b}`},R?"":""," ",Math.abs(D).toFixed(1),"%")};return l.createElement("div",{className:"space-y-8"},l.createElement("div",{className:"flex justify-between items-center"},l.createElement("h2",{className:"text-2xl font-bold"},"Relatrios e Anlises"),l.createElement("div",{className:"flex items-center gap-2"},l.createElement("select",{value:o,onChange:D=>a(D.target.value),className:od},O.map(D=>l.createElement("option",{key:D.value,value:D.value},D.label))),o==="custom"&&l.createElement(l.Fragment,null,l.createElement("input",{type:"date",value:u,onChange:D=>c(D.target.value),className:od}),l.createElement("input",{type:"date",value:d,onChange:D=>h(D.target.value),className:od})),l.createElement("button",{onClick:K,className:"px-4 py-3 bg-gray-200 rounded-lg"},"Exportar CSV"))),l.createElement("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4"},l.createElement("div",{className:`${qt} border-l-4 border-pink-500`},l.createElement("p",{className:"text-sm text-gray-500"},"Receita Total"),l.createElement("p",{className:"text-2xl font-bold text-pink-600 mt-1"},fe(p)),m.changes&&l.createElement("div",{className:"mt-1"},re(m.changes.revenue))),l.createElement("div",{className:`${qt} border-l-4 border-teal-500`},l.createElement("p",{className:"text-sm text-gray-500"},"Lucro Bruto (Vendas)"),l.createElement("p",{className:"text-2xl font-bold text-teal-600 mt-1"},fe(y))),l.createElement("div",{className:`${qt} border-l-4 border-red-500`},l.createElement("p",{className:"text-sm text-gray-500"},"Total Despesas (Pagas)"),l.createElement("p",{className:"text-2xl font-bold text-red-600 mt-1"},fe(I))),l.createElement("div",{className:`${qt} border-l-4 border-green-500 col-span-2 lg:col-span-1`},l.createElement("p",{className:"text-sm text-gray-500"},"Lucro Lquido"),l.createElement("p",{className:"text-3xl font-bold text-green-600 mt-1"},fe(L)),m.changes&&l.createElement("div",{className:"mt-1"},re(m.changes.netProfit)))),l.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},l.createElement("div",{className:qt},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Fluxo de Caixa (Recebido vs. Pago)"),l.createElement(DA,{sales:f,expenses:g})),l.createElement("div",{className:qt},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Tendncia de Lucro no Perodo"),l.createElement(bA,{sales:f,expenses:g,dateRange:v}))),l.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},l.createElement("div",{className:`${qt}`},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Desempenho por Dia da Semana")),l.createElement("div",{className:`${qt}`},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Distribuio de Pagamentos"))),l.createElement("div",{className:qt},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Contas a Receber (Geral) (",A.length,")"),l.createElement("div",{className:"overflow-x-auto max-h-80"},l.createElement("table",{className:"min-w-full"},l.createElement("thead",{className:"bg-gray-50"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Vencimento"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Cliente / Parcela"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Valor"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Ao"))),l.createElement("tbody",{className:"bg-white divide-y"},A.map(D=>{const R=D.dueDate<bn(new Date);return l.createElement("tr",{key:D.id,className:R?"bg-red-50":""},l.createElement("td",{className:"px-3 py-4"},D.dueDate.toLocaleDateString("pt-BR")),l.createElement("td",{className:"px-3 py-4"},D.customerName,D.installmentNumber&&l.createElement("span",{className:"block text-xs"},"Parcela ",D.installmentNumber,"/",D.totalInstallments)),l.createElement("td",{className:"px-3 py-4 font-bold text-yellow-600"},fe(D.amount)),l.createElement("td",{className:"px-3 py-4"},l.createElement("button",{onClick:()=>N(D.saleId,D.installmentNumber),className:"px-3 py-1 text-xs text-white rounded-full bg-green-500"},"Recebido")))}))))),l.createElement("div",{className:"grid lg:grid-cols-3 gap-6 mt-6"},l.createElement("div",{className:`${qt} lg:col-span-1`},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Curva ABC de Produtos"),l.createElement("div",{className:"space-y-4"},z.A.length>0?z.A.map(D=>l.createElement("div",{key:D.id,className:"flex justify-between"},l.createElement("span",null,D.name),l.createElement("span",{className:"font-semibold"},fe(D.revenue)))):l.createElement("p",null,"Nenhum dado"))),l.createElement("div",{className:"lg:col-span-2 space-y-6"},l.createElement("div",{className:qt},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Top 10 Variaes Mais Vendidas"),l.createElement("div",{className:"overflow-x-auto max-h-80"},l.createElement("table",{className:"min-w-full text-sm"},l.createElement("thead",{className:"bg-gray-50"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Produto"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Qtd."),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Receita"))),l.createElement("tbody",null,M.map(D=>l.createElement("tr",{key:D.sku},l.createElement("td",{className:"py-2 px-2"},D.productName," (",D.size," - ",D.color,")"),l.createElement("td",{className:"py-2 px-2 font-bold"},D.quantity),l.createElement("td",{className:"py-2 px-2 font-semibold text-teal-600"},fe(D.revenue)))))))),l.createElement("div",{className:qt},l.createElement("h3",{className:"text-xl font-semibold mb-4"},"Estoque Encalhado (+120 dias)"),l.createElement("div",{className:"overflow-x-auto max-h-80"},l.createElement("table",{className:"min-w-full text-sm"},l.createElement("thead",{className:"bg-gray-50"},l.createElement("tr",null,l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Produto"),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"Qtd."),l.createElement("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-800 dark:text-gray-200 uppercase"},"ltima Atividade"))),l.createElement("tbody",null,Q.map(D=>l.createElement("tr",{key:D.sku},l.createElement("td",{className:"py-2 px-2"},D.productName," (",D.size," - ",D.color,")"),l.createElement("td",{className:"py-2 px-2 font-bold"},D.quantity),l.createElement("td",{className:"py-2 px-2 text-red-600"},D.daysSinceLastActivity," dias atrs"))))))))))},My="bg-pink-500 hover:bg-pink-600",Oy="bg-red-500 hover:bg-red-600",RA="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",ad="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 transition duration-150 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50",PA=({db:t,userId:e,products:n=null,defectiveItems:r=null,showToast:s=()=>{}})=>{const[i,o]=S.useState(!1),[a,u]=S.useState(""),[c,d]=S.useState(null),[h,f]=S.useState(""),[g,v]=S.useState(""),[E,w]=S.useState(null),[m,p]=S.useState(!1),y=!!t&&!!e,k=Array.isArray(n)?n:[],I=r&&Array.isArray(r)?r:[],L=S.useMemo(()=>(k||[]).flatMap(N=>(N.variants||[]).map(O=>({...O,productId:N.id,productName:N.name}))).filter(N=>N.quantity>0&&(N.productName.toLowerCase().includes(a.toLowerCase())||N.sku.toLowerCase().includes(a.toLowerCase()))),[k,a]),z=()=>{o(!0),d(null),f(""),v(""),u("")},M=async()=>{if(!c||!h.trim()){s("Selecione um produto e descreva o defeito.","error");return}if(!y){s("Firestore no configurado. Faa login com uma conta vlida.","error");return}if(y){try{const N=Ym(t),O=n.find(j=>j.id===c.productId);if(!O){s("Produto original no encontrado.","error");return}const K=Te(t,Ee(e,"products"),c.productId),re=O.variants.findIndex(j=>j.sku===c.sku),D=O.variants[re].quantity,R=D-1;if(R<0){s("Estoque insuficiente para registrar o defeito.","error");return}const b=[...O.variants];b[re].quantity=R,N.update(K,{variants:b});const x={date:ae.now(),productId:c.productId,productName:c.productName,variantSku:c.sku,type:"saida_defeito",quantityChange:1,reason:`Defeito: ${h.substring(0,30)}...`,oldQuantity:D,newQuantity:R};N.set(Te(kt(t,Ee(e,"stockMovements"))),x);const C={...c,defectDescription:h,suggestedAction:g,registeredAt:ae.now(),status:"pendente"};N.set(Te(kt(t,Ee(e,"defectiveItems"))),C),await N.commit(),s("Item defeituoso registrado com sucesso!","success"),o(!1)}catch(N){console.error("Erro ao registrar item defeituoso:",N),s("Erro ao registrar item defeituoso.","error")}return}},Q=async()=>{if(E){if(p(!0),y){try{await di(Te(t,Ee(e,"defectiveItems"),E.id)),s("Item defeituoso resolvido e removido da lista.","success")}catch(N){console.error(N),s("Erro ao resolver o item.","error")}finally{w(null),p(!1)}return}s("Firestore no configurado. Faa login com uma conta vlida.","error"),w(null),p(!1)}},A=N=>{const O=`*Relatrio de Defeito - Mia Move*

*Produto:* ${N.productName}
*Variao:* ${N.size} - ${N.color}
*SKU:* ${N.sku}

*Defeito Descrito:*
${N.defectDescription}

*Ao Sugerida:*
${N.suggestedAction||"Nenhuma"}`,K=`https://wa.me/?text=${encodeURIComponent(O)}`;window.open(K,"_blank")};return l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"flex flex-col md:flex-row justify-between md:items-center"},l.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Controle de Defeitos"),l.createElement("button",{onClick:z,className:`px-4 py-3 text-white font-semibold rounded-lg ${My} shadow-md`},"+ Registrar Defeito")),l.createElement("div",{className:RA},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"},"Itens com Defeito (",(I||[]).length,")"),l.createElement("div",{className:"space-y-4"},(I||[]).map(N=>l.createElement("div",{key:N.id,className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700/50"},l.createElement("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start"},l.createElement("div",null,l.createElement("p",{className:"font-bold text-lg dark:text-gray-100"},N.productName," (",N.size," - ",N.color,")"),l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"SKU: ",N.sku," | Registrado em: ",N.registeredAt?new Date(N.registeredAt).toLocaleDateString("pt-BR"):"N/A")),l.createElement("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0"},l.createElement("button",{onClick:()=>A(N),className:"px-3 py-1 text-sm text-white font-semibold rounded-full bg-green-500 hover:bg-green-600 flex items-center space-x-1"},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},l.createElement("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.428A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})),l.createElement("span",null,"WhatsApp")),l.createElement("button",{onClick:()=>w(N),className:`px-3 py-1 text-sm text-white font-semibold rounded-full ${Oy}`},"Resolver"))),l.createElement("div",{className:"mt-3 pt-3 border-t dark:border-gray-600 text-sm space-y-2"},l.createElement("p",null,l.createElement("strong",null,"Defeito:")," ",N.defectDescription),l.createElement("p",null,l.createElement("strong",null,"Ao Sugerida:")," ",N.suggestedAction||"N/A")))))),l.createElement(Ft,{isOpen:i,onClose:()=>o(!1),title:"Registrar Item com Defeito",size:"max-w-2xl",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-full"},"Cancelar"),l.createElement("button",{onClick:M,className:`px-4 py-2 text-white rounded-full ${My}`},"Registrar e Dar Baixa"))},l.createElement("div",{className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"1. Encontre o Produto em Estoque"),l.createElement("input",{type:"text",placeholder:"Buscar por nome ou SKU...",value:a,onChange:N=>u(N.target.value),className:ad}),l.createElement("div",{className:"max-h-40 overflow-y-auto mt-2 space-y-1 pr-2"},a&&L.map(N=>l.createElement("button",{key:N.sku,onClick:()=>{d(N),u("")},className:"w-full text-left p-2 rounded-lg hover:bg-pink-100 dark:hover:bg-pink-900/40"},N.productName," (",N.size," - ",N.color,") - Estoque: ",N.quantity)))),c&&l.createElement("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/40 rounded-lg"},l.createElement("p",{className:"font-semibold text-teal-800 dark:text-teal-200"},"Selecionado: ",c.productName," (",c.size," - ",c.color,")")),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"2. Descreva o Defeito"),l.createElement("textarea",{value:h,onChange:N=>f(N.target.value),rows:"3",className:ad,placeholder:"Ex: Costura solta na manga direita."})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium"},"3. Ao Sugerida (Opcional)"),l.createElement("input",{type:"text",value:g,onChange:N=>v(N.target.value),className:ad,placeholder:"Ex: Trocar com fornecedor."})))),l.createElement(Ft,{isOpen:!!E,onClose:()=>w(null),title:"Confirmar Resoluo",size:"max-w-md",actions:l.createElement(l.Fragment,null,l.createElement("button",{onClick:()=>w(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-full"},"Cancelar"),l.createElement("button",{onClick:Q,disabled:m,className:`px-4 py-2 text-white rounded-full ${Oy} disabled:opacity-50`},m?"Resolvendo...":"Confirmar e Remover"))},l.createElement("p",null,"Tem certeza que deseja marcar o item ",l.createElement("strong",null,E==null?void 0:E.productName," (",E==null?void 0:E.size," - ",E==null?void 0:E.color,")")," como resolvido?"),l.createElement("p",{className:"text-sm text-gray-500 mt-2"},"Esta ao ir remover o item permanentemente da lista de defeitos.")))},MA={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},OA=({db:t,userId:e,showToast:n=()=>{}})=>{const[r,s]=S.useState(""),[i,o]=S.useState(null),[a,u]=S.useState(!1),c=async()=>{if(!r.trim())return n("Digite sua pergunta.","error");u(!0),o(null);try{const h=await fetch((typeof import.meta<"u","http://localhost:4321/api/ai"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})}),f=await h.json();h.ok?(o({text:f.text}),n("Resposta recebida (via proxy).","success")):(console.error("AI error",f),n(f.error||"Erro do modelo","error"),o({text:f.detail||JSON.stringify(f)}))}catch(d){console.error("Fetch error",d),n("Falha ao contactar o servidor de IA.","error"),o({text:"Erro ao buscar resposta. Verifique se o servidor proxy est rodando e se a varivel HF_API_KEY foi configurada."})}finally{u(!1)}};return l.createElement("div",{className:"space-y-6"},l.createElement("h2",{className:"text-2xl font-bold"},"Consultor - IA"),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow"},l.createElement("textarea",{value:r,onChange:d=>s(d.target.value),rows:4,className:"w-full p-3 border rounded",placeholder:"Descreva seu problema ou pea uma sugesto..."}),l.createElement("div",{className:"flex items-center space-x-2 mt-3"},l.createElement("button",{onClick:c,className:"px-4 py-2 bg-pink-500 text-white rounded"},"Perguntar"),a&&l.createElement("span",null,"Carregando...")),i&&l.createElement("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded"},l.createElement("strong",null,"Resposta:"),l.createElement("p",{className:"mt-2"},i.text))))},$A=({sales:t})=>{const e=S.useMemo(()=>{const r=[],s=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"];for(let i=6;i>=0;i--){const o=new Date;o.setDate(o.getDate()-i);const a=bn(o);r.push({day:s[o.getDay()],revenue:0,date:a})}return(t||[]).filter(i=>i.status!=="estornada").forEach(i=>{const o=bn(i.date.toDate()),a=r.find(u=>u.date.getTime()===o.getTime());a&&(a.revenue+=i.totalAmount)}),r},[t]),n=Math.max(...e.map(r=>r.revenue),0);return l.createElement("div",{className:"flex justify-around items-end h-[200px] p-2 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-700"},e.map((r,s)=>l.createElement("div",{key:s,className:"flex flex-col items-center flex-shrink-0 w-12 text-center"},l.createElement("div",{className:"text-xs font-semibold text-pink-600 dark:text-pink-400 mb-1"},fe(r.revenue)),l.createElement("div",{style:{height:`${n>0?r.revenue/n*120:0}px`,minHeight:"2px"},className:"w-8 bg-pink-400 rounded-t-md transition-all duration-500 shadow-md"}),l.createElement("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mt-1"},r.day))))},LA=({sales:t,expenses:e,monthlyGoal:n,showTitle:r=!1})=>{const{currentValue:s,progressPercentage:i,goalType:o,goalAmount:a}=S.useMemo(()=>{if(!n)return{currentValue:0,progressPercentage:0};const u=new Date,c=new Date(u.getFullYear(),u.getMonth(),1),d=(t||[]).filter(v=>v.date.toDate()>=c&&v.status!=="estornada"),h=(e||[]).filter(v=>v.date.toDate()>=c&&v.status==="pago");let f=0;if(n.type==="revenue")f=d.reduce((v,E)=>v+E.totalAmount,0);else{const v=d.reduce((w,m)=>w+(m.profit||0),0),E=h.reduce((w,m)=>w+m.amount,0);f=v-E}const g=n.amount>0?f/n.amount*100:0;return{currentValue:f,progressPercentage:Math.min(g,100),goalType:n.type==="revenue"?"Faturamento":"Lucro Lquido",goalAmount:n.amount}},[t,e,n]);return n?l.createElement("div",null,r&&l.createElement("h3",{className:"text-xl font-semibold mb-2 text-gray-700 dark:text-gray-200"}," Meta do Ms (",o,")"),l.createElement("div",{className:"flex justify-between items-end mb-1"},l.createElement("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400"},fe(s)),l.createElement("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"de ",fe(a))),l.createElement("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 shadow-inner"},l.createElement("div",{className:"bg-purple-500 h-4 rounded-full transition-all duration-500",style:{width:`${i}%`}})),l.createElement("p",{className:"text-right text-sm text-gray-600 dark:text-gray-300 mt-1"},i.toFixed(1),"% alcanado")):l.createElement("div",null,r&&l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"}," Meta do Ms"),l.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Nenhuma meta definida para este ms. V para a aba 'Metas' para criar uma."))},FA="bg-pink-500 hover:bg-pink-600",UA="bg-teal-500 hover:bg-teal-600",$y="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700",VA=({sales:t=[],expenses:e=[],products:n=[],monthlyGoal:r=null,setActiveTab:s=()=>{}})=>{const i=new Date;i.setHours(0,0,0,0);const{todayRevenue:o,todayNetProfit:a}=S.useMemo(()=>{const h=t.filter(m=>m.date.toDate()>=i&&m.status!=="estornada"),f=e.filter(m=>m.date.toDate()>=i&&m.status==="pago"),g=h.reduce((m,p)=>m+p.totalAmount,0),v=h.reduce((m,p)=>m+(p.profit||0),0),E=f.reduce((m,p)=>m+p.amount,0),w=v-E;return{todayRevenue:g,todayNetProfit:w}},[t,e]),u=S.useMemo(()=>n.flatMap(h=>(h.variants||[]).map(f=>({...f,productName:h.name}))),[n]),c=S.useMemo(()=>{const h=new Date;h.setDate(h.getDate()-7);const f=new Date(h);f.setHours(0,0,0,0);const g=t.filter(w=>w.date.toDate()>=f&&w.status!=="estornada"),v={};g.forEach(w=>w.items.forEach(m=>{v[m.sku]=(v[m.sku]||0)+m.quantity}));const E=new Map(u.map(w=>[w.sku,w]));return Object.entries(v).map(([w,m])=>({...E.get(w),quantitySold:m})).filter(w=>w&&w.productName).sort((w,m)=>m.quantitySold-w.quantitySold).slice(0,3)},[t,u]),d=S.useMemo(()=>u.filter(h=>h.quantity<5),[u]);return l.createElement("div",{className:"space-y-8"},l.createElement("div",null,l.createElement("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Painel de Controle"),l.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Resumo do seu negcio hoje, ",new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"}),".")),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},l.createElement("div",{className:`${$y} border-l-4 border-pink-500 col-span-1 md:col-span-2`},l.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Viso Geral do Dia"),l.createElement("div",{className:"mt-2 grid grid-cols-2 gap-4"},l.createElement("div",null,l.createElement("p",{className:"text-3xl font-bold text-pink-600"},fe(o)),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Vendas Hoje")),l.createElement("div",null,l.createElement("p",{className:`text-3xl font-bold ${a>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`},fe(a)),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Lucro Lquido Hoje")))),l.createElement("div",{className:`${$y} border-l-4 border-purple-500 col-span-1 md:col-span-2`},l.createElement(LA,{sales:t,expenses:e,monthlyGoal:r,showTitle:!0}))),l.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},l.createElement("div",{className:"lg:col-span-2 space-y-6"},l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"}," Desempenho da Semana"),l.createElement($A,{sales:t})),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"}," Produtos Quentes (ltimos 7 dias)"),c.length>0?l.createElement("ul",{className:"space-y-3"},c.map(h=>l.createElement("li",{key:h.sku,className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700/50 rounded-xl border-l-4 border-pink-300 dark:border-pink-500"},l.createElement("span",{className:"font-medium text-gray-800 dark:text-gray-200"},h.productName," (",h.size," - ",h.color,")"),l.createElement("span",{className:"font-bold text-pink-600 dark:text-pink-400"},h.quantitySold," uni.")))):l.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Nenhuma venda nos ltimos 7 dias."))),l.createElement("div",{className:"space-y-6"},l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"}," Avisos Importantes"),l.createElement("div",{className:"space-y-3"},d.length>0&&l.createElement("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/40 rounded-lg flex justify-between items-center"},l.createElement("p",{className:"text-orange-700 dark:text-orange-300 text-sm"},d.length," variae(s) com estoque baixo."),l.createElement("button",{onClick:()=>s("Estoque"),className:"text-sm font-semibold text-orange-800 dark:text-orange-200 hover:underline"},"Ver")),d.length===0&&l.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"Tudo em ordem por aqui!"))),l.createElement("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-lg dark:border dark:border-gray-700"},l.createElement("h3",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200"}," Acesso Rpido"),l.createElement("div",{className:"space-y-3"},l.createElement("button",{onClick:()=>s("Vendas"),className:`w-full text-center p-4 rounded-lg text-white font-bold ${FA}`},"+ Nova Venda"),l.createElement("button",{onClick:()=>s("Clientes"),className:"w-full text-center p-4 rounded-lg text-white font-bold bg-purple-500 hover:bg-purple-600"},"+ Nova Cliente"),l.createElement("button",{onClick:()=>s("Despesas"),className:`w-full text-center p-4 rounded-lg text-white font-bold ${UA}`},"+ Nova Despesa"))))))},zA=()=>{const t=()=>{try{const b=localStorage.getItem("mia-move-theme");if(b==="light"||b==="dark")return b;if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"light"},[e,n]=S.useState(t),[r,s]=S.useState(!1),[i,o]=S.useState(null),[a,u]=S.useState(!1),[c,d]=S.useState(null),[h,f]=S.useState("Incio");S.useLayoutEffect(()=>{const b=window.document.documentElement;e==="dark"?b.classList.add("dark"):b.classList.remove("dark");try{localStorage.setItem("mia-move-theme",e)}catch{}},[e]);const g=S.useCallback((b,x="info")=>{d({message:b,type:x}),setTimeout(()=>d(null),3e3)},[]),v=b=>{try{localStorage.setItem("mia-user",JSON.stringify(b))}catch{}s(!0),o(b),g("Bem-vindo "+(b.email||""),"success")},E=()=>{try{localStorage.removeItem("mia-user")}catch{}s(!1),o(null),g("Sesso encerrada","info");try{$n&&dl($n)}catch{}},w=l.useRef(!1);l.useEffect(()=>{try{const x=window.location.hash&&decodeURIComponent(window.location.hash.slice(1)),C=window.history.state&&window.history.state.tab;x?f(x):C?f(C):window.history.replaceState({tab:h},"")}catch{}const b=x=>{try{const C=x.state&&x.state.tab||(window.location.hash?decodeURIComponent(window.location.hash.slice(1)):"Incio");w.current=!0,f(C)}catch{}};return window.addEventListener("popstate",b),()=>window.removeEventListener("popstate",b)},[]),l.useEffect(()=>{try{w.current?w.current=!1:window.history.pushState({tab:h},"",`#${encodeURIComponent(h)}`)}catch{}},[h]);const m=!!Ho&&!!Ht,p=i?i.uid:null;if(!m)return l.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900"},l.createElement("div",{className:"max-w-xl p-8 bg-white dark:bg-gray-800 rounded-lg shadow"},l.createElement("h2",{className:"text-2xl font-bold mb-2"},"Firebase no configurado"),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Esta verso da aplicao requer conexo com Firestore. Por favor verifique o `firebaseConfig` e assegure que o Firestore esteja habilitado no projeto.")));S.useEffect(()=>{if(!m||!$n)return;const b=K_($n,async x=>{x?(s(!0),o({uid:x.uid,email:x.email,displayName:x.displayName})):(s(!1),o(null))});return()=>b()},[m]);const[y,k]=S.useState([]),[I,L]=S.useState([]),[z,M]=S.useState([]),[Q,A]=S.useState([]),[N,O]=S.useState([]),[K,re]=S.useState([]),[D,R]=S.useState([]);return S.useEffect(()=>{if(!m||!i)return;const b=i.uid,x=[],C=(j,T,$=!0)=>{try{const ne=kt(Ht,Ee(b,j)),ye=$?Ph(ne,eA("createdAt","desc")):Ph(ne),je=rA(ye,$e=>{const rt=$e.docs.map(Cn=>({id:Cn.id,...Cn.data()}));T(rt)},$e=>{console.error("Firestore listen error",j,$e),g("Erro ao escutar "+j,"error")});x.push(je)}catch(ne){console.error("listen setup error",ne)}};return C("products",k),C("sales",L),C("defectiveItems",M),C("expenses",A),C("customers",O),C("categories",re),C("goals",R,!1),()=>x.forEach(j=>j())},[m,i]),r?l.createElement("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200"},l.createElement("header",{className:"bg-white dark:bg-gray-800 shadow-md"},l.createElement("div",{className:"p-4 flex justify-between items-center"},l.createElement("div",{className:"flex items-center space-x-4"},l.createElement("h1",{onClick:()=>f("Incio"),className:"text-3xl cursor-pointer font-extrabold text-pink-600 tracking-wider"},"Mia Move ",l.createElement("span",{className:"text-teal-500 text-sm font-medium"},"Gesto"))),l.createElement("div",{className:"flex items-center space-x-3 sm:space-x-4"},l.createElement("button",{onClick:()=>u(!0),title:"Sincronizar",className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-pink-600 dark:text-pink-300 hover:bg-gray-300 dark:hover:bg-gray-600"},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V8a4 4 0 014-4h6m1 12v2a2 2 0 01-2 2H9a2 2 0 01-2-2v-2m8-8l3 3m0 0l-3 3m3-3H3"}))),l.createElement("button",{onClick:()=>n(b=>b==="light"?"dark":"light"),title:"Alternar tema",className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"},e==="dark"?l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},l.createElement("path",{d:"M17.293 13.293A8 8 0 116.707 2.707 8 8 0 0017.293 13.293z"})):l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},l.createElement("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4.22 2.03a1 1 0 011.4 1.42l-.7.7a1 1 0 11-1.4-1.42l.7-.7zM18 9a1 1 0 110 2h-1a1 1 0 110-2h1zM5.46 4.05a1 1 0 011.4 1.42l-.7.7A1 1 0 114.76 5.77l.7-.72zM4 9a1 1 0 100 2H3a1 1 0 100-2h1zM10 16a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM3.05 14.54a1 1 0 011.42 1.4l-.7.7a1 1 0 11-1.42-1.4l.7-.7zM16.95 14.54a1 1 0 011.42 1.4l-.7.7a1 1 0 11-1.42-1.4l.7-.7z"}))),l.createElement("div",{className:"w-9 h-9 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},l.createElement("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-200"},"PR")),l.createElement("button",{onClick:E,title:"Sair",className:"ml-2 px-3 py-1 text-sm rounded bg-gray-100 dark:bg-gray-700"},"Sair")))),l.createElement("main",{className:"p-4 sm:p-6 lg:p-8"},l.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6 sticky top-0 bg-gray-50 dark:bg-gray-900 z-20"},l.createElement("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto"},["Incio","Estoque","Vendas","Clientes","Despesas","Metas","Relatrios","Defeitos","Consultor - IA"].map(b=>l.createElement("button",{key:b,onClick:()=>f(b),className:`flex-shrink-0 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-base sm:text-lg transition ${h===b?"border-pink-500 text-pink-600 dark:border-pink-400 dark:text-pink-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"}`},b)))),h==="Incio"?l.createElement(VA,{sales:I,expenses:Q,products:y,monthlyGoal:null,setActiveTab:f}):h==="Estoque"?l.createElement(yA,{db:Ht,userId:p,products:y,showToast:g,categories:K}):h==="Vendas"?l.createElement(EA,{db:Ht,userId:p,products:y,sales:I,customers:N,showToast:g}):h==="Clientes"?l.createElement(wA,{db:Ht,userId:p,customers:N,sales:I,showToast:g}):h==="Despesas"?l.createElement(_A,{db:Ht,userId:p,showToast:g}):h==="Metas"?l.createElement(TA,{db:Ht,userId:p,sales:I,expenses:Q,allGoals:D,showToast:g}):h==="Relatrios"?l.createElement(AA,{db:Ht,userId:p,sales:I,products:y,expenses:Q,showToast:g}):h==="Defeitos"?l.createElement(PA,{db:Ht,userId:p,products:y,defectiveItems:z,showToast:g}):h==="Consultor - IA"?l.createElement(OA,{db:Ht,userId:p,showToast:g}):l.createElement("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow"},"Pgina: ",h," (ainda em desenvolvimento)")),a&&l.createElement(aA,{isOpen:a,onClose:()=>u(!1),showToast:g,onSync:b=>{g("Sincronizado com "+b,"success")},onUnsync:()=>{g("Sincronizao desfeita","info")},currentUid:p,isSynced:!1}),c&&l.createElement(lA,{message:c.message,type:c.type,onClose:()=>d(null)})):l.createElement(uA,{onLogin:v})},jA=Kv(document.getElementById("root"));jA.render(l.createElement(l.StrictMode,null,l.createElement(zA,null)));
